!function(e,n){"use strict";e.kha=e.kha||{},e.kha.input=e.kha.input||{};function i(){return g.__string_rec(this,"")}var t,x={},f=f||{};function r(e,t){var i=Object.create(e);for(var n in t)i[n]=t[n];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}function it(){}(x.HxOverrides=it).__name__=!0,it.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),i=new Date;return i.setTime(0),i.setUTCHours(t[0]),i.setUTCMinutes(t[1]),i.setUTCSeconds(t[2]),i;case 10:var n=e.split("-");return new Date(n[0],n[1]-1,n[2],0,0,0);case 19:var r=e.split(" "),s=r[0].split("-"),a=r[1].split(":");return new Date(s[0],s[1]-1,s[2],a[0],a[1],a[2]);default:throw new ft("Invalid date format : "+e)}},it.cca=function(e,t){var i=e.charCodeAt(t);if(i==i)return i},it.substr=function(e,t,i){if(null==i)i=e.length;else if(i<0){if(0!=t)return"";i=e.length+i}return e.substr(t,i)},it.remove=function(e,t){var i=e.indexOf(t);return-1!=i&&(e.splice(i,1),!0)},it.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};function l(){}(x.Lambda=l).__name__=!0,l.array=function(e){for(var t,i=[],n=(t=e)instanceof Array?it.iter(t):t.iterator();n.hasNext();){var r=n.next();i.push(r)}return i};function nt(){}(x.Main=nt).__name__=!0,nt.main=function(){var e=1600,t=900;null!=b.get_primary()&&(e>b.get_primary().get_width()&&(e=b.get_primary().get_width()),t>b.get_primary().get_height()-30&&(t=b.get_primary().get_height()-30)),pt.start(new K("Armory2D",e,t,null,new P(null,null,null,null,null,2)),nt.initialized)},nt.initialized=function(e){nt.prefs={path:"",scaleFactor:1,keyMap:{selectMouseButton:"Left",grabKey:71,rotateKey:82,sizeKey:83,slowMovement:16,gridInvert:17,gridInvertRelative:18}};var t=Krom.getArgCount();if(4<t&&(nt.prefs.path=Krom.getArg(3)),5<t){var i=parseFloat(Krom.getArg(4));nt.prefs.scaleFactor=i}var n=nt.prefs.path.split("/");n.pop(),nt.cwd=n.join("/");var r="Windows"==pt.get_systemId()?ut.replace(nt.prefs.path,"/","\\"):nt.prefs.path;gt.loadBlobFromPath(r,function(e){var t=JSON.parse(e.toString());nt.inst=new ot(t)},null,{fileName:"Main.hx",lineNumber:57,className:"Main",methodName:"initialized"})},nt.loadDefaultKeyMap=function(){nt.prefs.keyMap.grabKey=71,nt.prefs.keyMap.rotateKey=82,nt.prefs.keyMap.sizeKey=83,nt.prefs.keyMap.slowMovement=16,nt.prefs.keyMap.gridInvert=17,nt.prefs.keyMap.gridInvertRelative=18},Math.__name__=!0;function rt(){}(x.Reflect=rt).__name__=!0,rt.field=function(e,t){try{return e[t]}catch(e){e instanceof ft&&e.val;return null}},rt.getProperty=function(e,t){var i;return null==e?null:!!e.__properties__&&(i=e.__properties__["get_"+t])?e[i]():e[t]},rt.setProperty=function(e,t,i){var n;!!e.__properties__&&(n=e.__properties__["set_"+t])?e[n](i):e[t]=i},rt.fields=function(e){var t=[];if(null!=e){var i=Object.prototype.hasOwnProperty;for(var n in e)"__id__"!=n&&"hx__closures__"!=n&&i.call(e,n)&&t.push(n)}return t},rt.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},rt.copy=function(e){if(null==e)return null;for(var t={},i=0,n=rt.fields(e);i<n.length;){var r=n[i];++i,t[r]=rt.field(e,r)}return t};function st(){}(x.Std=st).__name__=!0,st.string=function(e){return g.__string_rec(e,"")},st.parseInt=function(e){var t=parseInt(e,!e||"0"!=e[0]||"x"!=e[1]&&"X"!=e[1]?10:16);return isNaN(t)?null:t};var ut=function(){};(x.StringTools=ut).__name__=!0,ut.endsWith=function(e,t){var i=t.length,n=e.length;return i<=n&&e.indexOf(t,n-i)==n-i},ut.isSpace=function(e,t){var i=it.cca(e,t);return 8<i&&i<14||32==i},ut.rtrim=function(e){for(var t=e.length,i=0;i<t&&ut.isSpace(e,t-i-1);)++i;return 0<i?it.substr(e,0,t-i):e},ut.replace=function(e,t,i){return e.split(t).join(i)};function T(){}(x.Type=T).__name__=!0,T.createEnum=function(e,t,i){var n=rt.field(e,t);if(null==n)throw new ft("No such constructor "+t);if(rt.isFunction(n)){if(null==i)throw new ft("Constructor "+t+" need parameters");return n.apply(e,i)}if(null!=i&&0!=i.length)throw new ft("Constructor "+t+" does not need parameters");return n},T.getInstanceFields=function(e){var t=[];for(var i in e.prototype)t.push(i);return it.remove(t,"__class__"),it.remove(t,"__properties__"),t};var Me={};(x["_UInt.UInt_Impl_"]=Me).__name__=!0,Me.gt=function(e,t){var i=e<0;return i!=t<0?i:t<e},Me.gte=function(e,t){var i=e<0;return i!=t<0?i:t<=e},Me.toFloat=function(e){return e<0?4294967296+e:e+0};function at(){}(x["arm2d.Assets"]=at).__name__=!0,at.getImage=function(e){return Ei.assetMap.h[e.id]},at.getFont=function(e){return Ei.assetMap.h[e.id]},at.importAsset=function(s,a){var e=lt.toAbsolute(a,nt.cwd);e="Windows"==pt.get_systemId()?ut.replace(e,"/","\\"):e,at.isPathImage(a)?gt.loadImageFromPath(e,!1,function(e){var t=a.split("/"),i=t[t.length-1],n=Ei.getAssetId(s),r={name:i,file:a,id:n};s.assets.push(r),Ei.assetMap.h[r.id]=e,ot.assetNames.push(i),dt.hwin.redraws=2},null,{fileName:"arm2d/Assets.hx",lineNumber:25,className:"arm2d.Assets",methodName:"importAsset"}):"ttf"==_t.extension(a).toLowerCase()&&gt.loadFontFromPath(e,function(e){var t=a.split("/"),i=t[t.length-1],n=Ei.getAssetId(s),r={name:i,file:a,id:n};s.assets.push(r),Ei.assetMap.h[r.id]=e,ot.assetNames.push(i),dt.hwin.redraws=2},null,{fileName:"arm2d/Assets.hx",lineNumber:37,className:"arm2d.Assets",methodName:"importAsset"})},at.importThemes=function(){var e=_t.directory(nt.prefs.path),t=_t.join([e,"_themes.json"]);t="Windows"==pt.get_systemId()?ut.replace(t,"/","\\"):t;try{gt.loadBlobFromPath(t,function(e){Ei.themes=JSON.parse(e.toString()),0==Ei.themes.length&&Ei.themes.push(rt.copy(Ci.light)),null!=nt.inst&&(ot.selectedTheme=Ei.themes[0])},function(e){Ei.themes.push(rt.copy(Ci.light)),null!=nt.inst&&(ot.selectedTheme=Ei.themes[0])},{fileName:"arm2d/Assets.hx",lineNumber:60,className:"arm2d.Assets",methodName:"importThemes"})}catch(e){e instanceof ft&&e.val;Ei.themes.push(rt.copy(Ci.light)),null!=nt.inst&&(ot.selectedTheme=Ei.themes[0])}},at.save=function(e){e.x=0,e.y=0,at.saveCanvas(e),at.saveAssets(e),at.saveThemes(),e.x=ot.coffX,e.y=ot.coffY},at.saveCanvas=function(e){Krom.fileSaveBytes(nt.prefs.path,he.ofString(JSON.stringify(e)).b.bufferValue)},at.saveAssets=function(e){var t=it.substr(nt.prefs.path,0,nt.prefs.path.length-5);t+=".files";for(var i="",n=0,r=e.assets;n<r.length;){var s=r[n];++n,i+=s.file+"\n"}Krom.fileSaveBytes(t,he.ofString(i).b.bufferValue)},at.saveThemes=function(){var e=_t.join([_t.directory(nt.prefs.path),"_themes.json"]);Krom.fileSaveBytes(e,he.ofString(JSON.stringify(Ei.themes)).b.bufferValue)},at.getEnumTexts=function(){return null==nt.inst?[""]:0<ot.assetNames.length?ot.assetNames:[""]},at.getAssetIndex=function(e,t){for(var i=0,n=e.assets.length;i<n;){var r=i++;if(t==e.assets[r].name)return 1+r}return 0},at.isPathImage=function(e){var t=_t.extension(e).toLowerCase();return"jpg"==t||"png"==t||"k"==t||"hdr"==t},at.isPathFont=function(e){return"ttf"==_t.extension(e).toLowerCase()};var ot=function(e){if(this.lastCanvasH=0,this.lastCanvasW=0,this.lastH=0,this.lastW=0,this.selectedFrame=0,this.zoom=1,this.resizeCanvas=!1,this.dropPath="",0<(this.canvas=e).assets.length){var t=e.assets;e.assets=[];for(var i=0;i<t.length;){var n=t[i];++i,at.importAsset(e,n.file)}}at.importThemes(),gt.loadEverything(Ni(this,this.loaded))};(x["arm2d.Editor"]=ot).__name__=!0,ot.__properties__={get_uiw:"get_uiw"},ot.get_uiw=function(){return ot.windowW*nt.prefs.scaleFactor|0},ot.prototype={ui:null,cui:null,canvas:null,toolbarw:null,get_toolbarw:function(){return 140*this.ui.ops.scaleFactor|0},dropPath:null,resizeCanvas:null,zoom:null,uimodal:null,selectedFrame:null,lastW:null,lastH:null,lastCanvasW:null,lastCanvasH:null,loaded:function(){var t=this,e=rt.copy(Ci.dark);e.FILL_WINDOW_BG=!0,this.ui=new Li({scaleFactor:nt.prefs.scaleFactor,font:gt.fonts.font_default,theme:e,color_wheel:gt.images.color_wheel}),this.cui=new Li({scaleFactor:1,font:gt.fonts.font_default,autoNotifyInput:!0,theme:rt.copy(Ei.getTheme(this.canvas.theme))}),this.uimodal=new Li({font:gt.fonts.font_default,scaleFactor:nt.prefs.scaleFactor}),X.initialize(this.ui,this.cui),null==Ei.getTheme(this.canvas.theme)&&(Ii.showMessage(new Li(this.ui.ops),"Warning!",'Theme "'+this.canvas.theme+'" was not found!\nUsing first theme in list instead: "'+Ei.themes[0].NAME+'"'),this.canvas.theme=Ei.themes[0].NAME),pt.notifyOnDropFiles(function(e){t.dropPath=ut.rtrim(e),t.dropPath=lt.toRelative(t.dropPath,nt.cwd)}),pt.notifyOnFrames(Ni(this,this.onFrames)),G.addTimeTask(Ni(this,this.update),0,.016666666666666666)},resize:function(){null!=ot.grid&&(ot.grid.unload(),ot.grid=null),null!=ot.timeline&&(ot.timeline.unload(),ot.timeline=null)},drawGrid:function(){var e=ot.gridSize*this.cui.ops.scaleFactor|0,t=2*ot.gridSize*this.cui.ops.scaleFactor|0,i=pt.windowWidth()+2*t,n=pt.windowHeight()+2*t;ot.grid=R.createRenderTarget(i,n),ot.grid.get_g2().begin(!0,-14408668);for(var r=0,s=1+(n/t|0);r<s;){var a=r++;ot.grid.get_g2().set_color(-14145496),ot.grid.get_g2().drawLine(0,a*t+e,i,a*t+e),ot.grid.get_g2().set_color(-13487566),ot.grid.get_g2().drawLine(0,a*t,i,a*t)}for(var o=0,l=1+(i/t|0);o<l;){var u=o++;ot.grid.get_g2().set_color(-14145496),ot.grid.get_g2().drawLine(u*t+e,0,u*t+e,n),ot.grid.get_g2().set_color(-13487566),ot.grid.get_g2().drawLine(u*t,0,u*t,n)}ot.grid.get_g2().end()},drawTimeline:function(e,t){var i=this.ui.ops.scaleFactor,n=e+t;ot.timeline=R.createRenderTarget(pt.windowWidth()-ot.get_uiw()-this.get_toolbarw(),n);var r=ot.timeline.get_g2();r.begin(!0,-14540254),r.set_font(gt.fonts.font_default),r.set_fontSize(16*i|0);for(var s=ot.timeline.get_width()/(11*i)|0,a=0,o=1+(s/5|0);a<o;){var l=a++,u=5*l,h=gt.fonts.font_default.width(r.get_fontSize(),u+"");r.drawString(u+"",55*l*i+5*i-h/2,e/2-r.get_fontSize()/2)}for(var c=0,A=s;c<A;){var d=c++;r.set_color(d%5==0?-12303292:-13421773),r.fillRect(11*d*i,n-t,10*i,t)}r.end()},onFrames:function(e){var t=e[0];Ii.show&&this.ui.inputRegistered?(this.ui.unregisterInput(),this.cui.unregisterInput()):Ii.show||this.ui.inputRegistered||(this.ui.registerInput(),this.cui.registerInput()),Ii.show&&(dt.hwin.redraws=1),""!=this.dropPath&&(at.importAsset(this.canvas,this.dropPath),this.dropPath="");var i=this.ui.ops.scaleFactor,n=30*i|0,r=40*i|0;null==ot.grid&&this.drawGrid(),null!=ot.timeline&&ot.timeline.get_height()==n+r||this.drawTimeline(n,r);var s=t.get_g2();s.begin(),s.set_color(-1);var a=2*ot.gridSize*this.cui.ops.scaleFactor|0;s.drawImage(ot.grid,ot.coffX%a-a,ot.coffY%a-a),this.canvas.x=ot.coffX,this.canvas.y=ot.coffY,s.drawRect(this.canvas.x,this.canvas.y,this.canvas.width*this.cui.ops.scaleFactor|0,this.canvas.height*this.cui.ops.scaleFactor|0,1);var o=8*X.ui.ops.scaleFactor|0;ct.hitbox(this.cui,this.canvas.x+(this.canvas.width*this.cui.ops.scaleFactor|0)-o/2,this.canvas.y+(this.canvas.height*this.cui.ops.scaleFactor|0)-o/2,o,o)&&(s.set_color(-14656100),s.fillRect(this.canvas.x+(this.canvas.width*this.cui.ops.scaleFactor|0)-o/2,this.canvas.y+(this.canvas.height*this.cui.ops.scaleFactor|0)-o/2,o,o),s.set_color(-1)),s.drawRect(this.canvas.x+(this.canvas.width*this.cui.ops.scaleFactor|0)-o/2,this.canvas.y+(this.canvas.height*this.cui.ops.scaleFactor|0)-o/2,o,o,1),Ei.screenW=this.canvas.width,Ei.screenH=this.canvas.height,Ei.draw(this.cui,this.canvas,s),X.render(s,this.canvas),""!=ot.currentOperation&&(s.set_fontSize(14*this.ui.ops.scaleFactor|0),s.set_color(-5592406),s.drawString(ot.currentOperation,this.get_toolbarw(),pt.windowHeight()-ot.timeline.get_height()-s.get_fontSize()));s.set_color(-1);var l=pt.windowHeight()-ot.timeline.get_height();s.drawImage(ot.timeline,this.get_toolbarw(),l),s.set_color(-14656100),s.fillRect(this.get_toolbarw()+11*this.selectedFrame*i,l+n,10*i,r),s.set_font(gt.fonts.font_default),s.set_fontSize(16*i|0);var u=4*i,h=4*i,c=30*i,A=n-2*u,d=gt.fonts.font_default.width(s.get_fontSize(),""+this.selectedFrame);if(c+h<d&&(c=d+h),s.fillRect(this.get_toolbarw()+11*this.selectedFrame*i+5*i-c/2,l+u,c,A),s.set_color(-1),s.drawString(""+this.selectedFrame,this.get_toolbarw()+11*this.selectedFrame*i+5*i-d/2,l+n/2-s.get_fontSize()/2),s.end(),this.ui.begin(s),p.renderToolbar(this.ui,this.cui,this.canvas,this.get_toolbarw()),this.ui.window(At.global.nest(61,null),this.get_toolbarw(),0,pt.windowWidth()-ot.get_uiw()-this.get_toolbarw(),(this.ui.t.ELEMENT_H+2)*this.ui.ops.scaleFactor|0)&&this.ui.tab(At.global.nest(62,null),this.canvas.name),dt.renderProperties(this.ui,ot.get_uiw(),this.canvas),this.ui.end(),this.ui.changed&&!this.ui.inputDown&&this.drawGrid(),s.begin(!1),null!=ot.dragAsset){var _=Math.min(128,at.getImage(ot.dragAsset).get_width()),f=_/at.getImage(ot.dragAsset).get_width(),g=at.getImage(ot.dragAsset).get_height()*f;s.drawScaledImage(at.getImage(ot.dragAsset),this.ui.inputX,this.ui.inputY,_,g)}s.end(),0<this.lastW&&(this.lastW!=pt.windowWidth()||this.lastH!=pt.windowHeight())?this.resize():0<this.lastCanvasW&&(this.lastCanvasW!=this.canvas.width||this.lastCanvasH!=this.canvas.height)&&this.resize(),this.lastW=pt.windowWidth(),this.lastH=pt.windowHeight(),this.lastCanvasW=this.canvas.width,this.lastCanvasH=this.canvas.height,ot.showFiles&&this.renderFiles(s),Ii.show&&Ii.render(s)},acceptDrag:function(e){var t=ht.makeElem(this.cui,this.canvas,1);t.asset=ot.assetNames[e+1],t.x=this.ui.inputX-this.canvas.x,t.y=this.ui.inputY-this.canvas.y,t.width=at.getImage(this.canvas.assets[e]).get_width(),t.height=at.getImage(this.canvas.assets[e]).get_height(),ot.selectedElem=t},update:function(){if(this.ui.inputReleased&&null!=ot.dragAsset){if(this.ui.inputX<pt.windowWidth()-ot.get_uiw()){for(var e=0,t=0,i=this.canvas.assets.length;t<i;){var n=t++;if(this.canvas.assets[n]==ot.dragAsset){e=n;break}}this.acceptDrag(e)}ot.dragAsset=null}if(null==ot.dragAsset){if(this.updateCanvas(),null!=ot.timeline){var r=pt.windowHeight()-ot.timeline.get_height();this.ui.inputDown&&this.ui.inputY>r&&this.ui.inputX<pt.windowWidth()-ot.get_uiw()&&this.ui.inputX>this.get_toolbarw()&&(this.selectedFrame=(this.ui.inputX-this.get_toolbarw())/11/this.ui.ops.scaleFactor|0)}X.update(this.ui,this.cui,this.canvas),Ii.show&&Ii.update(),this.updateFiles()}},updateCanvas:function(){if(!(ot.showFiles||this.ui.inputX>pt.windowWidth()-ot.get_uiw())){if(X.selectElement(this.canvas),!X.isManipulating&&(this.ui.inputDownR&&(ot.coffX+=0|this.ui.inputDX,ot.coffY+=0|this.ui.inputDY),0!=this.ui.inputWheelDelta)){var e=this.zoom;this.zoom+=-this.ui.inputWheelDelta/10,this.zoom<.4?this.zoom=.4:1<this.zoom&&(this.zoom=1),this.zoom=Math.round(10*this.zoom)/10,this.cui.setScale(this.zoom),e!=this.zoom&&this.drawGrid()}var t=8*X.ui.ops.scaleFactor|0;this.ui.inputStarted&&ct.hitbox(this.cui,this.canvas.x+(this.canvas.width*this.cui.ops.scaleFactor|0)-t/2,this.canvas.y+(this.canvas.height*this.cui.ops.scaleFactor|0)-t/2,t,t)&&(this.resizeCanvas=!0),this.ui.inputReleased&&this.resizeCanvas&&(this.resizeCanvas=!1),this.resizeCanvas&&(this.canvas.width+=0|this.ui.inputDX,this.canvas.height+=0|this.ui.inputDY,this.canvas.width<1&&(this.canvas.width=1),this.canvas.height<1&&(this.canvas.height=1))}},updateFiles:function(){if(ot.showFiles&&this.ui.inputReleased){var e=pt.windowWidth(),t=pt.windowHeight(),i=e/2-ot.modalRectW/2,n=e/2+ot.modalRectW/2,r=t/2-ot.modalRectH/2,s=t/2+ot.modalRectH/2;(this.ui.inputX<i||this.ui.inputX>n||this.ui.inputY<r+ot.modalHeaderH||this.ui.inputY>s)&&(ot.showFiles=!1)}},renderFiles:function(e){var t=pt.windowWidth(),i=pt.windowHeight(),n=t/2-ot.modalW/2,r=i/2-ot.modalH/2;e.begin(!1),e.set_color(-14671840),e.fillRect(n,r,ot.modalW,ot.modalH),e.end();var s=t/2-ot.modalRectW/2|0,a=t/2+ot.modalRectW/2|0,o=i/2-ot.modalRectH/2|0,l=i/2+ot.modalRectH/2|0;if(o+=ot.modalHeaderH,this.uimodal.begin(e),this.uimodal.window(At.global.nest(63,null),s,o,ot.modalRectW,ot.modalRectH-100)){var u=At.global.nest(64,null);u.text=this.uimodal.textInput(u),ot.path=Bi.fileBrowser(this.uimodal,u,ot.foldersOnly)}this.uimodal.end(!1),e.begin(!1),this.uimodal.beginRegion(e,a-100,l-30,100),this.uimodal.button("OK")&&(ot.showFiles=!1,ot.filesDone(ot.path)),this.uimodal.endRegion(!1),this.uimodal.beginRegion(e,a-200,l-30,100),this.uimodal.button("Cancel")&&(ot.showFiles=!1),this.uimodal.endRegion(),e.end()},scaled:function(e){return e*this.cui.ops.scaleFactor|0},__class__:ot,__properties__:{get_toolbarw:"get_toolbarw"}};var X=function(){};(x["arm2d.ElementController"]=X).__name__=!0,X.__properties__={get_handleSize:"get_handleSize"},X.get_handleSize=function(){return 8*X.ui.ops.scaleFactor|0},X.initialize=function(e,t){X.ui=e,X.cui=t},X.selectElement=function(e){if(null!=X.ui){var t=nt.prefs.keyMap.selectMouseButton;if("Left"==t&&X.ui.inputStarted&&X.ui.inputDown||"Right"==t&&X.ui.inputStartedR&&X.ui.inputDownR){var i=ot.selectedElem;ot.selectedElem=null;var n=e.elements.slice();n.reverse();for(var r=0;r<n.length;){var s=n[r];++r;var a=Ei.getAnchorOffset(e,s),o=(ct.absx(e,s)*X.cui.ops.scaleFactor|0)+a[0],l=(ct.absy(e,s)*X.cui.ops.scaleFactor|0)+a[1],u=s.width*X.cui.ops.scaleFactor|0,h=s.height*X.cui.ops.scaleFactor|0,c=e.x+o+u/2,A=e.y+l+h/2,d=c-(8*X.ui.ops.scaleFactor|0)/2,_=e.y+l-2*(8*X.ui.ops.scaleFactor|0)-(8*X.ui.ops.scaleFactor|0)/2,f=2*(8*X.ui.ops.scaleFactor|0)+(8*X.ui.ops.scaleFactor|0)/2;if(ct.hitbox(X.cui,e.x+o-(8*X.ui.ops.scaleFactor|0)/2,e.y+l-(8*X.ui.ops.scaleFactor|0)/2,u+(8*X.ui.ops.scaleFactor|0),h+(8*X.ui.ops.scaleFactor|0),s.rotation)||ct.hitbox(X.cui,d,_,8*X.ui.ops.scaleFactor|0,f,s.rotation,[c,A])&&i==s){ot.selectedElem=s;break}}}}},X.render=function(e,t){if(null!=ot.selectedElem){var i=Ei.getAnchorOffset(t,ot.selectedElem),n=(ct.absx(t,ot.selectedElem)*X.cui.ops.scaleFactor|0)+i[0],r=(ct.absy(t,ot.selectedElem)*X.cui.ops.scaleFactor|0)+i[1],s=ot.selectedElem.width*X.cui.ops.scaleFactor|0,a=ot.selectedElem.height*X.cui.ops.scaleFactor|0,o=t.x+n+s/2,l=t.y+r+a/2;e.pushRotation(ot.selectedElem.rotation,o,l),e.set_color(-1),e.drawRect(t.x+n,t.y+r,s,a),e.set_color(-16777216),e.drawRect(t.x+n+1,t.y+r+1,s,a),e.set_color(-1);for(var u=ct.rotatePoint(X.ui.inputX,X.ui.inputY,o,l,-ot.selectedElem.rotation),h=0;h<3;)for(var c=h++/2,A=0;A<3;){var d=A++/2;if(.5!=c||.5!=d){var _=t.x+n+s*c-(8*X.ui.ops.scaleFactor|0)/2,f=t.y+r+a*d-(8*X.ui.ops.scaleFactor|0)/2,g=!1;0==c&&X.dragLeft?0==d&&X.dragTop?g=!0:.5!=d||X.dragTop||X.dragBottom?1==d&&X.dragBottom&&(g=!0):g=!0:.5!=c||X.dragLeft||X.dragRight?1==c&&X.dragRight&&(0==d&&X.dragTop?g=!0:.5!=d||X.dragTop||X.dragBottom?1==d&&X.dragBottom&&(g=!0):g=!0):0==d&&X.dragTop?g=!0:1==d&&X.dragBottom&&(g=!0),g=g&&X.drag,(u.x>_&&u.x<_+(8*X.ui.ops.scaleFactor|0)||g)&&(u.y>f&&u.y<f+(8*X.ui.ops.scaleFactor|0)||g)&&(e.set_color(-14656100),e.fillRect(_,f,8*X.ui.ops.scaleFactor|0,8*X.ui.ops.scaleFactor|0),e.set_color(-1)),e.drawRect(_,f,8*X.ui.ops.scaleFactor|0,8*X.ui.ops.scaleFactor|0)}}e.drawLine(o,t.y+r,o,t.y+r-2*(8*X.ui.ops.scaleFactor|0));var p=o,m=t.y+r-2*(8*X.ui.ops.scaleFactor|0);null==m&&(m=0),null==p&&(p=0);var v=p,w=m,b=u.x-v,y=u.y-w;null==y&&(y=0),null==b&&(b=0);(Math.sqrt(b*b+y*y)<=(8*X.ui.ops.scaleFactor|0)/2||X.rotate)&&(e.set_color(-14656100),mt.fillCircle(e,v,w,(8*X.ui.ops.scaleFactor|0)/2),e.set_color(-1)),mt.drawCircle(e,v,w,(8*X.ui.ops.scaleFactor|0)/2),e.popTransformation()}},X.update=function(e,t,i){if(X.ui=e,X.cui=t,null!=ot.selectedElem){var n=ot.selectedElem,r=Ei.getAnchorOffset(i,n),s=(ct.absx(i,n)*X.cui.ops.scaleFactor|0)+r[0],a=(ct.absy(i,n)*X.cui.ops.scaleFactor|0)+r[1],o=n.width*X.cui.ops.scaleFactor|0,l=n.height*X.cui.ops.scaleFactor|0,u=ct.rotatePoint(e.inputX,e.inputY,i.x+s+o/2,i.y+a+l/2,-n.rotation);if(e.inputStarted&&e.inputDown)if(ct.hitbox(e,i.x+s-(8*X.ui.ops.scaleFactor|0)/2,i.y+a-(8*X.ui.ops.scaleFactor|0)/2,o+(8*X.ui.ops.scaleFactor|0),l+(8*X.ui.ops.scaleFactor|0),ot.selectedElem.rotation))X.drag=!0,X.dragLeft=X.dragRight=X.dragTop=X.dragBottom=!1,u.x>i.x+s+o-(8*X.ui.ops.scaleFactor|0)?X.dragRight=!0:u.x<i.x+s+(8*X.ui.ops.scaleFactor|0)&&(X.dragLeft=!0),u.y>i.y+a+l-(8*X.ui.ops.scaleFactor|0)?X.dragBottom=!0:u.y<i.y+a+(8*X.ui.ops.scaleFactor|0)&&(X.dragTop=!0),X.startElementManipulation(!0);else{var h=i.x+s+o/2,c=i.y+a-2*(8*X.ui.ops.scaleFactor|0);null==c&&(c=0),null==h&&(h=0);var A=h,d=c,_=u.x-A,f=u.y-d;null==f&&(f=0),null==_&&(_=0);Math.sqrt(_*_+f*f)<=(8*X.ui.ops.scaleFactor|0)&&(X.rotate=!0,X.startElementManipulation(!0))}if(X.isManipulating)if(dt.hwin.redraws=2,X.transformStartedMouse&&e.inputReleased||!X.transformStartedMouse&&e.inputStarted)X.endElementManipulation();else if(e.isKeyPressed&&e.isEscapeDown||e.inputStartedR)X.endElementManipulation(!0);else if(X.drag){var g=e.inputX,p=e.inputY;null==p&&(p=0),null==g&&(g=0);var m=g,v=p,w=X.transformInitInput,b=m-w.x,y=v-w.y;null==y&&(y=0),null==b&&(b=0);var x=b,T=y;X.transformStartedMouse||(e.isKeyPressed&&88==e.key&&(n.width=0|X.transformInitSize.x,n.height=0|X.transformInitSize.y,X.dragRight=!0,X.dragBottom=!X.dragBottom),e.isKeyPressed&&89==e.key&&(n.width=0|X.transformInitSize.x,n.height=0|X.transformInitSize.y,X.dragBottom=!0,X.dragRight=!X.dragRight)),X.dragRight?(x=ct.calculateTransformDelta(e,ot.gridSnapPos,ot.gridUseRelative,ot.gridSize,x,X.transformInitPos.x+X.transformInitSize.x),n.width=X.transformInitSize.x+x|0):X.dragLeft&&(x=ct.calculateTransformDelta(e,ot.gridSnapPos,ot.gridUseRelative,ot.gridSize,x,X.transformInitPos.x),n.x=X.transformInitPos.x+x,n.width=X.transformInitSize.x-x|0),X.dragBottom?(T=ct.calculateTransformDelta(e,ot.gridSnapPos,ot.gridUseRelative,ot.gridSize,T,X.transformInitPos.y+X.transformInitSize.y),n.height=X.transformInitSize.y+T|0):X.dragTop&&(T=ct.calculateTransformDelta(e,ot.gridSnapPos,ot.gridUseRelative,ot.gridSize,T,X.transformInitPos.y),n.y=X.transformInitPos.y+T,n.height=X.transformInitSize.y-T|0),1!=n.type&&(n.width<1&&(n.width=1),n.height<1&&(n.height=1)),X.dragLeft||X.dragRight||X.dragBottom||X.dragTop?((X.dragBottom||X.dragTop)&&(X.dragLeft||X.dragRight)||(T=0),ot.currentOperation=" x: "+n.x+"  y: "+n.y+"  w: "+n.width+"  h: "+n.height+"  (dx: "+x+"  dy: "+T+")"):(X.grab=!0,X.grabX=!0,X.grabY=!0,X.drag=!1)}else if(X.grab){var S=e.inputX,E=e.inputY;null==E&&(E=0),null==S&&(S=0);var B=S,k=E,I=X.transformInitInput,C=B-I.x,L=k-I.y;null==L&&(L=0),null==C&&(C=0);var N=C,F=L;e.isKeyPressed&&88==e.key&&(n.x=X.transformInitPos.x,n.y=X.transformInitPos.y,X.grabX=!0,X.grabY=!X.grabY),e.isKeyPressed&&89==e.key&&(n.x=X.transformInitPos.x,n.y=X.transformInitPos.y,X.grabY=!0,X.grabX=!X.grabX),X.grabX&&(N=ct.calculateTransformDelta(e,ot.gridSnapPos,ot.gridUseRelative,ot.gridSize,N,X.transformInitPos.x),n.x=X.transformInitPos.x+N|0),X.grabY&&(F=ct.calculateTransformDelta(e,ot.gridSnapPos,ot.gridUseRelative,ot.gridSize,F,X.transformInitPos.y),n.y=X.transformInitPos.y+F|0),X.grabX?X.grabY||(F=0):N=0,ot.currentOperation=" x: "+n.x+"  y: "+n.y+"  (dx: "+N+"  dy: "+F+")"}else if(X.rotate){var P=i.x+s+o/2,M=i.y+a+l/2;null==M&&(M=0),null==P&&(P=0);var R=P,O=M,V=e.inputX,D=e.inputY;null==D&&(D=0),null==V&&(V=0);var U=V-R,H=D-O;null==H&&(H=0),null==U&&(U=0);var W=U,G=H,z=-Math.atan2(W,G)+Math.PI;(e.isKeyDown&&e.key==nt.prefs.keyMap.gridInvert)!=ot.useRotationSteps&&(z=Math.round(z/ot.rotationSteps)*ot.rotationSteps),n.rotation=z,ot.currentOperation=" Rot: "+ct.roundPrecision(57.29578*z,2)+"deg"}e.isKeyPressed&&!e.isTyping&&(X.grab||e.key!=nt.prefs.keyMap.grabKey||(X.startElementManipulation(),X.grab=!0,X.grabX=!0,X.grabY=!0),X.drag||e.key!=nt.prefs.keyMap.sizeKey||(X.startElementManipulation(),X.drag=!0,X.dragLeft=!1,X.dragTop=!1,X.dragRight=!0,X.dragBottom=!0),X.rotate||e.key!=nt.prefs.keyMap.rotateKey||(X.startElementManipulation(),X.rotate=!0),X.isManipulating||(37==e.key&&(ot.gridSnapPos?n.x-=ot.gridSize:n.x--),39==e.key&&(ot.gridSnapPos?n.x+=ot.gridSize:n.x++),38==e.key&&(ot.gridSnapPos?n.y-=ot.gridSize:n.y--),40==e.key&&(ot.gridSnapPos?n.y+=ot.gridSize:n.y++),e.isBackspaceDown||e.isDeleteDown?(ht.removeElem(i,ot.selectedElem),ot.selectedElem=null):68==e.key&&(ot.selectedElem=ht.duplicateElem(i,n))))}else X.endElementManipulation()},X.startElementManipulation=function(e){null==e&&(e=!1),X.isManipulating&&X.endElementManipulation(!0),X.transformInitInput=new fi(X.ui.inputX,X.ui.inputY),X.transformInitPos=new fi(ot.selectedElem.x,ot.selectedElem.y),X.transformInitSize=new fi(ot.selectedElem.width,ot.selectedElem.height),X.transformInitRot=ot.selectedElem.rotation,X.transformStartedMouse=e,X.isManipulating=!0},X.endElementManipulation=function(e){null==e&&(e=!1),e&&(ot.selectedElem.x=X.transformInitPos.x,ot.selectedElem.y=X.transformInitPos.y,ot.selectedElem.width=0|X.transformInitSize.x,ot.selectedElem.height=0|X.transformInitSize.y,ot.selectedElem.rotation=X.transformInitRot),X.isManipulating=!1,X.grab=!1,X.drag=!1,X.rotate=!1,X.transformStartedMouse=!1,ot.currentOperation=""},X.scaled=function(e){return e*X.cui.ops.scaleFactor|0};var lt=function(){};(x["arm2d.Path"]=lt).__name__=!0,lt.toRelative=function(e,t){e=_t.normalize(e),t=_t.normalize(t);for(var i=[],n=e.split("/"),r=t.split("/"),s=0;n[s]==r[s];)++s;for(var a=0,o=r.length-s;a<o;){a++;i.push("..")}for(var l=s,u=n.length;l<u;){var h=l++;i.push(n[h])}return i.join("/")},lt.toAbsolute=function(e,t){return _t.normalize(t+"/"+e)};var ht=function(){};(x["arm2d.tools.CanvasTools"]=ht).__name__=!0,ht.makeElem=function(e,t,i){var n="",r=e.t.ELEMENT_H,s=0;switch(i){case 0:n=ht.unique("Text",t.elements,"name");break;case 1:n=ht.unique("Image",t.elements,"name"),r=100;break;case 2:n=ht.unique("Button",t.elements,"name"),s=1;break;case 3:n=ht.unique("Empty",t.elements,"name"),r=100;break;case 6:n=ht.unique("Check",t.elements,"name");break;case 7:n=ht.unique("Radio",t.elements,"name");break;case 8:n=ht.unique("Combo",t.elements,"name");break;case 9:n=ht.unique("Slider",t.elements,"name"),s=2;break;case 10:n=ht.unique("TextInput",t.elements,"name");break;case 11:n=ht.unique("KeyInput",t.elements,"name");break;case 12:n=ht.unique("Filled_Rectangle",t.elements,"name"),r=100;break;case 13:n=ht.unique("Rectangle",t.elements,"name"),r=100;break;case 14:n=ht.unique("Filled_Circle",t.elements,"name");break;case 15:n=ht.unique("Circle",t.elements,"name");break;case 16:n=ht.unique("Filled_Triangle",t.elements,"name");break;case 17:n=ht.unique("Triangle",t.elements,"name");break;case 18:n=ht.unique("Progress_bar",t.elements,"name");break;case 19:n=ht.unique("CProgress_bar",t.elements,"name")}var a={id:Ei.getElementId(t),type:i,name:n,event:"",x:0,y:0,width:150,height:r,rotation:0,text:"My "+n,asset:"",progress_at:0,progress_total:100,strength:1,alignment:g.__cast(s,Fi),anchor:0,parent:null,children:[],visible:!0};return t.elements.push(a),a},ht.unique=function(e,t,i,n){null==n&&(n=-1);var r=e,s=e.lastIndexOf(".");-1!=s&&4==e.substring(s).length&&(r=e.substring(0,s));for(var a=0;a<t.length;){var o=t[a];if(++a,rt.getProperty(o,i)==e){if(-1<n){var l=(null==++n?"null":""+n).length;3<l&&(l=3);for(var u=".",h=0,c=3-l;h<c;){h++;u+="0"}return ht.unique(r+u+(null==n?"null":""+n),t,i,n)}return ht.unique(r,t,i,0)}}return e},ht.moveElem=function(e,t,i){for(var n=e.elements,r=n.indexOf(t),s=t.parent;!((r+=i)<0||r>=n.length);)if(n[r].parent==s){it.remove(n,t),n.splice(r,0,t);break}},ht.removeElem=function(e,t){if(null!=t.children)for(var i=0,n=t.children;i<n.length;){var r=n[i];++i,ht.removeElem(e,ht.elemById(e,r))}it.remove(e.elements,t),null!=t.parent&&(it.remove(ht.elemById(e,t.parent).children,t.id),t.parent=null)},ht.elemById=function(e,t){for(var i=0,n=e.elements;i<n.length;){var r=n[i];if(++i,r.id==t)return r}return null},ht.unparent=function(e,t){var i=ht.elemById(e,t.parent);null!=i&&(t.x+=ct.absx(e,i),t.y+=ct.absy(e,i),t.parent=null,it.remove(i.children,t.id))},ht.setParent=function(e,t,i){ht.elemById(e,t.parent)!=i&&(ht.unparent(e,t),null!=i&&(null==i.children&&(t.children=[]),i.children.push(t.id),t.parent=i.id,t.x-=ct.absx(e,i),t.y-=ct.absy(e,i)))},ht.duplicateElem=function(e,t,i){if(null==t)return null;null==i&&(i=t.parent);var n={id:Ei.getElementId(e),type:t.type,name:t.name,event:t.event,x:t.x+10,y:t.y+10,width:t.width,height:t.height,rotation:t.rotation,text:t.text,asset:t.asset,color:t.color,color_text:t.color_text,color_hover:t.color_hover,color_press:t.color_press,color_progress:t.color_progress,progress_at:t.progress_at,progress_total:t.progress_total,strength:t.strength,anchor:t.anchor,parent:i,children:[],visible:t.visible};e.elements.push(n),null!=i&&(ht.elemById(e,i).children.push(n.id),t.parent!=i&&(n.x=t.x,n.y=t.y));for(var r=0,s=t.children;r<s.length;){var a=s[r];++r,ht.duplicateElem(e,ht.elemById(e,a),n.id)}return n};var ct=function(){};(x["arm2d.tools.Math"]=ct).__name__=!0,ct.toDegrees=function(e){return 57.29578*e},ct.toRadians=function(e){return.0174532924*e},ct.hitbox=function(e,t,i,n,r,s,a){if(null==s&&(s=0),null!=a&&2!=a.length)throw new ft("arm2d.tools.Math.hitbox(): 'center' argument must consist of two values!");null==a&&(a=[t+n/2,i+r/2]);var o=ct.rotatePoint(e.inputX,e.inputY,a[0],a[1],-s);return o.x>t&&o.x<t+n&&o.y>i&&o.y<i+r},ct.absx=function(e,t){return null==t?0:t.x+ct.absx(e,ht.elemById(e,t.parent))},ct.absy=function(e,t){return null==t?0:t.y+ct.absy(e,ht.elemById(e,t.parent))},ct.roundPrecision=function(e,t){return null==t&&(t=0),e*=Math.pow(10,t),e|=0,e/=Math.pow(10,t)},ct.rotatePoint=function(e,t,i,n,r){t-=n;var s=(e-=i)*Math.cos(r)-t*Math.sin(r),a=e*Math.sin(r)+t*Math.cos(r);return new fi(i+s,n+a)},ct.calculateTransformDelta=function(e,t,i,n,r,s){null==s&&(s=0);var a=e.isKeyDown&&e.key==nt.prefs.keyMap.slowMovement,o=t!=(e.isKeyDown&&e.key==nt.prefs.keyMap.gridInvert),l=i!=(e.isKeyDown&&e.key==nt.prefs.keyMap.gridInvertRelative);return o?(r=Math.round(r/n)*n,a&&(r/=2),l&&0!=s&&(n/2<(s%=n)&&(s=-(n-s)),r-=s),r):a?r/2:r};var At=function(e){this.changed=!1,this.dragY=0,this.dragX=0,this.dragEnabled=!1,this.lastMaxY=0,this.lastMaxX=0,this.layout=0,this.scrollEnabled=!1,this.scrollOffset=0,this.redraws=2,this.texture=null,this.text="",this.value=0,this.color=-1,this.position=0,this.selected=!1,null!=e&&(null!=e.selected&&(this.selected=e.selected),null!=e.position&&(this.position=e.position),null!=e.value&&(this.value=e.value),null!=e.text&&(this.text=e.text),null!=e.color&&(this.color=e.color),null!=e.layout&&(this.layout=e.layout))};(x["zui.Handle"]=At).__name__=!0,At.prototype={selected:null,position:null,color:null,value:null,text:null,texture:null,redraws:null,scrollOffset:null,scrollEnabled:null,layout:null,lastMaxX:null,lastMaxY:null,dragEnabled:null,dragX:null,dragY:null,changed:null,children:null,nest:function(e,t){null==this.children&&(this.children=new $);var i=this.children.h[e];return null==i&&(i=new At(t),this.children.h[e]=i),i},unnest:function(e){null!=this.children&&this.children.remove(e)},__class__:At};var dt=function(){};(x["arm2d.ui.UIProperties"]=dt).__name__=!0,dt.renderProperties=function(l,e,u){var t=dt.hwin,i=pt.windowWidth()-e,n=pt.windowHeight();if(l.window(t,i,0,e,n)){var r=At.global.nest(1,null);if(l.tab(r,"Project")){l.button("Save")&&at.save(u);var s=At.global.nest(2,{selected:!1});if(l.panel(s,"Canvas")){l.indent(),l.button("New")&&(u.elements=[],ot.selectedElem=null),l.isHovered&&l.tooltip("Create new canvas");var a=At.global.nest(3,{text:u.name});l.textInput(a,"Name",2),a.changed&&("_themes"==a.text?(Ii.showMessage(new Li(l.ops),"Sorry!",'"_themes" is not a valid canvas name as it is reserved!'),a.text=u.name):u.name=a.text),l.row([.5,.5]);var o=At.global.nest(4,{text:u.width+""}),h=At.global.nest(5,{text:u.height+""});o.text=u.width+"",h.text=u.height+"";var c=l.textInput(o,"Width",2),A=l.textInput(h,"Height",2);u.width=st.parseInt(c),u.height=st.parseInt(A),l.unindent()}var d=At.global.nest(6,{selected:!0});if(l.panel(d,"Outliner")){l.indent();var _=null;_=function(e,t){var i=!1;ot.selectedElem==t&&(l.g.set_color(-14656100),l.g.fillRect(0,l._y,l._windowW,l.t.ELEMENT_H*l.ops.scaleFactor),l.g.set_color(-1));var n=l.getStarted();if(n&&!l.inputDownR&&(ot.selectedElem=t),n&&l.inputDownR&&(t==ot.selectedElem?ht.unparent(u,t):ht.setParent(u,ot.selectedElem,t)),null!=t.children&&0<t.children.length){l.row([.07692307692307693,.9230769230769231]);var r=e.nest(t.id,{selected:!0});i=l.panel(r,"",!0),l.text(t.name)}else l._x+=18,l.text(t.name),l._x-=18;if(i)for(var s=t.children.length;0<s;){--s;var a=t.children[t.children.length-1-s];l.indent();var o=ht.elemById(u,a);_(e,o),l.unindent()}};for(var f=0,g=u.elements.length;f<g;){var p=f++,m=u.elements[u.elements.length-1-p];if(null==m.parent){var v=At.global.nest(7,null);_(v,m)}}l.row([.25,.25,.25,.25]);u.elements;l.button("Up")&&null!=ot.selectedElem&&ht.moveElem(u,ot.selectedElem,1),l.isHovered&&l.tooltip("Move element up"),l.button("Down")&&null!=ot.selectedElem&&ht.moveElem(u,ot.selectedElem,-1),l.isHovered&&l.tooltip("Move element down"),l.button("Remove")&&null!=ot.selectedElem&&(ht.removeElem(u,ot.selectedElem),ot.selectedElem=null),l.isHovered&&l.tooltip("Delete element"),l.button("Duplicate")&&null!=ot.selectedElem&&(ot.selectedElem=ht.duplicateElem(u,ot.selectedElem)),l.isHovered&&l.tooltip("Create duplicate of element"),l.unindent()}if(null!=ot.selectedElem){var w=ot.selectedElem,b=w.id,y=At.global.nest(8,{selected:!0});if(l.panel(y,"Properties")){l.indent();var x=null==w.visible||w.visible,T=At.global.nest(9,null).nest(b,{selected:x});w.visible=l.check(T,"Visible");var S=At.global.nest(10,null).nest(b,{text:w.name});w.name=l.textInput(S,"Name",2);var E=At.global.nest(11,null).nest(b,{text:w.text});w.text=l.textInput(E,"Text",2),l.row([.25,.25,.25,.25]);var B=w.x+"",k=At.global.nest(12,null).nest(b,{text:B}),I=w.y+"",C=At.global.nest(13,null).nest(b,{text:I});k.text=w.x+"",C.text=w.y+"";var L=l.textInput(k,"X",2),N=l.textInput(C,"Y",2);w.x=parseFloat(L),w.y=parseFloat(N);var F=w.width+"",P=At.global.nest(14,null).nest(b,{text:F}),M=w.height+"",R=At.global.nest(15,null).nest(b,{text:M});P.text=w.width+"",R.text=w.height+"";var O=l.textInput(P,"W",2),V=l.textInput(R,"H",2);if(w.width=0|parseFloat(O),w.height=0|parseFloat(V),13==w.type||15==w.type||17==w.type||18==w.type||19==w.type){var D=w.strength+"",U=At.global.nest(16,null).nest(b,{text:D}),H=l.textInput(U,"Line Strength",2);w.strength=0|parseFloat(H)}if(18==w.type||19==w.type){var W=At.global.nest(17,null).nest(b,{value:w.progress_at}),G=l.slider(W,"Progress",0,w.progress_total,!0,1),z=w.progress_total+"",X=At.global.nest(18,null).nest(b,{text:z}),Y=l.textInput(X,"Total Progress",2);w.progress_total=0|parseFloat(Y),w.progress_at=0|G}var K=At.global.nest(19,null).nest(b,{value:ct.roundPrecision(57.29578*(null==w.rotation?0:w.rotation),2)});K.value=ct.roundPrecision(57.29578*w.rotation,2),360<=K.value&&(K.value=0),w.rotation=.0174532924*l.slider(K,"Rotation",0,360,!0);var Q=At.global.nest(20,null).nest(b,{position:at.getAssetIndex(u,w.asset)}),q=at.getEnumTexts(),j=l.combo(Q,q,"Asset",!0,2);w.asset=at.getEnumTexts()[j],l.unindent()}var Z=At.global.nest(21,{selected:!1});if(l.panel(Z,"Color")){var J=function(e,t,i){l.row([.5,.5]);var n=At.global.nest(22,null).nest(b).nest(e,{color:null!=t?t:i});return Bi.colorField(l,n,!0),n.changed&&(t=n.color),!l.button("Reset")&&null!=t||(t=null,n.color=i,n.changed=!1),t};l.indent(),0==w.type?(l.text("Text:"),w.color_text=J(1,w.color_text,Ei.getTheme(u.theme).TEXT_COL)):2==w.type?(l.text("Text:"),w.color_text=J(1,w.color_text,Ei.getTheme(u.theme).BUTTON_TEXT_COL),l.text("Background:"),w.color=J(2,w.color,Ei.getTheme(u.theme).BUTTON_COL),l.text("On Hover:"),w.color_hover=J(3,w.color_hover,Ei.getTheme(u.theme).BUTTON_HOVER_COL),l.text("On Pressed:"),w.color_press=J(4,w.color_press,Ei.getTheme(u.theme).BUTTON_PRESSED_COL)):12==w.type||14==w.type||13==w.type||15==w.type||17==w.type||16==w.type?(l.text("Color:"),w.color=J(1,w.color,Ei.getTheme(u.theme).BUTTON_COL)):18==w.type||19==w.type?(l.text("Progress:"),w.color_progress=J(1,w.color_progress,Ei.getTheme(u.theme).TEXT_COL),l.text("Background:"),w.color=J(2,w.color,Ei.getTheme(u.theme).BUTTON_COL)):3==w.type?l.text("No color for element type empty"):(l.text("Text:"),w.color_text=J(1,w.color,Ei.getTheme(u.theme).TEXT_COL),l.text("Background:"),w.color=J(2,w.color,Ei.getTheme(u.theme).BUTTON_COL),l.text("On Hover:"),w.color_hover=J(3,w.color,Ei.getTheme(u.theme).BUTTON_HOVER_COL)),l.unindent()}var $=At.global.nest(23,{selected:!1});if(l.panel($,"Align")){l.indent();var ee=At.global.nest(24,null).nest(b,{position:w.alignment});l.row([.3333333333333333,.3333333333333333,.3333333333333333]),l.radio(ee,0,"Left"),l.radio(ee,1,"Center"),l.radio(ee,2,"Right"),ot.selectedElem.alignment=ee.position,l.unindent()}var te=At.global.nest(25,{selected:!1});if(l.panel(te,"Anchor")){l.indent();var ie=At.global.nest(26,null).nest(b,{position:w.anchor});l.row([.36363636363636365,.2727272727272727,.36363636363636365]),l.radio(ie,0,"Top-Left"),l.radio(ie,1,"Top"),l.radio(ie,2,"Top-Right"),l.row([.36363636363636365,.2727272727272727,.36363636363636365]),l.radio(ie,3,"Left"),l.radio(ie,4,"Center"),l.radio(ie,5,"Right"),l.row([.36363636363636365,.2727272727272727,.36363636363636365]),l.radio(ie,6,"Bot-Left"),l.radio(ie,7,"Bottom"),l.radio(ie,8,"Bot-Right"),w.anchor=ie.position,l.unindent()}var ne=At.global.nest(27,{selected:!1});if(l.panel(ne,"Script")){l.indent();var re=At.global.nest(28,null).nest(b,{text:w.event});w.event=l.textInput(re,"Event",2),l.unindent()}var se=At.global.nest(29,{selected:!1});l.panel(se,"Timeline")}}if(l.tab(r,"Themes")){for(var ae=At.global.nest(30,null),oe=At.global.nest(31,null),le=function(e,t){if(ot.selectedTheme==t&&(l.g.set_color(-14656100),l.g.fillRect(0,l._y,l._windowW,l.t.ELEMENT_H*l.ops.scaleFactor),l.g.set_color(-1)),t==Ei.getTheme(u.theme)){var i=(l.t.BUTTON_H-16)/2;l.g.drawSubImage(gt.images.icons,l._x+i,l._y+i,0,0,16,16)}l.getStarted()&&!l.inputDownR&&(ot.selectedTheme=t),l._x+=16,l.text(t.NAME),l._x-=16},ue=0,he=Ei.themes;ue<he.length;){var ce=he[ue];++ue,le(At.global.nest(32,null),ce)}if(l.row([.25,.25,.25,.25]),l.button("Add")){var Ae=rt.copy(Ci.light);Ae.NAME=ht.unique("New Theme",Ei.themes,"NAME"),Ei.themes.push(Ae),ot.selectedTheme=Ae}if(null==ot.selectedTheme&&(l.enabled=!1),l.button("Copy")){var de=rt.copy(ot.selectedTheme);de.NAME=ht.unique(de.NAME,Ei.themes,"NAME"),Ei.themes.push(de),ot.selectedTheme=de}l.enabled=!0,null==ot.selectedTheme&&(l.enabled=!1);var _e=oe.nest(Ei.themes.indexOf(ot.selectedTheme));if(l.button("Rename")&&(_e.text=ot.selectedTheme.NAME,Ii.showCustom(new Li(l.ops),function(e){e.textInput(_e),e.button("OK")&&(Ii.show=!1,dt.hwin.redraws=2)},0|l.inputX,0|l.inputY,200,60)),null!=ot.selectedTheme){var fe=ot.selectedTheme.NAME;_e.changed&&ot.selectedTheme.NAME!=_e.text&&(fe=ht.unique(_e.text,Ei.themes,"NAME"),u.theme==ot.selectedTheme.NAME&&(u.theme=fe),ot.selectedTheme.NAME=fe)}if(l.enabled=!0,1!=Ei.themes.length&&null!=ot.selectedTheme||(l.enabled=!1),l.button("Delete")&&(ae.unnest(Ei.themes.indexOf(ot.selectedTheme)),oe.unnest(Ei.themes.indexOf(ot.selectedTheme)),it.remove(Ei.themes,ot.selectedTheme),null==Ei.getTheme(u.theme)&&(u.theme=Ei.themes[0].NAME),ot.selectedTheme=null),l.enabled=!0,null==ot.selectedTheme&&(l.enabled=!1),l.button("Apply to Canvas")&&(u.theme=ot.selectedTheme.NAME),l.enabled=!0,null==ot.selectedTheme)l.text("Please select a Theme!");else for(var ge=[["Text","TEXT_COL"],["Elements","BUTTON_COL","BUTTON_TEXT_COL","BUTTON_HOVER_COL","BUTTON_PRESSED_COL","ACCENT_COL","ACCENT_HOVER_COL","ACCENT_SELECT_COL"]],pe=0,me=ge.length;pe<me;){var ve=pe++,we=At.global.nest(33,null).nest(ve,{selected:!0});if(l.panel(we,ge[ve][0])){l.indent();for(var be=ge[ve].slice(1),ye=0,xe=be.length;ye<xe;){var Te=ye++,Se=be[Te];l.row([.6666666666666666,.3333333333333333]),l.text(Se);var Ee=rt.getProperty(ot.selectedTheme,Se),Be=ae.nest(Ei.themes.indexOf(ot.selectedTheme)).nest(ve).nest(Te,{color:Ee}),ke=Bi.colorField(l,Be,!0);rt.setProperty(ot.selectedTheme,Se,ke)}l.unindent()}}}if(l.tab(r,"Assets"))if(l.button("Import Asset")&&(ot.showFiles=!0,ot.foldersOnly=!1,ot.filesDone=function(e){e=ut.rtrim(e),e=lt.toRelative(e,nt.cwd),at.importAsset(u,e)}),0<u.assets.length){l.text("(Drag and drop assets to canvas)",1);var Ie=At.global.nest(34,{selected:!0});if(l.panel(Ie,"Imported Assets")){l.indent();for(var Ce=u.assets.length-1;0<=Ce;){var Le,Ne=u.assets[Ce];if("ttf"!=_t.extension(Ne.name).toLowerCase()){var Fe=at.getImage(Ne);Le=1==l.image(Fe)}else Le=!1;if(Le)ot.dragAsset=Ne;else if("ttf"==_t.extension(Ne.name).toLowerCase()){var Pe=l.ops.font,Me=l.fontSize;l.ops.font=at.getFont(Ne),l.fontSize=32*l.ops.scaleFactor|0,l.text(Ne.name),l.ops.font=Pe,l.fontSize=Me}l.row([.875,.125]);var Re=At.global.nest(35,null).nest(Ne.id,{text:Ne.name});Ne.name=l.textInput(Re,"",2),ot.assetNames[Ce+1]=Ne.name,l.button("X")&&(at.getImage(Ne).unload(),u.assets.splice(Ce,1),ot.assetNames.splice(Ce+1,1)),--Ce}l.unindent()}}else l.text("(Drag and drop images and fonts here)",1);if(l.tab(r,"Preferences")){var Oe=At.global.nest(36,{selected:!0});if(l.panel(Oe,"Application")){l.indent();var Ve=At.global.nest(37,{value:1});l.slider(Ve,"UI Scale",.5,4,!0),Ve.changed&&!l.inputDown&&(l.setScale(Ve.value),ot.windowW=ot.defaultWindowW*Ve.value|0);var De=At.global.nest(38,{selected:!0});nt.prefs.window_vsync=l.check(De,"VSync"),l.unindent()}var Ue=At.global.nest(39,{selected:!0});if(l.panel(Ue,"Grid")){l.indent();var He=At.global.nest(40,{value:20});l.slider(He,"Grid Size",1,128,!0,1);var We=At.global.nest(41,{selected:!0});ot.gridSnapPos=l.check(We,"Grid Snap Position"),l.isHovered&&l.tooltip("Snap the element's position to the grid");var Ge=At.global.nest(42,{selected:!1});ot.gridSnapBounds=l.check(Ge,"Grid Snap Bounds"),l.isHovered&&l.tooltip("Snap the element's bounds to the grid");var ze=At.global.nest(43,{selected:!0});ot.gridUseRelative=l.check(ze,"Use Relative Grid"),l.isHovered&&l.tooltip("Use a grid that's relative to the selected element"),He.changed&&!l.inputDown&&(ot.gridSize=0|He.value);var Xe=At.global.nest(44,{selected:!1});ot.useRotationSteps=l.check(Xe,"Use Fixed Rotation Steps"),l.isHovered&&l.tooltip("Rotate elements by a fixed step size");var Ye=At.global.nest(45,{value:15});ot.useRotationSteps&&l.slider(Ye,"Rotation Step Size",1,180,!0,1),Ye.changed&&!l.inputDown&&(ot.rotationSteps=.0174532924*Ye.value),l.unindent()}var Ke=At.global.nest(46,{selected:!0});if(l.panel(Ke,"Shortcuts")){l.indent(),l.row([.5,.5]),l.text("Select");var Qe=At.global.nest(47,{position:0});l.combo(Qe,["Left Click","Right Click"],""),l.isHovered&&l.tooltip("Mouse button used for element selection."),Qe.changed&&(nt.prefs.keyMap.selectMouseButton=["Left","Right"][Qe.position]),l.separator(8,!1),l.row([.5,.5]),l.text("Grab");var qe=At.global.nest(48,{value:71});nt.prefs.keyMap.grabKey=Bi.keyInput(l,qe,"Key"),l.isHovered&&l.tooltip("Key used for grabbing elements"),l.row([.5,.5]),l.text("Rotate");var je=At.global.nest(49,{value:82});nt.prefs.keyMap.rotateKey=Bi.keyInput(l,je,"Key"),l.isHovered&&l.tooltip("Key used for rotating elements"),l.row([.5,.5]),l.text("Size");var Ze=At.global.nest(50,{value:83});nt.prefs.keyMap.sizeKey=Bi.keyInput(l,Ze,"Key"),l.isHovered&&l.tooltip("Key used for resizing elements"),l.separator(8,!1),l.row([.5,.5]),l.text("Precision Transform");var Je=At.global.nest(51,{value:16});nt.prefs.keyMap.slowMovement=Bi.keyInput(l,Je,"Key"),l.isHovered&&l.tooltip("More precise transformations"),l.row([.5,.5]),l.text("Invert Grid");var $e=At.global.nest(52,{value:17});nt.prefs.keyMap.gridInvert=Bi.keyInput(l,$e,"Key"),l.isHovered&&l.tooltip("Invert the grid setting"),l.row([.5,.5]),l.text("Invert Rel. Grid");var et=At.global.nest(53,{value:18});nt.prefs.keyMap.gridInvertRelative=Bi.keyInput(l,et,"Key"),l.isHovered&&l.tooltip("Invert the relative grid setting"),l.unindent()}var tt=At.global.nest(54,{selected:!1});l.panel(tt,"Console")&&(l.indent(),l.text("Mouse X: "+l.inputX),l.text("Mouse Y: "+l.inputY),l.unindent())}}};var p=function(){};(x["arm2d.ui.UIToolBar"]=p).__name__=!0,p.renderToolbar=function(e,t,i,n){e.window(At.global.nest(55,null),0,0,n,pt.windowHeight())&&(e.text("Add Elements:"),e.panel(At.global.nest(56,{selected:!0}),"Basic")&&(e.indent(),e.button("Empty")&&(ot.selectedElem=ht.makeElem(t,i,3)),e.isHovered&&e.tooltip("Creates empty element"),e.button("Text")&&(ot.selectedElem=ht.makeElem(t,i,0)),e.isHovered&&e.tooltip("Create text element"),e.button("Image")&&(ot.selectedElem=ht.makeElem(t,i,1)),e.isHovered&&e.tooltip("Creates image element"),e.unindent()),e.panel(At.global.nest(57,{selected:!0}),"Buttons")&&(e.indent(),e.button("Button")&&(ot.selectedElem=ht.makeElem(t,i,2)),e.isHovered&&e.tooltip("Creates button element"),e.button("Check")&&(ot.selectedElem=ht.makeElem(t,i,6)),e.isHovered&&e.tooltip("Creates check box element"),e.button("Radio")&&(ot.selectedElem=ht.makeElem(t,i,7)),e.isHovered&&e.tooltip("Creates inline-radio element"),e.unindent()),e.panel(At.global.nest(58,{selected:!0}),"Inputs")&&(e.indent(),e.button("Text Input")&&(ot.selectedElem=ht.makeElem(t,i,10)),e.isHovered&&e.tooltip("Creates text input element"),e.button("Key Input")&&(ot.selectedElem=ht.makeElem(t,i,11)),e.isHovered&&e.tooltip("Creates key input element"),e.button("Combo Box")&&(ot.selectedElem=ht.makeElem(t,i,8)),e.isHovered&&e.tooltip("Creates combo box element"),e.button("Slider")&&(ot.selectedElem=ht.makeElem(t,i,9)),e.isHovered&&e.tooltip("Creates slider element"),e.unindent()),e.panel(At.global.nest(59,{selected:!0}),"Shapes")&&(e.indent(),e.button("Rect")&&(ot.selectedElem=ht.makeElem(t,i,13)),e.isHovered&&e.tooltip("Creates rectangle shaped element"),e.button("Fill Rect")&&(ot.selectedElem=ht.makeElem(t,i,12)),e.isHovered&&e.tooltip("Creates filled rectangle shaped element"),e.button("Circle")&&(ot.selectedElem=ht.makeElem(t,i,15)),e.isHovered&&e.tooltip("Creates circle shaped element"),e.button("Fill Circle")&&(ot.selectedElem=ht.makeElem(t,i,14)),e.isHovered&&e.tooltip("Creates filled circle shaped element"),e.button("Triangle")&&(ot.selectedElem=ht.makeElem(t,i,17)),e.isHovered&&e.tooltip("Creates triangle shaped element"),e.button("Fill Triangle")&&(ot.selectedElem=ht.makeElem(t,i,16)),e.isHovered&&e.tooltip("Creates filled triangle shaped element"),e.unindent()),e.panel(At.global.nest(60,{selected:!0}),"ProgressBars")&&(e.indent(),e.button("RectPB")&&(ot.selectedElem=ht.makeElem(t,i,18)),e.isHovered&&e.tooltip("Creates rectangular progress bar"),e.button("CircularPB")&&(ot.selectedElem=ht.makeElem(t,i,19)),e.isHovered&&e.tooltip("Creates circular progress bar"),e.unindent()))};function s(){}(x["haxe.IMap"]=s).__name__=!0,s.__isInterface__=!0;function L(){}(x["haxe.Log"]=L).__name__=!0,L.formatOutput=function(e,t){var i=st.string(e);if(null==t)return i;var n=t.fileName+":"+t.lineNumber;if(null!=t.customParams)for(var r=0,s=t.customParams;r<s.length;){var a=s[r];++r,i+=", "+st.string(a)}return n+": "+i},L.trace=function(e,t){var i=L.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(i)};function a(){}(x["haxe._Unserializer.DefaultResolver"]=a).__name__=!0,a.prototype={resolveClass:function(e){return x[e]},resolveEnum:function(e){return f[e]},__class__:a};var J=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=J.DEFAULT_RESOLVER;null==t&&(t=new a,J.DEFAULT_RESOLVER=t),this.resolver=t};(x["haxe.Unserializer"]=J).__name__=!0,J.initCodes=function(){for(var e=[],t=0,i=J.BASE64.length;t<i;){var n=t++;e[J.BASE64.charCodeAt(n)]=n}return e},J.run=function(e){return new J(e).unserialize()},J.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var e=0,t=!1,i=this.pos;;){var n=this.buf.charCodeAt(this.pos);if(n!=n)break;if(45!=n){if(n<48||57<n)break;e=10*e+(n-48),this.pos++}else{if(this.pos!=i)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(43<=t&&t<58||101==t||69==t))break;this.pos++}return parseFloat(it.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new ft("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new ft("Invalid object key");var i=this.unserialize();e[t]=i}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw new ft("Invalid enum format");var i=this.readDigits();if(0==i)return T.createEnum(e,t);for(var n=[];0<i--;)n.push(this.unserialize());return T.createEnum(e,t,n)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize(),t=this.resolver.resolveClass(e);if(null==t)throw new ft("Class not found "+e);return t;case 66:var i=this.unserialize(),n=this.resolver.resolveEnum(i);if(null==n)throw new ft("Enum not found "+i);return n;case 67:var r=this.unserialize(),s=this.resolver.resolveClass(r);if(null==s)throw new ft("Class not found "+r);var a=Object.create(s.prototype);if(this.cache.push(a),a.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new ft("Invalid custom data");return a;case 77:var o=new te;this.cache.push(o);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var l=this.unserialize();o.set(l,this.unserialize())}return this.pos++,o;case 82:var u=this.readDigits();if(u<0||u>=this.scache.length)throw new ft("Invalid string reference");return this.scache[u];case 97:this.buf;var h=[];for(this.cache.push(h);;){var c=this.buf.charCodeAt(this.pos);if(104==c){this.pos++;break}if(117==c){this.pos++;var A=this.readDigits();h[h.length+A-1]=null}else h.push(this.unserialize())}return h;case 98:var d=new ie;this.cache.push(d);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var _=this.unserialize(),f=this.unserialize();null!=Di[_]?d.setReserved(_,f):d.h[_]=f}return this.pos++,d;case 99:var g=this.unserialize(),p=this.resolver.resolveClass(g);if(null==p)throw new ft("Class not found "+g);var m=Object.create(p.prototype);return this.cache.push(m),this.unserializeObject(m),m;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var v=this.unserialize(),w=this.resolver.resolveEnum(v);if(null==w)throw new ft("Enum not found "+v);this.pos++;var b=this.readDigits(),y=w.__constructs__.slice()[b];if(null==y)throw new ft("Unknown enum index "+v+"@"+b);var x=this.unserializeEnum(w,y);return this.cache.push(x),x;case 107:return NaN;case 108:var T=new ee;this.cache.push(T);for(this.buf;104!=this.buf.charCodeAt(this.pos);)T.add(this.unserialize());return this.pos++,T;case 109:return-1/0;case 110:return null;case 111:var S={};return this.cache.push(S),this.unserializeObject(S),S;case 112:return 1/0;case 113:var E=new $;this.cache.push(E);this.buf;for(var B=this.buf.charCodeAt(this.pos++);58==B;){var k=this.readDigits(),I=this.unserialize();E.h[k]=I,B=this.buf.charCodeAt(this.pos++)}if(104!=B)throw new ft("Invalid IntMap format");return E;case 114:var C=this.readDigits();if(C<0||C>=this.cache.length)throw new ft("Invalid reference");return this.cache[C];case 115:var L=this.readDigits(),N=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<L)throw new ft("Invalid bytes length");var F=J.CODES;null==F&&(F=J.initCodes(),J.CODES=F);for(var P=this.pos,M=3&L,R=P+(L-M),O=new he(new ArrayBuffer(3*(L>>2)+(2<=M?M-1:0))),V=0;P<R;){var D=F[N.charCodeAt(P++)],U=F[N.charCodeAt(P++)];O.b[V++]=D<<2|U>>4;var H=F[N.charCodeAt(P++)];O.b[V++]=U<<4|H>>2;var W=F[N.charCodeAt(P++)];O.b[V++]=H<<6|W}if(2<=M){var G=F[N.charCodeAt(P++)],z=F[N.charCodeAt(P++)];if(O.b[V++]=G<<2|z>>4,3==M){var X=F[N.charCodeAt(P++)];O.b[V++]=z<<4|X>>2}}return this.pos+=L,this.cache.push(O),O;case 116:return!0;case 118:var Y;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(Y=it.strDate(it.substr(this.buf,this.pos,19)),this.pos+=19):Y=new Date(this.readFloat()),this.cache.push(Y),Y;case 119:var K=this.unserialize(),Q=this.resolver.resolveEnum(K);if(null==Q)throw new ft("Enum not found "+K);var q=this.unserializeEnum(Q,this.unserialize());return this.cache.push(q),q;case 120:throw ft.wrap(this.unserialize());case 121:var j=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<j)throw new ft("Invalid string length");var Z=it.substr(this.buf,this.pos,j);return this.pos+=j,Z=decodeURIComponent(Z.split("+").join(" ")),this.scache.push(Z),Z;case 122:return 0}throw this.pos--,new ft("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:J};var $=function(){this.h={}};(x["haxe.ds.IntMap"]=$).__name__=!0,$.__interfaces__=[s],$.prototype={h:null,remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return it.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:$};var ee=function(){this.length=0};(x["haxe.ds.List"]=ee).__name__=!0,ee.prototype={h:null,q:null,length:null,add:function(e){var t=new o(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},__class__:ee};var o=function(e,t){this.item=e,this.next=t};(x["haxe.ds._List.ListNode"]=o).__name__=!0,o.prototype={item:null,next:null,__class__:o};var te=function(){this.h={__keys__:{}}};(x["haxe.ds.ObjectMap"]=te).__name__=!0,te.__interfaces__=[s],te.prototype={h:null,set:function(e,t){var i=e.__id__||(e.__id__=n.$haxeUID++);this.h[i]=t,this.h.__keys__[i]=e},__class__:te};var ie=function(){this.h={}};(x["haxe.ds.StringMap"]=ie).__name__=!0,ie.__interfaces__=[s],ie.prototype={h:null,rh:null,setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},__class__:ie};var he=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};(x["haxe.io.Bytes"]=he).__name__=!0,he.ofString=function(e,t){if(t==A.RawNative){for(var i=new Uint8Array(e.length<<1),n=0,r=e.length;n<r;){var s=n++,a=e.charCodeAt(s);i[s<<1]=255&a,i[s<<1|1]=a>>8}return new he(i.buffer)}for(var o=[],l=0;l<e.length;){var u=e.charCodeAt(l++);55296<=u&&u<=56319&&(u=u-55232<<10|1023&e.charCodeAt(l++)),u<=127?o.push(u):(u<=2047?o.push(192|u>>6):(u<=65535?o.push(224|u>>12):(o.push(240|u>>18),o.push(128|u>>12&63)),o.push(128|u>>6&63)),o.push(128|63&u))}return new he(new Uint8Array(o).buffer)},he.ofData=function(e){var t=e.hxBytes;return null!=t?t:new he(e)},he.prototype={length:null,b:null,data:null,blit:function(e,t,i,n){if(e<0||i<0||n<0||e+n>this.length||i+n>t.length)throw new ft(d.OutsideBounds);0==i&&n==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(i,i+n),e)},sub:function(e,t){if(e<0||t<0||e+t>this.length)throw new ft(d.OutsideBounds);return new he(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))},getDouble:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)},getFloat:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)},setDouble:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0)},setFloat:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0)},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0)},getString:function(e,t,i){if(e<0||t<0||e+t>this.length)throw new ft(d.OutsideBounds);null==i&&(i=A.UTF8);var n="",r=this.b,s=e,a=e+t;switch(i._hx_index){case 0:for(;s<a;){var o=r[s++];if(o<128){if(0==o)break;n+=String.fromCodePoint(o)}else if(o<224){var l=(63&o)<<6|127&r[s++];n+=String.fromCodePoint(l)}else if(o<240){var u=(31&o)<<12|(127&r[s++])<<6|127&r[s++];n+=String.fromCodePoint(u)}else{var h=(15&o)<<18|(127&r[s++])<<12|(127&r[s++])<<6|127&r[s++];n+=String.fromCodePoint(h)}}break;case 1:for(;s<a;){var c=r[s++]|r[s++]<<8;n+=String.fromCodePoint(c)}}return n},toString:function(){return this.getString(0,this.length)},__class__:he};function u(){this.pos=0,this.size=0}(x["haxe.io.BytesBuffer"]=u).__name__=!0,u.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(e){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,e)},addBytes:function(e,t,i){if(t<0||i<0||t+i>e.length)throw new ft(d.OutsideBounds);if(this.pos+i>this.size&&this.grow(i),0!=this.size){var n=new Uint8Array(e.b.buffer,e.b.byteOffset+t,i);this.u8.set(n,this.pos),this.pos+=i}},grow:function(e){for(var t=this.pos+e,i=0==this.size?16:this.size;i<t;)i=3*i>>1;var n=new ArrayBuffer(i),r=new Uint8Array(n);0<this.size&&r.set(this.u8),this.size=i,this.buffer=n,this.u8=r,this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new he(new ArrayBuffer(0));var e=new he(this.buffer);return e.length=this.pos,e},__class__:u};function h(){}(x["haxe.io.Input"]=h).__name__=!0,h.prototype={bigEndian:null,readByte:function(){throw new ft("Not implemented")},readBytes:function(e,t,i){var n=i,r=e.b;if(t<0||i<0||t+i>e.length)throw new ft(d.OutsideBounds);try{for(;0<n;)r[t]=this.readByte(),++t,--n}catch(e){var s=e instanceof ft?e.val:e;if(!(s instanceof m))throw e}return i-n},readFullBytes:function(e,t,i){for(;0<i;){var n=this.readBytes(e,t,i);if(0==n)throw new ft(d.Blocked);t+=n,i-=n}},read:function(e){for(var t=new he(new ArrayBuffer(e)),i=0;0<e;){var n=this.readBytes(t,i,e);if(0==n)throw new ft(d.Blocked);i+=n,e-=n}return t},readInt32:function(){var e=this.readByte(),t=this.readByte(),i=this.readByte(),n=this.readByte();return this.bigEndian?n|i<<8|t<<16|e<<24:e|t<<8|i<<16|n<<24},readString:function(e,t){var i=new he(new ArrayBuffer(e));return this.readFullBytes(i,0,e),i.getString(0,e,t)},__class__:h};function ce(e,t,i){if(null==t&&(t=0),null==i&&(i=e.length-t),t<0||i<0||t+i>e.length)throw new ft(d.OutsideBounds);this.b=e.b,this.pos=t,this.len=i,this.totlen=i}(x["haxe.io.BytesInput"]=ce).__name__=!0,ce.__super__=h,ce.prototype=r(h.prototype,{b:null,pos:null,len:null,totlen:null,set_position:function(e){return e<0?e=0:e>this.totlen&&(e=this.totlen),this.len=this.totlen-e,this.pos=e},readByte:function(){if(0==this.len)throw new ft(new m);return this.len--,this.b[this.pos++]},readBytes:function(e,t,i){if(t<0||i<0||t+i>e.length)throw new ft(d.OutsideBounds);if(0==this.len&&0<i)throw new ft(new m);this.len<i&&(i=this.len);for(var n=this.b,r=e.b,s=0,a=i;s<a;){var o=s++;r[t+o]=n[this.pos+o]}return this.pos+=i,this.len-=i,i},__class__:ce,__properties__:{set_position:"set_position"}});function c(){}(x["haxe.io.Output"]=c).__name__=!0,c.prototype={bigEndian:null,writeByte:function(e){throw new ft("Not implemented")},writeBytes:function(e,t,i){if(t<0||i<0||t+i>e.length)throw new ft(d.OutsideBounds);for(var n=e.b,r=i;0<r;)this.writeByte(n[t]),++t,--r;return i},write:function(e){for(var t=e.length,i=0;0<t;){var n=this.writeBytes(e,i,t);if(0==n)throw new ft(d.Blocked);i+=n,t-=n}},writeFloat:function(e){this.writeInt32(_.floatToI32(e))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},__class__:c};function Ae(){this.b=new u}(x["haxe.io.BytesOutput"]=Ae).__name__=!0,Ae.__super__=c,Ae.prototype=r(c.prototype,{b:null,writeByte:function(e){this.b.addByte(e)},writeBytes:function(e,t,i){return this.b.addBytes(e,t,i),i},getBytes:function(){return this.b.getBytes()},__class__:Ae});var A=f["haxe.io.Encoding"]={__ename__:!0,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:i},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:i}},m=function(){};(x["haxe.io.Eof"]=m).__name__=!0,m.prototype={toString:function(){return"Eof"},__class__:m};var d=f["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:i},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:i},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:i},Custom:((t=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:i}}).__params__=["e"],t)},_=function(){};(x["haxe.io.FPHelper"]=_).__name__=!0,_.floatToI32=function(e){return _.helper.setFloat32(0,e,!0),_.helper.getInt32(0,!0)};var _t=function(e){switch(e){case".":case"..":return this.dir=e,void(this.file="")}var t=e.lastIndexOf("/"),i=e.lastIndexOf("\\");t<i?(this.dir=it.substr(e,0,i),e=it.substr(e,i+1,null),this.backslash=!0):i<t?(this.dir=it.substr(e,0,t),e=it.substr(e,t+1,null)):this.dir=null;var n=e.lastIndexOf(".");-1!=n?(this.ext=it.substr(e,n+1,null),this.file=it.substr(e,0,n)):(this.ext=null,this.file=e)};(x["haxe.io.Path"]=_t).__name__=!0,_t.directory=function(e){var t=new _t(e);return null==t.dir?"":t.dir},_t.extension=function(e){var t=new _t(e);return null==t.ext?"":t.ext},_t.join=function(e){for(var t=[],i=0,n=e;i<n.length;){var r=n[i];++i,null!=r&&""!=r&&t.push(r)}var s=t;if(0==s.length)return"";for(var a=s[0],o=1,l=s.length;o<l;){var u=o++;a=_t.addTrailingSlash(a),a+=s[u]}return _t.normalize(a)},_t.normalize=function(e){if("/"==(e=e.split("\\").join("/")))return"/";for(var t=[],i=0,n=e.split("/");i<n.length;){var r=n[i];++i,".."==r&&0<t.length&&".."!=t[t.length-1]?t.pop():""==r?(0<t.length||47==it.cca(e,0))&&t.push(r):"."!=r&&t.push(r)}for(var s="",a=!1,o=!1,l=0,u=t.join("/");l<u.length;){var h=u,c=l++,A=h.charCodeAt(c);55296<=A&&A<=56319&&(A=A-55232<<10|1023&h.charCodeAt(1+c));65536<=A&&++l;var d=A;switch(d){case 47:if(a){var _=d;a=!1,o&&(s+="/",o=!1),s+=String.fromCodePoint(_)}else o=!0;break;case 58:s+=":",a=!0;break;default:var f=d;a=!1,o&&(s+="/",o=!1),s+=String.fromCodePoint(f)}}return s},_t.addTrailingSlash=function(e){if(0==e.length)return"/";var t=e.lastIndexOf("/"),i=e.lastIndexOf("\\");return t<i?i!=e.length-1?e+"\\":e:t!=e.length-1?e+"/":e},_t.prototype={dir:null,file:null,ext:null,backslash:null,__class__:_t};var ft=function(e){Error.call(this),this.val=e,Error.captureStackTrace&&Error.captureStackTrace(this,ft)};(x["js._Boot.HaxeError"]=ft).__name__=!0,ft.wrap=function(e){return e instanceof Error?e:new ft(e)},ft.__super__=Error,ft.prototype=r(Error.prototype,{val:null,__class__:ft});var g=function(){};(x["js.Boot"]=g).__name__=!0,g.getClass=function(e){if(null==e)return null;if(e instanceof Array)return Array;var t=e.__class__;if(null!=t)return t;var i=g.__nativeClassName(e);return null!=i?g.__resolveNativeClass(i):null},g.__string_rec=function(r,s){if(null==r)return"null";if(5<=s.length)return"<...>";var e=typeof r;switch("function"==e&&(r.__name__||r.__ename__)&&(e="object"),e){case"function":return"<function>";case"object":if(r.__enum__){var t=f[r.__enum__],i=t.__constructs__[r._hx_index],a=t[i];return a.__params__?(s+="\t",i+"("+function(){for(var e=[],t=0,i=a.__params__;t<i.length;){var n=i[t];t+=1,e.push(g.__string_rec(r[n],s))}return e}().join(",")+")"):i}if(r instanceof Array){var n="[";s+="\t";for(var o=0,l=r.length;o<l;){var u=o++;n+=(0<u?",":"")+g.__string_rec(r[u],s)}return n+="]"}var h;try{h=r.toString}catch(e){e instanceof ft&&e.val;return"???"}if(null!=h&&h!=Object.toString&&"function"==typeof h){var c=r.toString();if("[object Object]"!=c)return c}var A="{\n";s+="\t";var d=null!=r.hasOwnProperty,_=null;for(_ in r)d&&!r.hasOwnProperty(_)||"prototype"!=_&&"__class__"!=_&&"__super__"!=_&&"__interfaces__"!=_&&"__properties__"!=_&&(2!=A.length&&(A+=", \n"),A+=s+_+" : "+g.__string_rec(r[_],s));return A+="\n"+(s=s.substring(1))+"}";case"string":return r;default:return String(r)}},g.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;if(Object.prototype.hasOwnProperty.call(e,"__interfaces__"))for(var i=e.__interfaces__,n=0,r=i.length;n<r;){var s=i[n++];if(s==t||g.__interfLoop(s,t))return!0}return g.__interfLoop(e.__super__,t)},g.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array;case Ri:return"boolean"==typeof e;case Pi:return null!=e;case Mi:return"number"==typeof e;case Fi:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(g.__downcastCheck(e,t))return!0}else if("object"==typeof t&&g.__isNativeObj(t)&&e instanceof t)return!0;return t==Oi&&null!=e.__name__?!0:t==Vi&&null!=e.__ename__||null!=e.__enum__&&f[e.__enum__]==t}},g.__downcastCheck=function(e,t){return e instanceof t||!!t.__isInterface__&&g.__interfLoop(g.getClass(e),t)},g.__cast=function(e,t){if(null==e||g.__instanceof(e,t))return e;throw new ft("Cannot cast "+st.string(e)+" to "+st.string(t))},g.__nativeClassName=function(e){var t=g.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},g.__isNativeObj=function(e){return null!=g.__nativeClassName(e)},g.__resolveNativeClass=function(e){return n[e]};function v(){}(x["js.lib._ArrayBuffer.ArrayBufferCompat"]=v).__name__=!0,v.sliceImpl=function(e,t){var i=new Uint8Array(this,e,null==t?null:t-e),n=new Uint8Array(i.byteLength);return n.set(i),n.buffer};function S(){this.names=["color_wheel","icons"],this.iconsDescription={name:"icons",original_height:512,original_width:512,files:["icons.png"],type:"image"},this.iconsName="icons",this.icons=null,this.color_wheelDescription={name:"color_wheel",original_height:270,original_width:360,files:["color_wheel.png"],type:"image"},this.color_wheelName="color_wheel",this.color_wheel=null}(x["kha._Assets.ImageList"]=S).__name__=!0,S.prototype={get:function(e){return rt.field(this,e)},color_wheel:null,color_wheelName:null,color_wheelDescription:null,color_wheelLoad:function(t,e){gt.loadImage("color_wheel",function(e){t()},e,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:126,className:"kha._Assets.ImageList",methodName:"color_wheelLoad"})},color_wheelUnload:function(){this.color_wheel.unload(),this.color_wheel=null},icons:null,iconsName:null,iconsDescription:null,iconsLoad:function(t,e){gt.loadImage("icons",function(e){t()},e,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:126,className:"kha._Assets.ImageList",methodName:"iconsLoad"})},iconsUnload:function(){this.icons.unload(),this.icons=null},names:null,__class__:S};function E(){this.names=[]}(x["kha._Assets.SoundList"]=E).__name__=!0,E.prototype={get:function(e){return rt.field(this,e)},names:null,__class__:E};function B(){this.names=[]}(x["kha._Assets.BlobList"]=B).__name__=!0,B.prototype={get:function(e){return rt.field(this,e)},names:null,__class__:B};function k(){this.names=["font_default"],this.font_defaultDescription={name:"font_default",files:["font_default.ttf"],type:"font"},this.font_defaultName="font_default",this.font_default=null}(x["kha._Assets.FontList"]=k).__name__=!0,k.prototype={get:function(e){return rt.field(this,e)},font_default:null,font_defaultName:null,font_defaultDescription:null,font_defaultLoad:function(t,e){gt.loadFont("font_default",function(e){t()},e,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:138,className:"kha._Assets.FontList",methodName:"font_defaultLoad"})},font_defaultUnload:function(){this.font_default.unload(),this.font_default=null},names:null,__class__:k};function I(){this.names=[]}(x["kha._Assets.VideoList"]=I).__name__=!0,I.prototype={get:function(e){return rt.field(this,e)},names:null,__class__:I};var gt=function(){};(x["kha.Assets"]=gt).__name__=!0,gt.__properties__={get_videoFormats:"get_videoFormats",get_fontFormats:"get_fontFormats",get_soundFormats:"get_soundFormats",get_imageFormats:"get_imageFormats"},gt.loadEverything=function(e,t,r,i){for(var n=[S,E,B,k,I],s=[gt.images,gt.sounds,gt.blobs,gt.fonts,gt.videos],a=0,o=0;o<n.length;){var l=n[o];++o;for(var u=0,h=T.getInstanceFields(l);u<h.length;){var c=h[u];++u,ut.endsWith(c,"Description")&&(a+=1)}}if(0!=a)for(var A=a,d=function(t,i,e){var n=t.name;switch(t.type){case"blob":gt.loadBlob(n,function(e){i()},e,{fileName:"kha/Assets.hx",lineNumber:122,className:"kha.Assets",methodName:"loadEverything"});break;case"font":gt.loadFont(n,function(e){i()},e,{fileName:"kha/Assets.hx",lineNumber:124,className:"kha.Assets",methodName:"loadEverything"});break;case"image":gt.loadImage(n,function(e){i()},e,{fileName:"kha/Assets.hx",lineNumber:113,className:"kha.Assets",methodName:"loadEverything"});break;case"sound":gt.loadSound(n,function(e){null==r||r(t)?e.uncompress(i):i()},e,{fileName:"kha/Assets.hx",lineNumber:115,className:"kha.Assets",methodName:"loadEverything"});break;case"video":gt.loadVideo(n,function(e){i()},e,{fileName:"kha/Assets.hx",lineNumber:126,className:"kha.Assets",methodName:"loadEverything"})}},_=function(){--A,gt.progress=1-A/a,0==A&&e()},f=function(e){gt.reporter(i,{fileName:"kha/Assets.hx",lineNumber:137,className:"kha.Assets",methodName:"loadEverything"})(e),_()},g=0,p=n.length;g<p;)for(var m=g++,v=s[m],w=0,b=T.getInstanceFields(n[m]);w<b.length;){var y=b[w];if(++w,ut.endsWith(y,"Description")){var x=rt.field(v,y);null==t||t(x)?d(x,_,f):_()}}else e()},gt.loadImage=function(t,i,e,n){var r=rt.field(gt.images,t+"Description");U.loadImageFromDescription(r,function(e){gt.images[t]=e,i(e)},gt.reporter(e,n))},gt.loadImageFromPath=function(e,t,i,n,r){var s={files:[e],readable:t};U.loadImageFromDescription(s,i,gt.reporter(n,r))},gt.get_imageFormats=function(){return U.getImageFormats()},gt.loadBlob=function(t,i,e,n){var r=rt.field(gt.blobs,t+"Description");U.loadBlobFromDescription(r,function(e){gt.blobs[t]=e,i(e)},gt.reporter(e,n))},gt.loadBlobFromPath=function(e,t,i,n){var r={files:[e]};U.loadBlobFromDescription(r,t,gt.reporter(i,n))},gt.loadSound=function(t,i,e,n){var r=rt.field(gt.sounds,t+"Description");U.loadSoundFromDescription(r,function(e){gt.sounds[t]=e,i(e)},gt.reporter(e,n))},gt.loadSoundFromPath=function(e,t,i,n){var r={files:[e]};U.loadSoundFromDescription(r,t,gt.reporter(i,n))},gt.get_soundFormats=function(){return U.getSoundFormats()},gt.loadFont=function(t,i,e,n){var r=rt.field(gt.fonts,t+"Description");U.loadFontFromDescription(r,function(e){gt.fonts[t]=e,i(e)},gt.reporter(e,n))},gt.loadFontFromPath=function(e,t,i,n){var r={files:[e]};U.loadFontFromDescription(r,t,gt.reporter(i,n))},gt.get_fontFormats=function(){return["ttf"]},gt.loadVideo=function(t,i,e,n){var r=rt.field(gt.videos,t+"Description");U.loadVideoFromDescription(r,function(e){gt.videos[t]=e,i(e)},gt.reporter(e,n))},gt.loadVideoFromPath=function(e,t,i,n){var r={files:[e]};U.loadVideoFromDescription(r,t,gt.reporter(i,n))},gt.get_videoFormats=function(){return U.getVideoFormats()},gt.reporter=function(e,t){if(null!=e)return e;var i=L.trace,n=t;return function(e){i(e,n)}};function w(){}(x["kha.Canvas"]=w).__name__=!0,w.__isInterface__=!0,w.prototype={get_width:null,get_height:null,get_g1:null,get_g2:null,get_g4:null,width:null,height:null,g1:null,g2:null,g4:null,__class__:w,__properties__:{get_g4:"get_g4",get_g2:"get_g2",get_g1:"get_g1",get_height:"get_height",get_width:"get_width"}};var C={};(x["kha._Color.Color_Impl_"]=C).__name__=!0,C.__properties__={set_value:"set_value",get_value:"get_value",set_A:"set_A",get_A:"get_A",set_B:"set_B",get_B:"get_B",set_G:"set_G",get_G:"get_G",set_R:"set_R",get_R:"get_R",set_Ab:"set_Ab",get_Ab:"get_Ab",set_Bb:"set_Bb",get_Bb:"get_Bb",set_Gb:"set_Gb",get_Gb:"get_Gb",set_Rb:"set_Rb",get_Rb:"get_Rb"},C.fromValue=function(e){return C._new(e)},C.fromBytes=function(e,t,i,n){return null==n&&(n=255),C._new(n<<24|e<<16|t<<8|i)},C.fromFloats=function(e,t,i,n){return null==n&&(n=1),C._new((255*n|0)<<24|(255*e|0)<<16|(255*t|0)<<8|255*i|0)},C.fromString=function(e){if(7!=e.length&&9!=e.length||35!=e.charCodeAt(0))throw new ft("Invalid Color string: '"+e+"'");var t=st.parseInt("0x"+it.substr(e,1,null));return 7==e.length&&(t+=-16777216),C._new(t)},C._new=function(e){return e},C.get_value=function(e){return e},C.set_value=function(e,t){return t},C.get_Rb=function(e){return(16711680&e)>>>16},C.get_Gb=function(e){return(65280&e)>>>8},C.get_Bb=function(e){return 255&e},C.get_Ab=function(e){return e>>>24},C.set_Rb=function(e,t){return t},C.set_Gb=function(e,t){return t},C.set_Bb=function(e,t){return t},C.set_Ab=function(e,t){return t},C.get_R=function(e){return.00392156862745098*((16711680&e)>>>16)},C.get_G=function(e){return.00392156862745098*((65280&e)>>>8)},C.get_B=function(e){return.00392156862745098*(255&e)},C.get_A=function(e){return.00392156862745098*(e>>>24)},C.set_R=function(e,t){return t},C.set_G=function(e,t){return t},C.set_B=function(e,t){return t},C.set_A=function(e,t){return t};var b=function(e,t){this.num=e,this.isPrimary=t};(x["kha.Display"]=b).__name__=!0,b.__properties__={get_all:"get_all",get_primary:"get_primary"},b.init=function(){for(var e=0,t=Krom.displayCount();e<t;){var i=e++;b.displays.push(new b(i,Krom.displayIsPrimary(i)))}},b.get_primary=function(){b.init();for(var e=0,t=b.displays;e<t.length;){var i=t[e];if(++e,i.isPrimary)return i}return null},b.get_all=function(){return b.init(),b.displays},b.prototype={num:null,isPrimary:null,get_available:function(){return!0},get_name:function(){return"Display"},get_x:function(){return Krom.displayX(this.num)},get_y:function(){return Krom.displayY(this.num)},get_width:function(){return Krom.displayWidth(this.num)},get_height:function(){return Krom.displayHeight(this.num)},get_frequency:function(){return 60},get_pixelsPerInch:function(){return Krom.screenDpi()},get_modes:function(){return[]},__class__:b,__properties__:{get_modes:"get_modes",get_pixelsPerInch:"get_pixelsPerInch",get_frequency:"get_frequency",get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x",get_name:"get_name",get_available:"get_available"}};function y(e,t,i,n){this.width=e,this.height=t,this.frequency=i,this.bitsPerPixel=n}(x["kha.DisplayMode"]=y).__name__=!0,y.prototype={width:null,height:null,frequency:null,bitsPerPixel:null,__class__:y};function N(e,t,i){this.bold=e,this.italic=t,this.underlined=i}(x["kha.FontStyle"]=N).__name__=!0,N.prototype={bold:null,italic:null,underlined:null,getBold:function(){return this.bold},getItalic:function(){return this.italic},getUnderlined:function(){return this.underlined},__class__:N};function F(e,t,i,n){this.window=e,this.graphics1=t,this.graphics2=i,this.graphics4=n}(x["kha.Framebuffer"]=F).__name__=!0,F.__interfaces__=[w],F.prototype={window:null,graphics1:null,graphics2:null,graphics4:null,init:function(e,t,i){this.graphics1=e,this.graphics2=t,this.graphics4=i},get_g1:function(){return this.graphics1},get_g2:function(){return this.graphics2},get_g4:function(){return this.graphics4},width:null,get_width:function(){return pt.windowWidth(this.window)},height:null,get_height:function(){return pt.windowHeight(this.window)},__class__:F,__properties__:{get_height:"get_height",get_width:"get_width",get_g4:"get_g4",get_g2:"get_g2",get_g1:"get_g1"}};var P=function(e,t,i,n,r,s){null==s&&(s=1),null==r&&(r=8),null==n&&(n=16),null==i&&(i=32),null==t&&(t=!0),null==e&&(e=60),this.samplesPerPixel=1,this.stencilBufferBits=8,this.depthBufferBits=16,this.colorBufferBits=32,this.verticalSync=!0,this.frequency=60,this.frequency=e,this.verticalSync=t,this.colorBufferBits=i,this.depthBufferBits=n,this.stencilBufferBits=r,this.samplesPerPixel=s};(x["kha.FramebufferOptions"]=P).__name__=!0,P.prototype={frequency:null,verticalSync:null,colorBufferBits:null,depthBufferBits:null,stencilBufferBits:null,samplesPerPixel:null,__class__:P};function M(){}(x["kha.Resource"]=M).__name__=!0,M.__isInterface__=!0,M.prototype={unload:null,__class__:M};var R=function(e){this.pixels=null,this.texture_=e};(x["kha.Image"]=R).__name__=!0,R.__interfaces__=[M,w],R.__properties__={get_nonPow2Supported:"get_nonPow2Supported",get_maxSize:"get_maxSize"},R.getRenderTargetFormat=function(e){switch(e){case 0:return 0;case 1:return 5;case 2:return 3;case 3:return 4;case 4:return 1;case 5:return 2;case 6:return 6;default:return 0}},R.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},R.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},R.getTextureFormat=function(e){switch(e){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;case 6:return 7;default:return 1}},R._fromTexture=function(e){return new R(e)},R.fromBytes=function(e,t,i,n,r){null==n&&(n=0);var s=new R(null);return s.format=n,s.texture_=Krom.createTextureFromBytes(e.b.bufferValue,t,i,R.getTextureFormat(n),!0),s},R.fromBytes3D=function(e,t,i,n,r,s){null==r&&(r=0);var a=new R(null);return a.format=r,a.texture_=Krom.createTextureFromBytes3D(e.b.bufferValue,t,i,n,R.getTextureFormat(r),!0),a},R.fromEncodedBytes=function(e,t,i,n,r){null==r&&(r=!1);var s=new R(null);s.texture_=Krom.createTextureFromEncodedBytes(e.b.bufferValue,t,r),i(s)},R.create=function(e,t,i,n){null==i&&(i=0);var r=new R(null);return r.format=i,r.texture_=Krom.createTexture(e,t,R.getTextureFormat(i)),r},R.create3D=function(e,t,i,n,r){null==n&&(n=0);var s=new R(null);return s.format=n,s.texture_=Krom.createTexture3D(e,t,i,R.getTextureFormat(n)),s},R.createRenderTarget=function(e,t,i,n,r,s){null==s&&(s=0),null==r&&(r=1),null==n&&(n=0),null==i&&(i=0);var a=new R(null);return a.format=i,a.renderTarget_=Krom.createRenderTarget(e,t,R.getDepthBufferBits(n),R.getRenderTargetFormat(i),R.getStencilBufferBits(n),s),a},R.get_maxSize=function(){return 4096},R.get_nonPow2Supported=function(){return!0},R.renderTargetsInvertedY=function(){return Krom.renderTargetsInvertedY()},R.formatByteSize=function(e){switch(e){case 0:return 4;case 1:return 1;case 2:return 16;case 3:return 2;case 4:return 8;case 5:return 4;case 6:return 2;default:return 4}},R.prototype={texture_:null,renderTarget_:null,format:null,readable:null,graphics1:null,graphics2:null,graphics4:null,isOpaque:function(e,t){return!1},at:function(e,t){return-16777216},unload:function(){Krom.unloadImage(this),this.texture_=null,this.renderTarget_=null},lock:function(e){return null==e&&(e=0),he.ofData(Krom.lockTexture(this.texture_,e))},unlock:function(){Krom.unlockTexture(this.texture_)},pixels:null,getPixels:function(){return null!=this.renderTarget_?(null==this.pixels&&(this.pixels=new he(new ArrayBuffer(R.formatByteSize(this.format)*this.get_width()*this.get_height()))),Krom.getRenderTargetPixels(this.renderTarget_,this.pixels.b.bufferValue),this.pixels):he.ofData(Krom.getTexturePixels(this.texture_))},generateMipmaps:function(e){null==this.texture_?Krom.generateRenderTargetMipmaps(this.renderTarget_,e):Krom.generateTextureMipmaps(this.texture_,e)},setMipmaps:function(e){Krom.setMipmaps(this.texture_,e)},setDepthStencilFrom:function(e){Krom.setDepthStencilFrom(this.renderTarget_,e.renderTarget_)},clear:function(e,t,i,n,r,s,a){Krom.clearTexture(this.texture_,e,t,i,n,r,s,a)},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},depth:null,get_depth:function(){return null!=this.texture_?this.texture_.depth:1},realWidth:null,get_realWidth:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.realWidth},realHeight:null,get_realHeight:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.realHeight},g1:null,get_g1:function(){return null==this.graphics1&&(this.graphics1=new qe(this)),this.graphics1},g2:null,get_g2:function(){return null==this.graphics2&&(this.graphics2=new Dt(this)),this.graphics2},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new ai(this)),this.graphics4},__class__:R,__properties__:{get_g4:"get_g4",get_g2:"get_g2",get_g1:"get_g1",get_realHeight:"get_realHeight",get_realWidth:"get_realWidth",get_depth:"get_depth",get_height:"get_height",get_width:"get_width"}};function O(){}(x["kha.AlignedQuad"]=O).__name__=!0,O.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,xadvance:null,__class__:O};function V(e,t,i,n,r,s,a,o){this.mySize=e,this.width=r,this.height=s,this.chars=a,this.baseline=t;for(var l=0;l<a.length;){var u=a[l];++l,u.yoff+=this.baseline}this.texture=R.fromBytes(o.toBytes(),r,s,1)}(x["kha.KravurImage"]=V).__name__=!0,V.prototype={mySize:null,chars:null,texture:null,width:null,height:null,baseline:null,getTexture:function(){return this.texture},getBakedQuad:function(e,t,i,n){if(t>=this.chars.length)return null;var r=1/this.width,s=1/this.height,a=this.chars[t];if(null==a)return null;var o=Math.round(i+a.xoff),l=Math.round(n+a.yoff);return e.x0=o,e.y0=l,e.x1=o+a.x1-a.x0,e.y1=l+a.y1-a.y0,e.s0=a.x0*r,e.t0=a.y0*s,e.s1=a.x1*r,e.t1=a.y1*s,e.xadvance=a.xadvance,e},getCharWidth:function(e){if(0==this.chars.length)return 0;var t=V.charBlocks[0];if(e<t)return this.chars[0].xadvance;for(var i=1,n=V.charBlocks.length/2|0;i<n;){var r=i++,s=V.charBlocks[2*r-1],a=V.charBlocks[2*r];a-1<e&&(t+=a-1-s)}return e-t>=this.chars.length?this.chars[0].xadvance:this.chars[e-t].xadvance},getHeight:function(){return this.mySize},stringWidth:function(e){for(var t=0,i=0,n=e.length;i<n;){var r=i++;t+=this.getCharWidth(it.cca(e,r))}return t},charactersWidth:function(e,t,i){for(var n=0,r=t,s=t+i;r<s;){var a=r++;n+=this.getCharWidth(e[a])}return n},getBaselinePosition:function(){return this.baseline},__class__:V};function D(e){this.images=new $,this.blob=e}(x["kha.Kravur"]=D).__name__=!0,D.__interfaces__=[M],D.fromBytes=function(e){return new D(si.fromBytes(e))},D.prototype={oldGlyphs:null,blob:null,images:null,_get:function(e){var t=Qe.fontGlyphs;if(t!=this.oldGlyphs){this.oldGlyphs=t;for(var i=(V.charBlocks=[t[0]])[0]+1,n=1,r=t.length;n<r;){var s=n++;t[s]!=i?(V.charBlocks.push(t[s-1]),V.charBlocks.push(t[s]),i=t[s]+1):++i}V.charBlocks.push(t[t.length-1])}var a=1e4*e+t.length;if(this.images.h.hasOwnProperty(a))return this.images.h[a];for(var o=64,l=32,u=new Array(t.length),h=0,c=u.length;h<c;){u[h++]=new tt}for(var A=null,d=-1;d<=0;)l<o?l*=2:o*=2,A=si.alloc(o*l),d=It.stbtt_BakeFontBitmap(this.blob,0,e,A,o,l,t,u);var _=new xt;It.stbtt_InitFont(_,this.blob,0);var f=It.stbtt_GetFontVMetrics(_),g=It.stbtt_ScaleForPixelHeight(_,e),p=Math.round(f.ascent*g),m=Math.round(f.descent*g),v=Math.round(f.lineGap*g),w=new V(0|e,p,m,v,o,l,u,A);return this.images.h[a]=w},height:function(e){return this._get(e).getHeight()},width:function(e,t){return this._get(e).stringWidth(t)},widthOfCharacters:function(e,t,i,n){return this._get(e).charactersWidth(t,i,n)},baseline:function(e){return this._get(e).getBaselinePosition()},unload:function(){this.blob=null,this.images=null},__class__:D};var U=function(){};(x["kha.LoaderImpl"]=U).__name__=!0,U.getImageFormats=function(){return["png","jpg"]},U.loadImageFromDescription=function(e,t,i){var n=Object.prototype.hasOwnProperty.call(e,"readable")&&e.readable;t(R._fromTexture(Krom.loadImage(e.files[0],n)))},U.getSoundFormats=function(){return["wav","ogg"]},U.loadSoundFromDescription=function(e,t,i){t(new oi(he.ofData(Krom.loadSound(e.files[0]))))},U.getVideoFormats=function(){return["webm"]},U.loadVideoFromDescription=function(e,t,i){},U.loadBlobFromDescription=function(e,t,i){t(new si(he.ofData(Krom.loadBlob(e.files[0]))))},U.loadFontFromDescription=function(e,t,i){U.loadBlobFromDescription(e,function(e){t(new D(e))},i)};function H(){}(x["kha.TimeTask"]=H).__name__=!0,H.prototype={task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null,__class__:H};function W(e,t,i){this.task=e,this.priority=t,this.id=i,this.active=!0,this.paused=!1}(x["kha.FrameTask"]=W).__name__=!0,W.prototype={task:null,priority:null,id:null,active:null,paused:null,__class__:W};var G=function(){};(x["kha.Scheduler"]=G).__name__=!0,G.init=function(){G.deltas=[];for(var e=0,t=G.DIF_COUNT;e<t;){var i=e++;G.deltas[i]=0}G.stopped=!0,G.frame_tasks_sorted=!0,G.current=G.lastTime=G.realTime(),G.currentFrameTaskId=0,G.currentTimeTaskId=0,G.currentGroupId=0,G.timeTasks=[],G.pausedTimeTasks=[],G.outdatedTimeTasks=[],G.timeTasksScratchpad=[],G.frameTasks=[],G.toDeleteFrame=[]},G.start=function(e){null==e&&(e=!1),G.vsync=j.get(0).get_vSynced();var t=b.get_primary().get_frequency();57<=t&&t<=63&&(t=60),G.onedifhz=1/t,G.stopped=!1,G.resetTime(),G.lastTime=G.realTime()-G.startTime;for(var i=0,n=G.DIF_COUNT;i<n;){var r=i++;G.deltas[r]=0}if(e){for(var s=0,a=G.timeTasks;s<a.length;){var o=a[s];++s,o.paused=!1}for(var l=0,u=G.frameTasks;l<u.length;){var h=u[l];++l,h.paused=!1}}},G.stop=function(){G.stopped=!0},G.isStopped=function(){return G.stopped},G.warpTimeTasksBack=function(e,t){for(var i=0;i<t.length;){var n=t[i];if(++i,n.start>=e)n.next=n.start;else if(0<n.period){var r=e-n.start,s=Math.ceil(r/n.period);n.next=n.start+s*n.period}}},G.warp=function(e){if(e<G.lastTime){G.current=e,G.lastTime=e,G.warpTimeTasksBack(e,G.outdatedTimeTasks),G.warpTimeTasksBack(e,G.timeTasks);for(var t=0,i=G.outdatedTimeTasks;t<i.length;){var n=i[t];++t,n.next>=e&&G.timeTasksScratchpad.push(n)}for(var r=0,s=G.timeTasksScratchpad;r<s.length;){var a=s[r];++r,it.remove(G.outdatedTimeTasks,a)}for(var o=0,l=G.timeTasksScratchpad;o<l.length;){var u=l[o];++o,G.insertSorted(G.timeTasks,u)}for(;0<G.timeTasksScratchpad.length;)it.remove(G.timeTasksScratchpad,G.timeTasksScratchpad[0])}else e>G.lastTime&&(G.startTime-=e-G.lastTime,G.current=e,G.lastTime=e,G.executeTimeTasks(e))},G.executeFrame=function(){var e=G.realTime()-G.startTime-G.lastTime,t=G.current;if(0<=e){if(null==xi.the())if(e>G.maxframetime)G.startTime+=e-G.maxframetime,t+=e=G.maxframetime;else if(G.vsync){for(var i=G.onedifhz;i<e-G.onedifhz;)i+=G.onedifhz;e=i;for(var n=0,r=G.DIF_COUNT-2;n<r;){var s=n++;e+=G.deltas[s],G.deltas[s]=G.deltas[1+s]}e+=G.deltas[G.DIF_COUNT-2],e/=G.DIF_COUNT,G.deltas[G.DIF_COUNT-2]=i,t+=e}else{for(var a=0,o=G.DIF_COUNT-1;a<o;){var l=a++;G.deltas[l]=G.deltas[1+l]}G.deltas[G.DIF_COUNT-1]=e;for(var u=0,h=0,c=G.DIF_COUNT;h<c;){var A=h++;u+=G.deltas[A]}t+=u/=G.DIF_COUNT}else t+=e;G.lastTime=t,G.stopped||(G.current=t);for(var d=0,_=G.pausedTimeTasks;d<_.length;){var f=_[d];++d,f.next+=e}if(G.stopped)for(var g=0,p=G.timeTasks;g<p.length;){var m=p[g];++g,m.next+=e}G.executeTimeTasks(t);for(var v=0,w=G.outdatedTimeTasks;v<w.length;){var b=w[v];++v,b.next<t-10&&G.timeTasksScratchpad.push(b)}for(var y=0,x=G.timeTasksScratchpad;y<x.length;){var T=x[y];++y,it.remove(G.outdatedTimeTasks,T)}for(;0<G.timeTasksScratchpad.length;)it.remove(G.timeTasksScratchpad,G.timeTasksScratchpad[0])}G.sortFrameTasks();for(var S=0,E=G.frameTasks;S<E.length;){var B=E[S];++S,G.stopped||B.paused||!B.active||B.task()||(B.active=!1)}for(var k=0,I=G.frameTasks;k<I.length;){var C=I[k];++k,C.active||G.toDeleteFrame.push(C)}for(;0<G.toDeleteFrame.length;)it.remove(G.frameTasks,G.toDeleteFrame.pop())},G.executeTimeTasks=function(e){for(;0<G.timeTasks.length&&(G.activeTimeTask=G.timeTasks[0],G.activeTimeTask.next<=e);)G.activeTimeTask.next+=G.activeTimeTask.period,it.remove(G.timeTasks,G.activeTimeTask),G.activeTimeTask.active&&G.activeTimeTask.task()?0<G.activeTimeTask.period&&(0==G.activeTimeTask.duration||G.activeTimeTask.duration>=G.activeTimeTask.start+G.activeTimeTask.next)?G.insertSorted(G.timeTasks,G.activeTimeTask):G.archiveTimeTask(G.activeTimeTask,e):(G.activeTimeTask.active=!1,G.archiveTimeTask(G.activeTimeTask,e));G.activeTimeTask=null},G.archiveTimeTask=function(e,t){},G.time=function(){return G.current},G.realTime=function(){return pt.get_time()},G.resetTime=function(){var e=pt.get_time(),t=e-G.startTime;G.startTime=e;for(var i=0,n=G.timeTasks;i<n.length;){var r=n[i];++i,r.start-=t,r.next-=t}for(var s=0,a=G.DIF_COUNT;s<a;){var o=s++;G.deltas[o]=0}G.current=0,G.lastTime=0},G.addBreakableFrameTask=function(e,t){return G.frameTasks.push(new W(e,t,++G.currentFrameTaskId)),G.frame_tasks_sorted=!1,G.currentFrameTaskId},G.addFrameTask=function(e,t){return G.addBreakableFrameTask(function(){return e(),!0},t)},G.pauseFrameTask=function(e,t){for(var i=0,n=G.frameTasks;i<n.length;){var r=n[i];if(++i,r.id==e){r.paused=t;break}}},G.removeFrameTask=function(e){for(var t=0,i=G.frameTasks;t<i.length;){var n=i[t];if(++t,n.id==e){n.active=!1;break}}},G.generateGroupId=function(){return++G.currentGroupId},G.addBreakableTimeTaskToGroup=function(e,t,i,n,r){null==r&&(r=0),null==n&&(n=0);var s=new H;return s.active=!0,s.task=t,s.id=++G.currentTimeTaskId,s.groupId=e,s.start=G.current+i,(s.period=0)!=n&&(s.period=n),(s.duration=0)!=r&&(s.duration=s.start+r),s.next=s.start,G.insertSorted(G.timeTasks,s),s.id},G.addTimeTaskToGroup=function(e,t,i,n,r){return null==r&&(r=0),null==n&&(n=0),G.addBreakableTimeTaskToGroup(e,function(){return t(),!0},i,n,r)},G.addBreakableTimeTask=function(e,t,i,n){return null==n&&(n=0),null==i&&(i=0),G.addBreakableTimeTaskToGroup(0,e,t,i,n)},G.addTimeTask=function(e,t,i,n){return null==n&&(n=0),null==i&&(i=0),G.addTimeTaskToGroup(0,e,t,i,n)},G.getTimeTask=function(e){if(null!=G.activeTimeTask&&G.activeTimeTask.id==e)return G.activeTimeTask;for(var t=0,i=G.timeTasks;t<i.length;){var n=i[t];if(++t,n.id==e)return n}for(var r=0,s=G.pausedTimeTasks;r<s.length;){var a=s[r];if(++r,a.id==e)return a}return null},G.pauseTimeTask=function(e,t){var i=G.getTimeTask(e);null!=i&&G.pauseRunningTimeTask(i,t),null!=G.activeTimeTask&&G.activeTimeTask.id==e&&(G.activeTimeTask.paused=t)},G.pauseRunningTimeTask=function(e,t){(e.paused=t)?(it.remove(G.timeTasks,e),G.pausedTimeTasks.push(e)):(G.insertSorted(G.timeTasks,e),it.remove(G.pausedTimeTasks,e))},G.pauseTimeTasks=function(e,t){for(var i=0,n=G.timeTasks;i<n.length;){var r=n[i];++i,r.groupId==e&&G.pauseRunningTimeTask(r,t)}null!=G.activeTimeTask&&G.activeTimeTask.groupId==e&&(G.activeTimeTask.paused=t)},G.removeTimeTask=function(e){var t=G.getTimeTask(e);null!=t&&(t.active=!1,it.remove(G.timeTasks,t))},G.removeTimeTasks=function(e){for(var t=0,i=G.timeTasks;t<i.length;){var n=i[t];++t,n.groupId==e&&(n.active=!1,G.timeTasksScratchpad.push(n))}for(var r=0,s=G.timeTasksScratchpad;r<s.length;){var a=s[r];++r,it.remove(G.timeTasks,a)}for(;0<G.timeTasksScratchpad.length;)it.remove(G.timeTasksScratchpad,G.timeTasksScratchpad[0]);null!=G.activeTimeTask&&G.activeTimeTask.groupId==e&&(G.activeTimeTask.active=!1)},G.numTasksInSchedule=function(){return G.timeTasks.length+G.frameTasks.length},G.insertSorted=function(e,t){for(var i=0,n=e.length;i<n;){var r=i++;if(e[r].next>t.next)return void e.splice(r,0,t)}e.push(t)},G.sortFrameTasks=function(){G.frame_tasks_sorted||(G.frameTasks.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),G.frame_tasks_sorted=!0)};function z(){}(x["kha.Shaders"]=z).__name__=!0,z.init=function(){var e=[],t=rt.field(z,"painter_colored_fragData0"),i=J.run(t);e.push(si.fromBytes(i)),z.painter_colored_frag=new Nt(e,["painter-colored.frag.d3d11"]);var n=[],r=rt.field(z,"painter_colored_vertData0"),s=J.run(r);n.push(si.fromBytes(s)),z.painter_colored_vert=new qt(n,["painter-colored.vert.d3d11"]);var a=[],o=rt.field(z,"painter_image_fragData0"),l=J.run(o);a.push(si.fromBytes(l)),z.painter_image_frag=new Nt(a,["painter-image.frag.d3d11"]);var u=[],h=rt.field(z,"painter_image_vertData0"),c=J.run(h);u.push(si.fromBytes(c)),z.painter_image_vert=new qt(u,["painter-image.vert.d3d11"]);var A=[],d=rt.field(z,"painter_text_fragData0"),_=J.run(d);A.push(si.fromBytes(_)),z.painter_text_frag=new Nt(A,["painter-text.frag.d3d11"]);var f=[],g=rt.field(z,"painter_text_vertData0"),p=J.run(g);f.push(si.fromBytes(p)),z.painter_text_vert=new qt(f,["painter-text.vert.d3d11"]);var m=[],v=rt.field(z,"painter_video_fragData0"),w=J.run(v);m.push(si.fromBytes(w)),z.painter_video_frag=new Nt(m,["painter-video.frag.d3d11"]);var b=[],y=rt.field(z,"painter_video_vertData0"),x=J.run(y);b.push(si.fromBytes(x)),z.painter_video_vert=new qt(b,["painter-video.vert.d3d11"])};function Y(){this.sampleRate=0,this.channels=0,this.length=0}(x["kha.Sound"]=Y).__name__=!0,Y.__interfaces__=[M],Y.prototype={compressedData:null,uncompressedData:null,length:null,channels:null,sampleRate:null,uncompress:function(e){if(null==this.uncompressedData){var t=new Ae,i=ye.readAll(this.compressedData,t,!0),n=t.getBytes(),r=n.length/4|0;if(1==i.channel){this.length=r/de.samplesPerSecond;var s=new Float32Array(2*r);this.uncompressedData=s;for(var a=0,o=r;a<o;){var l=a++;this.uncompressedData[2*l]=n.getFloat(4*l),this.uncompressedData[2*l+1]=n.getFloat(4*l)}}else{this.length=r/2/de.samplesPerSecond;var u=new Float32Array(r);this.uncompressedData=u;for(var h=0,c=r;h<c;){var A=h++;this.uncompressedData[A]=n.getFloat(4*A)}}this.channels=i.channel,this.sampleRate=i.sampleRate,this.compressedData=null,e()}else e()},unload:function(){this.compressedData=null,this.uncompressedData=null},__class__:Y};var K=function(e,t,i,n,r){null==i&&(i=-1),null==t&&(t=-1),null==e&&(e="Kha"),this.framebuffer=null,this.window=null,this.height=-1,this.width=-1,this.title="Kha",this.title=e,this.window=null==n?new ne(null,null,null,null,null,null,null,null,null):n,0<t?(this.window.width=t,this.width=t):this.width=this.window.width,0<i?(this.window.height=i,this.height=i):this.height=this.window.height,null==this.window.title&&(this.window.title=e),this.framebuffer=null==r?new P(null,null,null,null,null,null):r};(x["kha.SystemOptions"]=K).__name__=!0,K.prototype={title:null,width:null,height:null,window:null,framebuffer:null,__class__:K};var pt=function(){};(x["kha.System"]=pt).__name__=!0,pt.__properties__={get_refreshRate:"get_refreshRate",get_vsync:"get_vsync",get_language:"get_language",get_systemId:"get_systemId",get_screenRotation:"get_screenRotation",get_time:"get_time",get_title:"get_title"},pt.init=function(e,t){var i=0;e.resizable&&(i|=1),e.maximizable&&(i|=4),e.minimizable&&(i|=2);var n=new K(e.title,e.width,e.height,new ne(null,null,null,null,null,null,null,i,e.windowMode),new P(null,e.vSync,null,null,null,e.samplesPerPixel));pt.start(n,function(e){t()})},pt.start=function(e,t){pt.theTitle=e.title,Q.init(e,t)},pt.get_title=function(){return pt.theTitle},pt.notifyOnRender=function(t,i){null==i&&(i=0),pt.renderListeners.push(function(e){i<e.length&&t(e[i])})},pt.notifyOnFrames=function(e){pt.renderListeners.push(e)},pt.removeFramesListener=function(e){it.remove(pt.renderListeners,e)},pt.notifyOnApplicationState=function(e,t,i,n,r){null!=e&&pt.foregroundListeners.push(e),null!=t&&pt.resumeListeners.push(t),null!=i&&pt.pauseListeners.push(i),null!=n&&pt.backgroundListeners.push(n),null!=r&&pt.shutdownListeners.push(r)},pt.notifyOnDropFiles=function(e){pt.dropFilesListeners.push(e)},pt.removeDropListerer=function(e){it.remove(pt.dropFilesListeners,e)},pt.notifyOnCutCopyPaste=function(e,t,i){pt.cutListener=e,pt.copyListener=t,pt.pasteListener=i},pt.notifyOnLoginLogout=function(e,t){pt.loginListener=e,pt.logoutListener=t},pt.login=function(){Q.login()},pt.render=function(e){for(var t=0,i=pt.renderListeners;t<i.length;){var n=i[t];++t,n(e)}},pt.foreground=function(){for(var e=0,t=pt.foregroundListeners;e<t.length;){var i=t[e];++e,i()}},pt.resume=function(){for(var e=0,t=pt.resumeListeners;e<t.length;){var i=t[e];++e,i()}},pt.pause=function(){for(var e=0,t=pt.pauseListeners;e<t.length;){var i=t[e];++e,i()}},pt.background=function(){for(var e=0,t=pt.backgroundListeners;e<t.length;){var i=t[e];++e,i()}},pt.shutdown=function(){for(var e=0,t=pt.shutdownListeners;e<t.length;){var i=t[e];++e,i()}},pt.dropFiles=function(e){for(var t=0,i=pt.dropFilesListeners;t<i.length;){var n=i[t];++t,n(e)}},pt.get_time=function(){return Q.getTime()},pt.windowWidth=function(e){return null==e&&(e=0),j.get(e).get_width()},pt.windowHeight=function(e){return null==e&&(e=0),j.get_all()[e].get_height()},pt.get_screenRotation=function(){return 0},pt.get_systemId=function(){return Q.getSystemId()},pt.vibrate=function(e){Q.vibrate(e)},pt.get_language=function(){return Q.getLanguage()},pt.stop=function(){return Q.requestShutdown()},pt.loadUrl=function(e){Q.loadUrl(e)},pt.canSwitchFullscreen=function(){return!0},pt.isFullscreen=function(){return 1==j.get(0).get_mode()||2==j.get(0).get_mode()},pt.requestFullscreen=function(){j.get(0).set_mode(1)},pt.exitFullscreen=function(){j.get(0).set_mode(0)},pt.notifyOnFullscreenChange=function(e,t){},pt.removeFullscreenListener=function(e,t){},pt.changeResolution=function(e,t){},pt.requestShutdown=function(){pt.stop()},pt.get_vsync=function(){return j.get(0).get_vSynced()},pt.get_refreshRate=function(){return b.get_primary().get_frequency()},pt.screenDpi=function(){return b.get_primary().get_pixelsPerInch()},pt.safeZone=function(){return Q.safeZone()},pt.automaticSafeZone=function(){return Q.automaticSafeZone()},pt.setSafeZone=function(e){Q.setSafeZone(e)},pt.unlockAchievement=function(e){Q.unlockAchievement(e)};var Q=function(){};(x["kha.SystemImpl"]=Q).__name__=!0,Q.renderCallback=function(){G.executeFrame(),pt.render([Q.framebuffer])},Q.dropFilesCallback=function(e){pt.dropFiles(e)},Q.copyCallback=function(){return null!=pt.copyListener?pt.copyListener():null},Q.cutCallback=function(){return null!=pt.cutListener?pt.cutListener():null},Q.pasteCallback=function(e){null!=pt.pasteListener&&pt.pasteListener(e)},Q.foregroundCallback=function(){pt.foreground()},Q.resumeCallback=function(){pt.resume()},Q.pauseCallback=function(){pt.pause()},Q.backgroundCallback=function(){pt.background()},Q.shutdownCallback=function(){pt.shutdown()},Q.keyboardDownCallback=function(e){Q.keyboard.sendDownEvent(e)},Q.keyboardUpCallback=function(e){Q.keyboard.sendUpEvent(e)},Q.keyboardPressCallback=function(e){Q.keyboard.sendPressEvent(String.fromCodePoint(e))},Q.mouseDownCallback=function(e,t,i){Q.mouse.sendDownEvent(0,e,t,i)},Q.mouseUpCallback=function(e,t,i){Q.mouse.sendUpEvent(0,e,t,i)},Q.mouseMoveCallback=function(e,t,i,n){Q.mouse.sendMoveEvent(0,e,t,i,n)},Q.mouseWheelCallback=function(e){Q.mouse.sendWheelEvent(0,e)},Q.penDownCallback=function(e,t,i){Q.pen.sendDownEvent(0,e,t,i)},Q.penUpCallback=function(e,t,i){Q.pen.sendUpEvent(0,e,t,i)},Q.penMoveCallback=function(e,t,i){Q.pen.sendMoveEvent(0,e,t,i)},Q.gamepadAxisCallback=function(e,t,i){Q.gamepads[e].sendAxisEvent(t,i)},Q.gamepadButtonCallback=function(e,t,i){Q.gamepads[e].sendButtonEvent(t,i)},Q.audioCallback=function(e){de._callCallback(e);var t=de.buffer;Krom.writeAudioBuffer(t.data.buffer,e)},Q.init=function(e,t){Krom.init(e.title,e.width,e.height,e.framebuffer.samplesPerPixel,e.framebuffer.verticalSync,e.window.mode,e.window.windowFeatures,3),Q.start=Krom.getTime(),L.trace=function(e,t){var i=null!=t?t.className+":"+t.lineNumber+": "+st.string(e):st.string(e);Krom.log(it.substr(i,0,511))},new j(0),G.init(),z.init();var i=new ai;Q.framebuffer=new F(0,null,null,i),Q.framebuffer.init(new qe(Q.framebuffer),new Dt(Q.framebuffer),i),Krom.setCallback(Q.renderCallback),Krom.setDropFilesCallback(Q.dropFilesCallback),Krom.setCutCopyPasteCallback(Q.cutCallback,Q.copyCallback,Q.pasteCallback),Krom.setApplicationStateCallback(Q.foregroundCallback,Q.resumeCallback,Q.pauseCallback,Q.backgroundCallback,Q.shutdownCallback),Q.keyboard=new ei,Q.mouse=new ii,Q.pen=new ni,Q.gamepads=[];for(var n=0,r=Q.maxGamepads;n<r;){var s=n++;Q.gamepads[s]=new Zt(s)}Krom.setKeyboardDownCallback(Q.keyboardDownCallback),Krom.setKeyboardUpCallback(Q.keyboardUpCallback),Krom.setKeyboardPressCallback(Q.keyboardPressCallback),Krom.setMouseDownCallback(Q.mouseDownCallback),Krom.setMouseUpCallback(Q.mouseUpCallback),Krom.setMouseMoveCallback(Q.mouseMoveCallback),Krom.setMouseWheelCallback(Q.mouseWheelCallback),Krom.setPenDownCallback(Q.penDownCallback),Krom.setPenUpCallback(Q.penUpCallback),Krom.setPenMoveCallback(Q.penMoveCallback),Krom.setGamepadAxisCallback(Q.gamepadAxisCallback),Krom.setGamepadButtonCallback(Q.gamepadButtonCallback),de._init(),_e._init(),Krom.setAudioCallback(Q.audioCallback),G.start(),t(j.get(0))},Q.initEx=function(e,t,i,n){},Q.translateWindowMode=function(e){if(null==e)return 0;switch(e){case 0:return 0;case 1:return 1;case 2:return 2}},Q.getScreenRotation=function(){return 0},Q.getTime=function(){return Krom.getTime()-Q.start},Q.getVsync=function(){return!0},Q.getRefreshRate=function(){return 60},Q.getSystemId=function(){return Krom.systemId()},Q.vibrate=function(e){},Q.getLanguage=function(){return"en"},Q.requestShutdown=function(){return Krom.requestShutdown(),!0},Q.getMouse=function(e){return Q.mouse},Q.getPen=function(e){return Q.pen},Q.getKeyboard=function(e){return Q.keyboard},Q.lockMouse=function(){if(!Q.isMouseLocked()){Krom.lockMouse();for(var e=0,t=Q.mouseLockListeners;e<t.length;){var i=t[e];++e,i()}}},Q.unlockMouse=function(){if(Q.isMouseLocked()){Krom.unlockMouse();for(var e=0,t=Q.mouseLockListeners;e<t.length;){var i=t[e];++e,i()}}},Q.canLockMouse=function(){return Krom.canLockMouse()},Q.isMouseLocked=function(){return Krom.isMouseLocked()},Q.notifyOfMouseLockChange=function(e,t){Q.canLockMouse()&&null!=e&&Q.mouseLockListeners.push(e)},Q.removeFromMouseLockChange=function(e,t){Q.canLockMouse()&&null!=e&&it.remove(Q.mouseLockListeners,e)},Q.hideSystemCursor=function(){Krom.showMouse(!1)},Q.showSystemCursor=function(){Krom.showMouse(!0)},Q.unload=function(){},Q.canSwitchFullscreen=function(){return!1},Q.isFullscreen=function(){return!1},Q.requestFullscreen=function(){},Q.exitFullscreen=function(){},Q.notifyOfFullscreenChange=function(e,t){},Q.removeFromFullscreenChange=function(e,t){},Q.changeResolution=function(e,t){},Q.setKeepScreenOn=function(e){},Q.loadUrl=function(e){},Q.getGamepadId=function(e){return"unkown"},Q.safeZone=function(){return 1},Q.login=function(){},Q.automaticSafeZone=function(){return!0},Q.setSafeZone=function(e){},Q.unlockAchievement=function(e){};function q(){}(x["kha.Video"]=q).__name__=!0,q.__interfaces__=[M],q.prototype={width:function(){return 100},height:function(){return 100},play:function(e){null==e&&(e=!1)},pause:function(){},stop:function(){},getLength:function(){return 0},getCurrentPos:function(){return 0},get_position:function(){return 0},set_position:function(e){return 0},getVolume:function(){return 1},setVolume:function(e){},isFinished:function(){return this.getCurrentPos()>=this.getLength()},unload:function(){},__class__:q,__properties__:{set_position:"set_position",get_position:"get_position"}};var j=function(e){this.num=e,j.windows.push(this)};(x["kha.Window"]=j).__name__=!0,j.__properties__={get_all:"get_all"},j.create=function(e,t){return null},j.destroy=function(e){},j.get=function(e){return j.windows[e]},j.get_all=function(){return j.windows},j.prototype={num:null,windowTitle:null,resize:function(e,t){},move:function(e,t){},changeWindowFeatures:function(e){},changeFramebuffer:function(e){},get_x:function(){return 0},set_x:function(e){return 0},get_y:function(){return 0},set_y:function(e){return 0},get_width:function(){return Krom.windowWidth(this.num)},set_width:function(e){return 800},get_height:function(){return Krom.windowHeight(this.num)},set_height:function(e){return 600},get_mode:function(){return 0},set_mode:function(e){return 0},get_visible:function(){return!0},set_visible:function(e){return!0},get_title:function(){return this.windowTitle},set_title:function(e){return Krom.setWindowTitle(this.num,e),this.windowTitle=e,this.windowTitle},notifyOnResize:function(e){},get_vSynced:function(){return!0},__class__:j,__properties__:{get_vSynced:"get_vSynced",set_title:"set_title",get_title:"get_title",set_visible:"set_visible",get_visible:"get_visible",set_mode:"set_mode",get_mode:"get_mode",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var Z={};(x["kha._WindowOptions.WindowFeatures_Impl_"]=Z).__name__=!0,Z._new=function(e){return e};var ne=function(e,t,i,n,r,s,a,o,l){null==l&&(l=0),null==a&&(a=!0),null==s&&(s=-1),null==r&&(r=600),null==n&&(n=800),null==i&&(i=-1),null==t&&(t=-1),this.mode=0,this.windowFeatures=7,this.visible=!0,this.display=-1,this.height=600,this.width=800,this.y=-1,this.x=-1,this.title=null,this.title=e,this.x=t,this.y=i,this.width=n,this.height=r,this.display=s,this.visible=a,this.windowFeatures=null==o?7:o,this.mode=l};(x["kha.WindowOptions"]=ne).__name__=!0,ne.prototype={title:null,x:null,y:null,width:null,height:null,display:null,visible:null,windowFeatures:null,mode:null,__class__:ne};var re={};(x["kha.arrays._Float32Array.Float32Array_Impl_"]=re).__name__=!0,re.__properties__={get_length:"get_length",get_buffer:"get_buffer"},re._new=function(e){return new Float32Array(e)},re.get_buffer=function(e){return e.buffer},re.get_length=function(e){return e.length},re.set=function(e,t,i){return e[t]=i},re.get=function(e,t){return e[t]},re.data=function(e){return e},re.subarray=function(e,t,i){return e.subarray(t,i)};var se={};(x["kha.arrays._Int16Array.Int16Array_Impl_"]=se).__name__=!0,se.__properties__={get_length:"get_length"},se._new=function(e){return new Int16Array(e)},se.get_length=function(e){return e.length},se.set=function(e,t,i){return e[t]=i},se.get=function(e,t){return e[t]},se.data=function(e){return e},se.arrayRead=function(e,t){return e[t]},se.arrayWrite=function(e,t,i){return e[t]=i},se.subarray=function(e,t,i){return e.subarray(t,i)};var ae={};(x["kha.arrays._Int32Array.Int32Array_Impl_"]=ae).__name__=!0,ae.__properties__={get_length:"get_length"},ae._new=function(e){return new Int32Array(e)},ae.get_length=function(e){return e.length},ae.set=function(e,t,i){return e[t]=i},ae.get=function(e,t){return e[t]},ae.data=function(e){return e},ae.arrayRead=function(e,t){return e[t]},ae.arrayWrite=function(e,t,i){return e[t]=i},ae.subarray=function(e,t,i){return e.subarray(t,i)};var oe={};(x["kha.arrays._Uint32Array.Uint32Array_Impl_"]=oe).__name__=!0,oe.__properties__={get_length:"get_length"},oe._new=function(e){return new Uint32Array(e)},oe.get_length=function(e){return e.length},oe.set=function(e,t,i){return e[t]=i},oe.get=function(e,t){return e[t]},oe.data=function(e){return e},oe.arrayRead=function(e,t){return e[t]},oe.arrayWrite=function(e,t,i){return e[t]=i},oe.subarray=function(e,t,i){return e.subarray(t,i)};function le(){}(x["kha.audio1.AudioChannel"]=le).__name__=!0,le.__isInterface__=!0,le.prototype={play:null,pause:null,stop:null,length:null,get_length:null,get_position:null,set_position:null,get_volume:null,set_volume:null,finished:null,get_finished:null,__class__:le,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume",set_position:"set_position",get_position:"get_position",get_length:"get_length"}};function ue(e){this.value=e}(x["kha.internal.IntBox"]=ue).__name__=!0,ue.prototype={value:null,__class__:ue};var de=function(){};(x["kha.audio2.Audio"]=de).__name__=!0,de._init=function(){de.buffer=new ge(8192,2,44100),de.samplesPerSecond=44100},de._callCallback=function(e){if(null!=de.buffer)if(null!=de.audioCallback)de.intBox.value=e,de.audioCallback(de.intBox,de.buffer);else for(var t=0,i=e;t<i;){t++;de.buffer.data[de.buffer.writeLocation]=0,de.buffer.writeLocation+=1,de.buffer.writeLocation>=de.buffer.size&&(de.buffer.writeLocation=0)}},de._readSample=function(){if(null==de.buffer)return 0;var e=de.buffer.data[de.buffer.readLocation];return de.buffer.readLocation+=1,de.buffer.readLocation>=de.buffer.size&&(de.buffer.readLocation=0),e},de.play=function(e,t){return null==t&&(t=!1),null},de.stream=function(e,t){return null==t&&(t=!1),null};var _e=function(){};(x["kha.audio2.Audio1"]=_e).__name__=!0,_e._init=function(){var e=new Array(32);_e.soundChannels=e;var t=new Array(32);_e.streamChannels=t;var i=new Array(32);_e.internalSoundChannels=i;var n=new Array(32);_e.internalStreamChannels=n;var r=new Float32Array(512);_e.sampleCache1=r;var s=new Float32Array(512);_e.sampleCache2=s,_e.lastAllocationCount=0,de.audioCallback=_e.mix},_e.max=function(e,t){return t<e?e:t},_e.min=function(e,t){return e<t?e:t},_e.mix=function(e,t){var i=e.value;if(_e.sampleCache1.length<i){if(de.disableGcInteractions){L.trace("Unexpected allocation request in audio thread.",{fileName:"kha/audio2/Audio1.hx",lineNumber:45,className:"kha.audio2.Audio1",methodName:"mix"});for(var n=0,r=i;n<r;){n++;t.data[t.writeLocation]=0,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0)}return _e.lastAllocationCount=0,void(de.disableGcInteractions=!1)}var s=new Float32Array(2*i);_e.sampleCache1=s;var a=new Float32Array(2*i);_e.sampleCache2=a,_e.lastAllocationCount=0}else 100<_e.lastAllocationCount?de.disableGcInteractions=!0:_e.lastAllocationCount+=1;for(var o=0,l=i;o<l;){var u=o++;_e.sampleCache2[u]=0}for(var h=0;h<32;){var c=h++;_e.internalSoundChannels[c]=_e.soundChannels[c]}for(var A=0;A<32;){var d=A++;_e.internalStreamChannels[d]=_e.streamChannels[d]}for(var _=0,f=_e.internalSoundChannels;_<f.length;){var g=f[_];if(++_,null!=g&&!g.get_finished()){g.nextSamples(_e.sampleCache1,i,t.samplesPerSecond);for(var p=0,m=i;p<m;){var v=p++;_e.sampleCache2[v]+=_e.sampleCache1[v]*g.get_volume()}}}for(var w=0,b=_e.internalStreamChannels;w<b.length;){var y=b[w];if(++w,null!=y&&!y.get_finished()){y.nextSamples(_e.sampleCache1,i,t.samplesPerSecond);for(var x=0,T=i;x<T;){var S=x++;_e.sampleCache2[S]+=_e.sampleCache1[S]*y.get_volume()}}}for(var E=0,B=i;E<B;){var k=E++,I=_e.sampleCache2[k],C=I<1?I:1;t.data[t.writeLocation]=-1<C?C:-1,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0)}},_e.play=function(e,t){null==t&&(t=!1);var i=null;(i=de.samplesPerSecond!=e.sampleRate?new pe(t,e.sampleRate):new fe(t)).data=e.uncompressedData;for(var n=!1,r=0;r<32;){var s=r++;if(null==_e.soundChannels[s]||_e.soundChannels[s].get_finished()){_e.soundChannels[s]=i,n=!0;break}}return n?i:null},_e._playAgain=function(e){for(var t=0;t<32;){var i=t++;_e.soundChannels[i]==e&&(_e.soundChannels[i]=null)}for(var n=0;n<32;){var r=n++;if(null==_e.soundChannels[r]||_e.soundChannels[r].get_finished()||_e.soundChannels[r]==e){_e.soundChannels[r]=e;break}}},_e.stream=function(e,t){null==t&&(t=!1);var i=de.stream(e,t);if(null!=i)return i;for(var n=new me(e.compressedData,t),r=!1,s=0;s<32;){var a=s++;if(null==_e.streamChannels[a]||_e.streamChannels[a].get_finished()){_e.streamChannels[a]=n,r=!0;break}}return r?n:null};var fe=function(e){this.looping=!1,this.stopped=!1,this.paused=!1,this.myPosition=0,this.myVolume=1,this.data=null,this.looping=e};(x["kha.audio2.AudioChannel"]=fe).__name__=!0,fe.__interfaces__=[le],fe.max=function(e,t){return t<e?e:t},fe.min=function(e,t){return e<t?e:t},fe.prototype={data:null,myVolume:null,myPosition:null,paused:null,stopped:null,looping:null,nextSamples:function(e,t,i){if(this.paused||this.stopped)for(var n=0,r=t;n<r;){e[n++]=0}else{for(var s=0;s<t;){for(var a=0,o=this.data.length-this.myPosition,l=t-s,u=o<l?o:l;a<u;){a++;e[s++]=this.data[this.myPosition++]}if(this.myPosition>=this.data.length&&(this.myPosition=0,!this.looping)){this.stopped=!0;break}}for(;s<t;)e[s++]=0}},play:function(){this.paused=!1,this.stopped=!1,_e._playAgain(this)},pause:function(){this.paused=!0},stop:function(){this.myPosition=0,this.stopped=!0},length:null,get_length:function(){return this.data.length/de.samplesPerSecond/2},get_position:function(){return this.myPosition/de.samplesPerSecond/2},set_position:function(e){this.myPosition=Math.round(e*de.samplesPerSecond*2);var t=this.myPosition,i=this.data.length,n=t<i?t:i;return this.myPosition=0<n?n:0,e},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.stopped},__class__:fe,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume",set_position:"set_position",get_position:"get_position",get_length:"get_length"}};var ge=function(e,t,i){this.size=e;var n=new Float32Array(e);this.data=n,this.channels=t,this.samplesPerSecond=i,this.readLocation=0,this.writeLocation=0};(x["kha.audio2.Buffer"]=ge).__name__=!0,ge.prototype={channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null,__class__:ge};var pe=function(e,t){fe.call(this,e),this.sampleRate=t};(x["kha.audio2.ResamplingAudioChannel"]=pe).__name__=!0,pe.max=function(e,t){return t<e?e:t},pe.min=function(e,t){return e<t?e:t},pe.__super__=fe,pe.prototype=r(fe.prototype,{sampleRate:null,nextSamples:function(e,t,i){if(this.paused||this.stopped)for(var n=0,r=t;n<r;){e[n++]=0}else{for(var s=0;s<t;){for(var a=0,o=Math.ceil(this.data.length*(i/this.sampleRate)),l=(o%2==0?o:o+1)-this.myPosition,u=t-s,h=l<u?l:u;a<h;){a++;var c,A=s++,d=this.myPosition++,_=d%2==0,f=this.sampleRate/i;if(_){var g=f*(d=d/2|0),p=Math.floor(g),m=Math.floor(1+g);p*=2,m*=2;var v=this.data.length-1;v%2==0?v=v:--v;var w=p<0||v<p?0:this.data[p],b=m<0||v<m?0:this.data[m],y=g-Math.floor(g);c=(1-y)*w+y*b}else{var x=f*(d=d/2|0),T=Math.floor(x),S=Math.floor(1+x);T=2*T+1,S=2*S+1;var E=this.data.length-1;E%2!=0?E=E:--E;var B=T<1||E<T?0:this.data[T],k=S<1||E<S?0:this.data[S],I=x-Math.floor(x);c=(1-I)*B+I*k}e[A]=c}var C=Math.ceil(this.data.length*(i/this.sampleRate));if(this.myPosition>=(C%2==0?C:C+1)&&(this.myPosition=0,!this.looping)){this.stopped=!0;break}}for(;s<t;)e[s++]=0}},sample:function(e,t){var i=e%2==0,n=this.sampleRate/t;if(i){var r=n*(e=e/2|0),s=Math.floor(r),a=Math.floor(1+r);s*=2,a*=2;var o=this.data.length-1;o%2==0?o=o:--o;var l=s<0||o<s?0:this.data[s],u=a<0||o<a?0:this.data[a],h=r-Math.floor(r);return(1-h)*l+h*u}var c=n*(e=e/2|0),A=Math.floor(c),d=Math.floor(1+c);A=2*A+1,d=2*d+1;var _=this.data.length-1;_%2!=0?_=_:--_;var f=A<1||_<A?0:this.data[A],g=d<1||_<d?0:this.data[d],p=c-Math.floor(c);return(1-p)*f+p*g},lerp:function(e,t,i){return(1-i)*e+i*t},sampleLength:function(e){var t=Math.ceil(this.data.length*(e/this.sampleRate));return t%2==0?t:t+1},play:function(){this.paused=!1,this.stopped=!1,_e._playAgain(this)},pause:function(){this.paused=!0},stop:function(){this.myPosition=0,this.stopped=!0},get_length:function(){return this.data.length/this.sampleRate/2},get_position:function(){return this.myPosition/this.sampleRate/2},set_position:function(e){this.myPosition=Math.round(e*this.sampleRate*2);var t=this.myPosition,i=Math.ceil(this.data.length*(de.samplesPerSecond/this.sampleRate)),n=i%2==0?i:i+1,r=t<n?t:n;return this.myPosition=0<r?r:0,e},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},get_finished:function(){return this.stopped},__class__:pe});var me=function(e,t){this.paused=!1,this.atend=!1,this.myVolume=1,this.loop=t,this.reader=ye.openFromBytes(e)};(x["kha.audio2.StreamChannel"]=me).__name__=!0,me.__interfaces__=[le],me.prototype={reader:null,atend:null,loop:null,myVolume:null,paused:null,nextSamples:function(e,t,i){if(this.paused)for(var n=0,r=t;n<r;){e[n++]=0}else{var s=2*this.reader.read(e,t/2|0,2,i,!0);if(s<t){this.loop?this.reader.set_currentMillisecond(0):this.atend=!0;for(var a=s,o=t;a<o;){e[a++]=0}}}},play:function(){this.paused=!1},pause:function(){this.paused=!0},stop:function(){this.atend=!0},length:null,get_length:function(){return this.reader.get_totalMillisecond()/1e3},get_position:function(){return this.reader.get_currentMillisecond()/1e3},set_position:function(e){return e},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.atend},__class__:me,__properties__:{get_finished:"get_finished",set_volume:"set_volume",get_volume:"get_volume",set_position:"set_position",get_position:"get_position",get_length:"get_length"}};function ve(){}(x["kha.audio2.ogg.tools.Crc32"]=ve).__name__=!0,ve.init=function(){if(null==ve.table){var e=new Array(256);ve.table=e;for(var t=0;t<256;){var i=t++,n=i<<24;n=(n=(n=(n=(n=(n=(n=(n=n<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0))<<1^(Me.gte(n,1<<31)?79764919:0),ve.table[i]=n}}},ve.update=function(e,t){return e<<8^ve.table[t^e>>>24]};function we(){}(x["kha.audio2.ogg.tools.MathTools"]=we).__name__=!0,we.ilog=function(e){var t=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];return e<16384?e<16?t[e]:e<512?5+t[e>>5]:10+t[e>>10]:e<16777216?e<524288?15+t[e>>15]:20+t[e>>20]:e<536870912?25+t[e>>25]:e<-2147483648?30+t[e>>30]:0};function be(){}(x["kha.audio2.ogg.tools.Mdct"]=be).__name__=!0,be.inverseTransform=function(e,t,i,n,r,s){for(var a=t>>1,o=t>>2,l=t>>3,u=new Array(a),h=a-2,c=0,A=0,d=a;A!=d;)u[h+1]=e[A]*i[c]-e[A+2]*i[c+1],u[h]=e[A]*i[c+1]+e[A+2]*i[c],h-=2,c+=2,A+=4;for(A=a-3;0<=h;)u[h+1]=-e[A+2]*i[c]- -e[A]*i[c+1],u[h]=-e[A+2]*i[c+1]+-e[A]*i[c],h-=2,c+=2,A-=4;for(var _=e,f=u,g=a-8,p=o,m=0,v=o,w=0;0<=g;){var b=f[p+1]-f[m+1],y=f[p]-f[m];_[v+1]=f[p+1]+f[m+1],_[v]=f[p]+f[m],_[w+1]=b*i[g+4]-y*i[g+5],_[w]=y*i[g+4]+b*i[g+5],b=f[p+3]-f[m+3],y=f[p+2]-f[m+2],_[v+3]=f[p+3]+f[m+3],_[v+2]=f[p+2]+f[m+2],_[w+3]=b*i[g]-y*i[g+1],_[w+2]=y*i[g]+b*i[g+1],g-=8,v+=4,w+=4,p+=4,m+=4}for(var x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],T=(t<16384?t<16?x[t]:t<512?5+x[t>>5]:10+x[t>>10]:t<16777216?t<524288?15+x[t>>15]:20+x[t>>20]:t<536870912?25+x[t>>25]:t<-2147483648?30+x[t>>30]:0)-1,S=a-1-0*o,E=S,B=S-(t>>3),k=0,I=1+(t>>4>>2);0<--I;){var C=_[E]-_[B],L=_[E+-1]-_[B+-1];_[E]=_[E]+_[B];var N=E+-1;_[N]=_[N]+_[B+-1],_[B]=C*i[k]-L*i[k+1],_[B+-1]=L*i[k]+C*i[k+1],k+=8,C=_[E+-2]-_[B+-2],L=_[E+-3]-_[B+-3];var F=E+-2;_[F]=_[F]+_[B+-2];var P=E+-3;_[P]=_[P]+_[B+-3],_[B+-2]=C*i[k]-L*i[k+1],_[B+-3]=L*i[k]+C*i[k+1],k+=8,C=_[E+-4]-_[B+-4],L=_[E+-5]-_[B+-5];var M=E+-4;_[M]=_[M]+_[B+-4];var R=E+-5;_[R]=_[R]+_[B+-5],_[B+-4]=C*i[k]-L*i[k+1],_[B+-5]=L*i[k]+C*i[k+1],k+=8,C=_[E+-6]-_[B+-6],L=_[E+-7]-_[B+-7];var O=E+-6;_[O]=_[O]+_[B+-6];var V=E+-7;_[V]=_[V]+_[B+-7],_[B+-6]=C*i[k]-L*i[k+1],_[B+-7]=L*i[k]+C*i[k+1],k+=8,E-=8,B-=8}for(var D=a-1-o,U=D,H=D-(t>>3),W=0,G=1+(t>>4>>2);0<--G;){var z=_[U]-_[H],X=_[U+-1]-_[H+-1];_[U]=_[U]+_[H];var Y=U+-1;_[Y]=_[Y]+_[H+-1],_[H]=z*i[W]-X*i[W+1],_[H+-1]=X*i[W]+z*i[W+1],W+=8,z=_[U+-2]-_[H+-2],X=_[U+-3]-_[H+-3];var K=U+-2;_[K]=_[K]+_[H+-2];var Q=U+-3;_[Q]=_[Q]+_[H+-3],_[H+-2]=z*i[W]-X*i[W+1],_[H+-3]=X*i[W]+z*i[W+1],W+=8,z=_[U+-4]-_[H+-4],X=_[U+-5]-_[H+-5];var q=U+-4;_[q]=_[q]+_[H+-4];var j=U+-5;_[j]=_[j]+_[H+-5],_[H+-4]=z*i[W]-X*i[W+1],_[H+-5]=X*i[W]+z*i[W+1],W+=8,z=_[U+-6]-_[H+-6],X=_[U+-7]-_[H+-7];var Z=U+-6;_[Z]=_[Z]+_[H+-6];var J=U+-7;_[J]=_[J]+_[H+-7],_[H+-6]=z*i[W]-X*i[W+1],_[H+-7]=X*i[W]+z*i[W+1],W+=8,U-=8,H-=8}for(var $=a-1-0*l,ee=0,te=$,ie=$-(t>>4),ne=1+(t>>5>>2);0<--ne;){var re=_[te]-_[ie],se=_[te+-1]-_[ie+-1];_[te]=_[te]+_[ie];var ae=te+-1;_[ae]=_[ae]+_[ie+-1],_[ie]=re*i[ee]-se*i[ee+1],_[ie+-1]=se*i[ee]+re*i[ee+1],ee+=16,re=_[te+-2]-_[ie+-2],se=_[te+-3]-_[ie+-3];var oe=te+-2;_[oe]=_[oe]+_[ie+-2];var le=te+-3;_[le]=_[le]+_[ie+-3],_[ie+-2]=re*i[ee]-se*i[ee+1],_[ie+-3]=se*i[ee]+re*i[ee+1],ee+=16,re=_[te+-4]-_[ie+-4],se=_[te+-5]-_[ie+-5];var ue=te+-4;_[ue]=_[ue]+_[ie+-4];var he=te+-5;_[he]=_[he]+_[ie+-5],_[ie+-4]=re*i[ee]-se*i[ee+1],_[ie+-5]=se*i[ee]+re*i[ee+1],ee+=16,re=_[te+-6]-_[ie+-6],se=_[te+-7]-_[ie+-7];var ce=te+-6;_[ce]=_[ce]+_[ie+-6];var Ae=te+-7;_[Ae]=_[Ae]+_[ie+-7],_[ie+-6]=re*i[ee]-se*i[ee+1],_[ie+-7]=se*i[ee]+re*i[ee+1],te-=8,ie-=8,ee+=16}for(var de=a-1-l,_e=0,fe=de,ge=de-(t>>4),pe=1+(t>>5>>2);0<--pe;){var me=_[fe]-_[ge],ve=_[fe+-1]-_[ge+-1];_[fe]=_[fe]+_[ge];var we=fe+-1;_[we]=_[we]+_[ge+-1],_[ge]=me*i[_e]-ve*i[_e+1],_[ge+-1]=ve*i[_e]+me*i[_e+1],_e+=16,me=_[fe+-2]-_[ge+-2],ve=_[fe+-3]-_[ge+-3];var be=fe+-2;_[be]=_[be]+_[ge+-2];var ye=fe+-3;_[ye]=_[ye]+_[ge+-3],_[ge+-2]=me*i[_e]-ve*i[_e+1],_[ge+-3]=ve*i[_e]+me*i[_e+1],_e+=16,me=_[fe+-4]-_[ge+-4],ve=_[fe+-5]-_[ge+-5];var xe=fe+-4;_[xe]=_[xe]+_[ge+-4];var Te=fe+-5;_[Te]=_[Te]+_[ge+-5],_[ge+-4]=me*i[_e]-ve*i[_e+1],_[ge+-5]=ve*i[_e]+me*i[_e+1],_e+=16,me=_[fe+-6]-_[ge+-6],ve=_[fe+-7]-_[ge+-7];var Se=fe+-6;_[Se]=_[Se]+_[ge+-6];var Ee=fe+-7;_[Ee]=_[Ee]+_[ge+-7],_[ge+-6]=me*i[_e]-ve*i[_e+1],_[ge+-7]=ve*i[_e]+me*i[_e+1],fe-=8,ge-=8,_e+=16}for(var Be=a-1-2*l,ke=0,Ie=Be,Ce=Be-(t>>4),Le=1+(t>>5>>2);0<--Le;){var Ne=_[Ie]-_[Ce],Fe=_[Ie+-1]-_[Ce+-1];_[Ie]=_[Ie]+_[Ce];var Pe=Ie+-1;_[Pe]=_[Pe]+_[Ce+-1],_[Ce]=Ne*i[ke]-Fe*i[ke+1],_[Ce+-1]=Fe*i[ke]+Ne*i[ke+1],ke+=16,Ne=_[Ie+-2]-_[Ce+-2],Fe=_[Ie+-3]-_[Ce+-3];var Me=Ie+-2;_[Me]=_[Me]+_[Ce+-2];var Re=Ie+-3;_[Re]=_[Re]+_[Ce+-3],_[Ce+-2]=Ne*i[ke]-Fe*i[ke+1],_[Ce+-3]=Fe*i[ke]+Ne*i[ke+1],ke+=16,Ne=_[Ie+-4]-_[Ce+-4],Fe=_[Ie+-5]-_[Ce+-5];var Oe=Ie+-4;_[Oe]=_[Oe]+_[Ce+-4];var Ve=Ie+-5;_[Ve]=_[Ve]+_[Ce+-5],_[Ce+-4]=Ne*i[ke]-Fe*i[ke+1],_[Ce+-5]=Fe*i[ke]+Ne*i[ke+1],ke+=16,Ne=_[Ie+-6]-_[Ce+-6],Fe=_[Ie+-7]-_[Ce+-7];var De=Ie+-6;_[De]=_[De]+_[Ce+-6];var Ue=Ie+-7;_[Ue]=_[Ue]+_[Ce+-7],_[Ce+-6]=Ne*i[ke]-Fe*i[ke+1],_[Ce+-7]=Fe*i[ke]+Ne*i[ke+1],Ie-=8,Ce-=8,ke+=16}for(var He=a-1-3*l,We=0,Ge=He,ze=He-(t>>4),Xe=1+(t>>5>>2);0<--Xe;){var Ye=_[Ge]-_[ze],Ke=_[Ge+-1]-_[ze+-1];_[Ge]=_[Ge]+_[ze];var Qe=Ge+-1;_[Qe]=_[Qe]+_[ze+-1],_[ze]=Ye*i[We]-Ke*i[We+1],_[ze+-1]=Ke*i[We]+Ye*i[We+1],We+=16,Ye=_[Ge+-2]-_[ze+-2],Ke=_[Ge+-3]-_[ze+-3];var qe=Ge+-2;_[qe]=_[qe]+_[ze+-2];var je=Ge+-3;_[je]=_[je]+_[ze+-3],_[ze+-2]=Ye*i[We]-Ke*i[We+1],_[ze+-3]=Ke*i[We]+Ye*i[We+1],We+=16,Ye=_[Ge+-4]-_[ze+-4],Ke=_[Ge+-5]-_[ze+-5];var Ze=Ge+-4;_[Ze]=_[Ze]+_[ze+-4];var Je=Ge+-5;_[Je]=_[Je]+_[ze+-5],_[ze+-4]=Ye*i[We]-Ke*i[We+1],_[ze+-5]=Ke*i[We]+Ye*i[We+1],We+=16,Ye=_[Ge+-6]-_[ze+-6],Ke=_[Ge+-7]-_[ze+-7];var $e=Ge+-6;_[$e]=_[$e]+_[ze+-6];var et=Ge+-7;_[et]=_[et]+_[ze+-7],_[ze+-6]=Ye*i[We]-Ke*i[We+1],_[ze+-7]=Ke*i[We]+Ye*i[We+1],Ge-=8,ze-=8,We+=16}for(var tt=2,it=T-3>>1;tt<it;)for(var nt=tt++,rt=t>>2+nt,st=rt>>1,at=0,ot=1<<1+nt;at<ot;)for(var lt=a-1-rt*at++,ut=1<<3+nt,ht=0,ct=lt,At=lt-st,dt=1+(t>>4+nt>>2);0<--dt;){var _t=_[ct]-_[At],ft=_[ct+-1]-_[At+-1];_[ct]=_[ct]+_[At];var gt=ct+-1;_[gt]=_[gt]+_[At+-1],_[At]=_t*i[ht]-ft*i[ht+1],_[At+-1]=ft*i[ht]+_t*i[ht+1],ht+=ut,_t=_[ct+-2]-_[At+-2],ft=_[ct+-3]-_[At+-3];var pt=ct+-2;_[pt]=_[pt]+_[At+-2];var mt=ct+-3;_[mt]=_[mt]+_[At+-3],_[At+-2]=_t*i[ht]-ft*i[ht+1],_[At+-3]=ft*i[ht]+_t*i[ht+1],ht+=ut,_t=_[ct+-4]-_[At+-4],ft=_[ct+-5]-_[At+-5];var vt=ct+-4;_[vt]=_[vt]+_[At+-4];var wt=ct+-5;_[wt]=_[wt]+_[At+-5],_[At+-4]=_t*i[ht]-ft*i[ht+1],_[At+-5]=ft*i[ht]+_t*i[ht+1],ht+=ut,_t=_[ct+-6]-_[At+-6],ft=_[ct+-7]-_[At+-7];var bt=ct+-6;_[bt]=_[bt]+_[At+-6];var yt=ct+-7;_[yt]=_[yt]+_[At+-7],_[At+-6]=_t*i[ht]-ft*i[ht+1],_[At+-7]=ft*i[ht]+_t*i[ht+1],ct-=8,At-=8,ht+=ut}for(var xt=T-3>>1,Tt=T-6;xt<Tt;)for(var St=xt++,Et=t>>2+St,Bt=1<<3+St,kt=Et>>1,It=1<<1+St,Ct=0,Lt=a-1,Nt=1+(t>>6+St);0<--Nt;){for(var Ft=i[Ct],Pt=i[Ct+1],Mt=i[Ct+Bt],Rt=i[Ct+Bt+1],Ot=i[Ct+2*Bt],Vt=i[Ct+2*Bt+1],Dt=i[Ct+3*Bt],Ut=i[Ct+3*Bt+1],Ht=Lt,Wt=Lt+-kt,Gt=1+It;0<--Gt;){var zt=_[Ht]-_[Wt],Xt=_[Ht+-1]-_[Wt+-1];_[Ht]=_[Ht]+_[Wt],_[Ht+-1]=_[Ht+-1]+_[Wt+-1],_[Wt]=zt*Ft-Xt*Pt,_[Wt+-1]=Xt*Ft+zt*Pt,zt=_[Ht+-2]-_[Wt+-2],Xt=_[Ht+-3]-_[Wt+-3],_[Ht+-2]=_[Ht+-2]+_[Wt+-2],_[Ht+-3]=_[Ht+-3]+_[Wt+-3],_[Wt+-2]=zt*Mt-Xt*Rt,_[Wt+-3]=Xt*Mt+zt*Rt,zt=_[Ht+-4]-_[Wt+-4],Xt=_[Ht+-5]-_[Wt+-5],_[Ht+-4]=_[Ht+-4]+_[Wt+-4],_[Ht+-5]=_[Ht+-5]+_[Wt+-5],_[Wt+-4]=zt*Ot-Xt*Vt,_[Wt+-5]=Xt*Ot+zt*Vt,zt=_[Ht+-6]-_[Wt+-6],Xt=_[Ht+-7]-_[Wt+-7],_[Ht+-6]=_[Ht+-6]+_[Wt+-6],_[Ht+-7]=_[Ht+-7]+_[Wt+-7],_[Wt+-6]=zt*Dt-Xt*Ut,_[Wt+-7]=Xt*Dt+zt*Ut,Ht-=Et,Wt-=Et}Ct+=4*Bt,Lt-=8}for(var Yt=a-1,Kt=i[t>>3],Qt=Yt,qt=Yt-16*(t>>5);qt<Qt;){var jt=_[Qt],Zt=_[Qt+-8];_[Qt+-8]=jt-Zt,_[Qt]=jt+Zt,jt=_[Qt+-1],Zt=_[Qt+-9],_[Qt+-9]=jt-Zt,_[Qt+-1]=jt+Zt;var Jt=(jt=_[Qt+-2])-(Zt=_[Qt+-10]);_[Qt+-2]=jt+Zt;var $t=(jt=_[Qt+-3])-(Zt=_[Qt+-11]);_[Qt+-3]=jt+Zt,_[Qt+-10]=(Jt+$t)*Kt,_[Qt+-11]=($t-Jt)*Kt,jt=_[Qt+-4],Jt=(Zt=_[Qt+-12])-jt,_[Qt+-4]=jt+Zt,$t=(jt=_[Qt+-5])-(Zt=_[Qt+-13]),_[Qt+-5]=jt+Zt,_[Qt+-12]=$t,_[Qt+-13]=Jt,jt=_[Qt+-6],Jt=(Zt=_[Qt+-14])-jt,_[Qt+-6]=jt+Zt,$t=(jt=_[Qt+-7])-(Zt=_[Qt+-15]),_[Qt+-7]=jt+Zt,_[Qt+-14]=(Jt+$t)*Kt,_[Qt+-15]=(Jt-$t)*Kt;var ei=_[Qt],ti=_[Qt+-4],ii=ei-ti,ni=ei+ti,ri=(ei=_[Qt+-2])+(ti=_[Qt+-6]),si=ei-ti;_[Qt]=ni+ri,_[Qt+-2]=ni-ri;var ai=_[Qt+-3]-_[Qt+-7];_[Qt+-4]=ii+ai,_[Qt+-6]=ii-ai;var oi=(ei=_[Qt+-1])-(ti=_[Qt+-5]),li=ei+ti,ui=_[Qt+-3]+_[Qt+-7];_[Qt+-1]=li+ui,_[Qt+-3]=li-ui,_[Qt+-5]=oi-si,_[Qt+-7]=oi+si;var hi=Qt-8,ci=_[hi],Ai=_[hi-4],di=ci-Ai,_i=ci+Ai,fi=(ci=_[hi-2])+(Ai=_[hi-6]),gi=ci-Ai;_[hi]=_i+fi,_[hi-2]=_i-fi;var pi=_[hi-3]-_[hi-7];_[hi-4]=di+pi,_[hi-6]=di-pi;var mi=(ci=_[hi-1])-(Ai=_[hi-5]),vi=ci+Ai,wi=_[hi-3]+_[hi-7];_[hi-1]=vi+wi,_[hi-3]=vi-wi,_[hi-5]=mi-gi,_[hi-7]=mi+gi,Qt-=16}for(var bi=0,yi=o-4,xi=a-4;0<=yi;){var Ti=s[bi];f[xi+3]=_[Ti],f[xi+2]=_[Ti+1],f[yi+3]=_[Ti+2],f[yi+2]=_[Ti+3],Ti=s[bi+1],f[xi+1]=_[Ti],f[xi]=_[Ti+1],f[yi+1]=_[Ti+2],f[yi]=_[Ti+3],yi-=4,xi-=4,bi+=2}for(var Si=0,Ei=0,Bi=a-4;Ei<Bi;){var ki=f[Ei]-f[Bi+2],Ii=f[Ei+1]+f[Bi+3],Ci=r[Si+1]*ki+r[Si]*Ii,Li=r[Si+1]*Ii-r[Si]*ki,Ni=f[Ei]+f[Bi+2],Fi=f[Ei+1]-f[Bi+3];f[Ei]=Ni+Ci,f[Ei+1]=Fi+Li,f[Bi+2]=Ni-Ci,f[Bi+3]=Li-Fi,ki=f[Ei+2]-f[Bi],Ii=f[Ei+3]+f[Bi+1],Ci=r[Si+3]*ki+r[Si+2]*Ii,Li=r[Si+3]*Ii-r[Si+2]*ki,Ni=f[Ei+2]+f[Bi],Fi=f[Ei+3]-f[Bi+1],f[Ei+2]=Ni+Ci,f[Ei+3]=Fi+Li,f[Bi]=Ni-Ci,f[Bi+1]=Li-Fi,Si+=4,Ei+=4,Bi-=4}for(var Pi=a-8,Mi=a-8,Ri=0,Oi=a-4,Vi=a,Di=t-4;0<=Mi;){var Ui=u[Mi+6]*n[Pi+7]-u[Mi+7]*n[Pi+6],Hi=-u[Mi+6]*n[Pi+6]-u[Mi+7]*n[Pi+7];e[Ri]=Ui,e[Oi+3]=-Ui,e[Vi]=Hi,e[Di+3]=Hi;var Wi=u[Mi+4]*n[Pi+5]-u[Mi+5]*n[Pi+4],Gi=-u[Mi+4]*n[Pi+4]-u[Mi+5]*n[Pi+5];e[Ri+1]=Wi,e[Oi+2]=-Wi,e[Vi+1]=Gi,e[Di+2]=Gi,Ui=u[Mi+2]*n[Pi+3]-u[Mi+3]*n[Pi+2],Hi=-u[Mi+2]*n[Pi+2]-u[Mi+3]*n[Pi+3],e[Ri+2]=Ui,e[Oi+1]=-Ui,e[Vi+2]=Hi,e[Di+1]=Hi,Wi=u[Mi]*n[Pi+1]-u[Mi+1]*n[Pi],Gi=-u[Mi]*n[Pi]-u[Mi+1]*n[Pi+1],e[Ri+3]=Wi,e[Oi]=-Wi,e[Vi+3]=Gi,e[Di]=Gi,Pi-=8,Mi-=8,Ri+=4,Vi+=4,Oi-=4,Di-=4}},be.step3Iter0Loop=function(e,t,i,n,r){for(var s=i,a=i+n,o=0,l=1+(e>>2);0<--l;){var u=t[s]-t[a],h=t[s+-1]-t[a+-1];t[s]=t[s]+t[a];var c=s+-1;t[c]=t[c]+t[a+-1],t[a]=u*r[o]-h*r[o+1],t[a+-1]=h*r[o]+u*r[o+1],o+=8,u=t[s+-2]-t[a+-2],h=t[s+-3]-t[a+-3];var A=s+-2;t[A]=t[A]+t[a+-2];var d=s+-3;t[d]=t[d]+t[a+-3],t[a+-2]=u*r[o]-h*r[o+1],t[a+-3]=h*r[o]+u*r[o+1],o+=8,u=t[s+-4]-t[a+-4],h=t[s+-5]-t[a+-5];var _=s+-4;t[_]=t[_]+t[a+-4];var f=s+-5;t[f]=t[f]+t[a+-5],t[a+-4]=u*r[o]-h*r[o+1],t[a+-5]=h*r[o]+u*r[o+1],o+=8,u=t[s+-6]-t[a+-6],h=t[s+-7]-t[a+-7];var g=s+-6;t[g]=t[g]+t[a+-6];var p=s+-7;t[p]=t[p]+t[a+-7],t[a+-6]=u*r[o]-h*r[o+1],t[a+-7]=h*r[o]+u*r[o+1],o+=8,s-=8,a-=8}},be.step3InnerRLoop=function(e,t,i,n,r,s){for(var a=0,o=i,l=i+n,u=1+(e>>2);0<--u;){var h=t[o]-t[l],c=t[o+-1]-t[l+-1];t[o]=t[o]+t[l];var A=o+-1;t[A]=t[A]+t[l+-1],t[l]=h*r[a]-c*r[a+1],t[l+-1]=c*r[a]+h*r[a+1],a+=s,h=t[o+-2]-t[l+-2],c=t[o+-3]-t[l+-3];var d=o+-2;t[d]=t[d]+t[l+-2];var _=o+-3;t[_]=t[_]+t[l+-3],t[l+-2]=h*r[a]-c*r[a+1],t[l+-3]=c*r[a]+h*r[a+1],a+=s,h=t[o+-4]-t[l+-4],c=t[o+-5]-t[l+-5];var f=o+-4;t[f]=t[f]+t[l+-4];var g=o+-5;t[g]=t[g]+t[l+-5],t[l+-4]=h*r[a]-c*r[a+1],t[l+-5]=c*r[a]+h*r[a+1],a+=s,h=t[o+-6]-t[l+-6],c=t[o+-7]-t[l+-7];var p=o+-6;t[p]=t[p]+t[l+-6];var m=o+-7;t[m]=t[m]+t[l+-7],t[l+-6]=h*r[a]-c*r[a+1],t[l+-7]=c*r[a]+h*r[a+1],o-=8,l-=8,a+=s}},be.step3InnerSLoop=function(e,t,i,n,r,s,a,o){for(var l=r[s],u=r[s+1],h=r[s+a],c=r[s+a+1],A=r[s+2*a],d=r[s+2*a+1],_=r[s+3*a],f=r[s+3*a+1],g=i,p=i+n,m=e+1;0<--m;){var v=t[g]-t[p],w=t[g+-1]-t[p+-1];t[g]=t[g]+t[p],t[g+-1]=t[g+-1]+t[p+-1],t[p]=v*l-w*u,t[p+-1]=w*l+v*u,v=t[g+-2]-t[p+-2],w=t[g+-3]-t[p+-3],t[g+-2]=t[g+-2]+t[p+-2],t[g+-3]=t[g+-3]+t[p+-3],t[p+-2]=v*h-w*c,t[p+-3]=w*h+v*c,v=t[g+-4]-t[p+-4],w=t[g+-5]-t[p+-5],t[g+-4]=t[g+-4]+t[p+-4],t[g+-5]=t[g+-5]+t[p+-5],t[p+-4]=v*A-w*d,t[p+-5]=w*A+v*d,v=t[g+-6]-t[p+-6],w=t[g+-7]-t[p+-7],t[g+-6]=t[g+-6]+t[p+-6],t[g+-7]=t[g+-7]+t[p+-7],t[p+-6]=v*_-w*f,t[p+-7]=w*_+v*f,g-=o,p-=o}},be.iter54=function(e,t){var i=e[t],n=e[t+-4],r=i-n,s=i+n,a=(i=e[t+-2])+(n=e[t+-6]),o=i-n;e[t]=s+a,e[t+-2]=s-a;var l=e[t+-3]-e[t+-7];e[t+-4]=r+l,e[t+-6]=r-l;var u=(i=e[t+-1])-(n=e[t+-5]),h=i+n,c=e[t+-3]+e[t+-7];e[t+-1]=h+c,e[t+-3]=h-c,e[t+-5]=u-o,e[t+-7]=u+o},be.step3InnerSLoopLd654=function(e,t,i,n,r){for(var s=n[r>>3],a=i,o=i-16*e;o<a;){var l=t[a],u=t[a+-8];t[a+-8]=l-u,t[a]=l+u,l=t[a+-1],u=t[a+-9],t[a+-9]=l-u,t[a+-1]=l+u;var h=(l=t[a+-2])-(u=t[a+-10]);t[a+-2]=l+u;var c=(l=t[a+-3])-(u=t[a+-11]);t[a+-3]=l+u,t[a+-10]=(h+c)*s,t[a+-11]=(c-h)*s,l=t[a+-4],h=(u=t[a+-12])-l,t[a+-4]=l+u,c=(l=t[a+-5])-(u=t[a+-13]),t[a+-5]=l+u,t[a+-12]=c,t[a+-13]=h,l=t[a+-6],h=(u=t[a+-14])-l,t[a+-6]=l+u,c=(l=t[a+-7])-(u=t[a+-15]),t[a+-7]=l+u,t[a+-14]=(h+c)*s,t[a+-15]=(h-c)*s;var A=t[a],d=t[a+-4],_=A-d,f=A+d,g=(A=t[a+-2])+(d=t[a+-6]),p=A-d;t[a]=f+g,t[a+-2]=f-g;var m=t[a+-3]-t[a+-7];t[a+-4]=_+m,t[a+-6]=_-m;var v=(A=t[a+-1])-(d=t[a+-5]),w=A+d,b=t[a+-3]+t[a+-7];t[a+-1]=w+b,t[a+-3]=w-b,t[a+-5]=v-p,t[a+-7]=v+p;var y=a-8,x=t[y],T=t[y-4],S=x-T,E=x+T,B=(x=t[y-2])+(T=t[y-6]),k=x-T;t[y]=E+B,t[y-2]=E-B;var I=t[y-3]-t[y-7];t[y-4]=S+I,t[y-6]=S-I;var C=(x=t[y-1])-(T=t[y-5]),L=x+T,N=t[y-3]+t[y-7];t[y-1]=L+N,t[y-3]=L-N,t[y-5]=C-k,t[y-7]=C+k,a-=16}};var ye=function(e,t,i){this.seekFunc=t,this.inputLength=i,this.decoder=Se.start(e),this.decoder.setupSampleNumber(t,i),this.loopStart=this.get_header().comment.get_loopStart(),this.loopLength=this.get_header().comment.get_loopLength()};(x["kha.audio2.ogg.vorbis.Reader"]=ye).__name__=!0,ye.openFromBytes=function(e){var t=new ce(e),i=t;return new ye(t,function(e){ye.seekBytes(i,e)},e.length)},ye.seekBytes=function(e,t){e.set_position(t)},ye.readAll=function(e,t,i){null==i&&(i=!1);var n=new ce(e),r=Se.start(n),s=n;r.setupSampleNumber(function(e){ye.seekBytes(s,e)},e.length);for(var a=r.header,o=new Float32Array(4096*a.channel);;){for(var l=r.read(o,4096,a.channel,a.sampleRate,i),u=0,h=l*a.channel;u<h;){var c=u++;t.writeFloat(o[c])}if(0==l)break;0}return r.header},ye.prototype={decoder:null,get_header:function(){return this.decoder.header},get_totalSample:function(){return this.decoder.totalSample},get_totalMillisecond:function(){var e=this.decoder.totalSample,t=this.get_header().sampleRate;return Me.toFloat(e)/Me.toFloat(t)*1e3},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(e){return this.decoder.seek(this.seekFunc,this.inputLength,e),this.decoder.currentSample},get_currentMillisecond:function(){var e=this.get_currentSample(),t=this.get_header().sampleRate;return Me.toFloat(e)/Me.toFloat(t)*1e3},set_currentMillisecond:function(e){return this.set_currentSample(Math.floor(Me.toFloat(this.get_header().sampleRate)*(e/1e3))),this.get_currentMillisecond()},loopStart:null,loopLength:null,seekFunc:null,inputLength:null,read:function(e,t,i,n,r){return null==r&&(r=!1),this.decoder.ensurePosition(this.seekFunc),null==t&&(t=this.decoder.totalSample),null==i&&(i=this.get_header().channel),null==n&&(n=this.get_header().sampleRate),this.decoder.read(e,t,i,n,r)},clone:function(){var e=Object.create(ye.prototype);return e.seekFunc=this.seekFunc,e.inputLength=this.inputLength,e.decoder=this.decoder.clone(this.seekFunc),e.loopStart=this.loopStart,e.loopLength=this.loopLength,e},sampleToMillisecond:function(e){var t=this.get_header().sampleRate;return Me.toFloat(e)/Me.toFloat(t)*1e3},millisecondToSample:function(e){return Math.floor(Me.toFloat(this.get_header().sampleRate)*(e/1e3))},__class__:ye,__properties__:{set_currentMillisecond:"set_currentMillisecond",get_currentMillisecond:"get_currentMillisecond",set_currentSample:"set_currentSample",get_currentSample:"get_currentSample",get_totalMillisecond:"get_totalMillisecond",get_totalSample:"get_totalSample",get_header:"get_header"}};function xe(e){this.nextSeg=0,this.firstDecode=!1,this.bytesInSeg=0,this.validBits=0,this.input=e,this.inputPosition=0,this.page=new Ve,ve.init()}(x["kha.audio2.ogg.vorbis.VorbisDecodeState"]=xe).__name__=!0,xe.prototype={page:null,eof:null,pFirst:null,pLast:null,validBits:null,inputPosition:null,input:null,discardSamplesDeferred:null,segments:null,bytesInSeg:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,currentSample:null,previousWindow:null,previousLength:null,finalY:null,firstDecode:null,nextSeg:null,acc:null,lastSeg:null,lastSegWhich:null,endSegWithKnownLoc:null,knownLocForPacket:null,error:null,currentLoc:null,currentLocValid:null,firstAudioPageOffset:null,setup:function(e,t){this.inputPosition+=1;var i=this.input.readByte();this.inputPosition+=i;for(var n=new Array(i),r=0,s=i;r<s;){n[r++]=this.input.readByte()}if(this.segments=n,this.endSegWithKnownLoc=-2,-1!=e||-1!=t)for(var a=i-1;0<=a&&!(this.segments[a]<255);)0<=a&&(this.endSegWithKnownLoc=a,this.knownLocForPacket=e),--a;if(this.firstDecode){for(var o=0,l=new Ue,u=0,h=i;u<h;){var c=u++;o+=this.segments[c]}o+=27+i,l.pageStart=this.firstAudioPageOffset,l.pageEnd=l.pageStart+o,l.firstDecodedSample=0,l.lastDecodedSample=e,this.pFirst=l}this.nextSeg=0},clone:function(e){var t=Object.create(xe.prototype);return e(this.inputPosition),t.input=this.input,t.eof=this.eof,t.validBits=this.validBits,t.discardSamplesDeferred=this.discardSamplesDeferred,t.firstDecode=this.firstDecode,t.nextSeg=this.nextSeg,t.bytesInSeg=this.bytesInSeg,t.acc=t.acc,t.lastSeg=this.lastSeg,t.lastSegWhich=this.lastSegWhich,t.currentLoc=this.currentLoc,t.currentLocValid=this.currentLocValid,t.inputPosition=this.inputPosition,t.firstAudioPageOffset=this.firstAudioPageOffset,t.error=this.error,t.segments=this.segments,t.pFirst=this.pFirst,t.pLast=this.pLast,t.page=this.page.clone(),t},next:function(){if(this.lastSeg)return 0;if(-1==this.nextSeg){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(e){var t=e instanceof ft?e.val:e;if(t instanceof Xe)return this.lastSeg=!0,this.error=t,0;throw e}if(0==(1&this.page.flag))throw new ft(new Xe(Ye.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}var e=this.segments[this.nextSeg++];return e<255&&(this.lastSeg=!0,this.lastSegWhich=this.nextSeg-1),this.nextSeg>=this.segments.length&&(this.nextSeg=-1),this.bytesInSeg=e},startPacket:function(){for(;-1==this.nextSeg;)if(this.page.start(this),0!=(1&this.page.flag))throw new ft(new Xe(Ye.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}));this.lastSeg=!1,this.validBits=0,this.bytesInSeg=0},maybeStartPacket:function(){if(-1==this.nextSeg){var t,i=!1;try{this.inputPosition+=1,t=this.input.readByte()}catch(e){var n=e instanceof ft?e.val:e;if(!(n instanceof m))throw e;i=!0,t=0}if(i)return!1;if(!!(!!(79!=t||(this.inputPosition+=1,103!=this.input.readByte()))||(this.inputPosition+=1,103!=this.input.readByte()))||(this.inputPosition+=1,83!=this.input.readByte()))throw new ft(new Xe(Ye.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}));this.page.startWithoutCapturePattern(this)}return this.startPacket(),!0},readBits:function(e){if(this.validBits<0)return 0;if(this.validBits<e){if(24<e)return this.readBits(24)+(this.readBits(e-24)<<24);for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())){this.validBits=-1;break}if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<e))break}if(this.validBits<0)return 0;var t=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,t}var i=this.acc&(1<<e)-1;return this.acc=this.acc>>>e,this.validBits-=e,i},readPacketRaw:function(){return 0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1},readPacket:function(){var e;return e=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,e},flushPacket:function(){for(;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next();)this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()},vorbisValidate:function(){var e,t,i,n,r,s,a=new he(new ArrayBuffer(6));if(e=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,a.b[0]=e,t=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,a.b[1]=t,i=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,a.b[2]=i,n=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,a.b[3]=n,r=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,a.b[4]=r,s=0!=this.bytesInSeg||!this.lastSeg&&0!=this.next()?(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()):-1,this.validBits=0,a.b[5]=s,"vorbis"!=a.toString())throw new ft(new Xe(Ye.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))},firstPageValidate:function(){if(1!=this.segments.length)throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}));if(30!=this.segments[0])throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition,this.firstDecode=!0},capturePattern:function(){if(this.inputPosition+=1,!!(!!(79!=this.input.readByte()||(this.inputPosition+=1,103!=this.input.readByte()))||(this.inputPosition+=1,103!=this.input.readByte()))||(this.inputPosition+=1,83!=this.input.readByte()))throw new ft(new Xe(Ye.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))},skip:function(e){this.inputPosition+=e;for(var t=new Array(e),i=0,n=e;i<n;){t[i++]=this.input.readByte()}},prepHuffman:function(){if(this.validBits<=24)for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next()))return;if(this.bytesInSeg--,this.inputPosition+=1,this.acc=this.acc+(this.input.readByte()<<this.validBits),this.validBits+=8,!(this.validBits<=24))break}},decode:function(e){this.validBits<10&&this.prepHuffman();var t,i=e.fastHuffman[1023&this.acc];if(0<=i){var n=e.codewordLengths[i];this.acc=this.acc>>>n,this.validBits-=n,t=this.validBits<0?(this.validBits=0,-1):i}else t=this.decodeScalarRaw(e);return e.sparse&&(t=e.sortedValues[t]),t},decodeRaw:function(e){this.validBits<10&&this.prepHuffman();var t=e.fastHuffman[1023&this.acc];if(0<=t){var i=e.codewordLengths[t];return this.acc=this.acc>>>i,this.validBits-=i,this.validBits<0?(this.validBits=0,-1):t}return this.decodeScalarRaw(e)},isLastByte:function(){return 0==this.bytesInSeg&&this.lastSeg},finishDecodePacket:function(e,t,i){var n=i.left.start,r=!1,s=t>>1;if(this.firstDecode)this.currentLoc=-s,this.discardSamplesDeferred=t-i.right.end,r=!0,this.firstDecode=!1;else if(0!=this.discardSamplesDeferred)i.left.start+=this.discardSamplesDeferred,n=i.left.start,this.discardSamplesDeferred=0;else;if(this.lastSegWhich==this.endSegWithKnownLoc){if(r&&0!=(4&this.page.flag)){var a=this.knownLocForPacket-(t-i.right.end);if(a<this.currentLoc+i.right.end){var o=a<this.currentLoc?0:a-this.currentLoc;return o+=i.left.start,this.currentLoc+=o,{len:o,left:n,right:i.right.start}}}this.currentLoc=this.knownLocForPacket-(s-i.left.start),r=!0}return r&&(this.currentLoc+=i.right.start-i.left.start),{len:i.right.end,left:n,right:i.right.start}},readInt32:function(){return this.inputPosition+=4,this.input.readInt32()},readByte:function(){return this.inputPosition+=1,this.input.readByte()},read:function(e){this.inputPosition+=e;for(var t=new Array(e),i=0,n=e;i<n;){t[i++]=this.input.readByte()}return t},readBytes:function(e){return this.inputPosition+=e,this.input.read(e)},readString:function(e){return this.inputPosition+=e,this.input.readString(e)},getSampleNumber:function(e,t){var i=this.inputPosition,n=Me.gte(t,65536)&&Me.gte(t-65536,this.firstAudioPageOffset)?t-65536:this.firstAudioPageOffset;e(this.inputPosition=n);var r=0,s=!1,a=this.findPage(e,t);switch(a._hx_index){case 0:var o=a.last;r=a.end,s=o;break;case 1:throw new ft(new Xe(Ye.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}))}var l=this.inputPosition;e:for(;!s;){e(this.inputPosition=r);var u=this.findPage(e,t);switch(u._hx_index){case 0:var h=u.last;r=u.end,s=h;break;case 1:break e}n=l+1,l=this.inputPosition}e(this.inputPosition=l),this.inputPosition+=6;for(var c=new Array(6),A=0;A<6;){c[A++]=this.input.readByte()}this.inputPosition+=4;var d=this.input.readInt32();this.inputPosition+=4;var _=this.input.readInt32();if(-1==d&&-1==_||0<_)throw new ft(new Xe(Ye.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));return this.pLast=new Ue,this.pLast.pageStart=l,this.pLast.pageEnd=r,this.pLast.lastDecodedSample=d,this.pLast.firstDecodedSample=null,this.pLast.afterPreviousPageStart=n,e(this.inputPosition=i),d},forcePageResync:function(){this.nextSeg=-1},setInputOffset:function(e,t){e(this.inputPosition=t)},findPage:function(e,t){try{for(;;){if(this.inputPosition+=1,79==this.input.readByte()){var i=this.inputPosition;if(t<i-25)return Te.NotFound;if(this.inputPosition+=1,!!(103!=this.input.readByte()||(this.inputPosition+=1,103!=this.input.readByte()))||(this.inputPosition+=1,83!=this.input.readByte()))continue;var n=new Array(27);if(n[0]=79,n[1]=103,n[2]=103,n[3]=83,this.inputPosition+=1,n[4]=this.input.readByte(),this.inputPosition+=1,n[5]=this.input.readByte(),this.inputPosition+=1,n[6]=this.input.readByte(),this.inputPosition+=1,n[7]=this.input.readByte(),this.inputPosition+=1,n[8]=this.input.readByte(),this.inputPosition+=1,n[9]=this.input.readByte(),this.inputPosition+=1,n[10]=this.input.readByte(),this.inputPosition+=1,n[11]=this.input.readByte(),this.inputPosition+=1,n[12]=this.input.readByte(),this.inputPosition+=1,n[13]=this.input.readByte(),this.inputPosition+=1,n[14]=this.input.readByte(),this.inputPosition+=1,n[15]=this.input.readByte(),this.inputPosition+=1,n[16]=this.input.readByte(),this.inputPosition+=1,n[17]=this.input.readByte(),this.inputPosition+=1,n[18]=this.input.readByte(),this.inputPosition+=1,n[19]=this.input.readByte(),this.inputPosition+=1,n[20]=this.input.readByte(),this.inputPosition+=1,n[21]=this.input.readByte(),this.inputPosition+=1,n[22]=this.input.readByte(),this.inputPosition+=1,n[23]=this.input.readByte(),this.inputPosition+=1,n[24]=this.input.readByte(),this.inputPosition+=1,n[25]=this.input.readByte(),this.inputPosition+=1,n[26]=this.input.readByte(),0!=n[4]){e(this.inputPosition=i);continue}var r=n[22]+(n[23]<<8)+(n[24]<<16)+(n[25]<<24);n[22]=0,n[23]=0,n[24]=0;for(var s=n[25]=0,a=0;a<27;){var o=a++;s=s<<8^ve.table[n[o]^s>>>24]}var l=0;try{for(var u=0,h=n[26];u<h;){u++;this.inputPosition+=1;var c=this.input.readByte();s=s<<8^ve.table[c^s>>>24],l+=c}for(var A=0,d=l;A<d;){A++;this.inputPosition+=1;var _=this.input.readByte();s=s<<8^ve.table[_^s>>>24]}}catch(e){var f=e instanceof ft?e.val:e;if(f instanceof m){return Te.NotFound}throw e}if(s==r){var g=this.inputPosition;return e(this.inputPosition=i-1),Te.Found(g,0!=(4&n[5]))}}}}catch(e){var p=e instanceof ft?e.val:e;if(p instanceof m){return Te.NotFound}throw e}},analyzePage:function(e,t){var i=new Ue,n=new Array(255);i.pageStart=this.inputPosition,this.inputPosition+=27;for(var r=new Array(27),s=0;s<27;){r[s++]=this.input.readByte()}var a=r,o=a[26];this.inputPosition+=o;for(var l=new Array(o),u=0,h=o;u<h;){l[u++]=this.input.readByte()}for(var c=l,A=0,d=0,_=a[26];d<_;){A+=c[d++]}if(i.pageEnd=i.pageStart+27+a[26]+A,i.lastDecodedSample=a[6]+(a[7]<<8)+(a[8]<<16)+(a[9]<<16),0!=(4&a[5]))return i.firstDecodedSample=null,e(this.inputPosition=i.pageStart),i;for(var f=0,g=0==(1&a[5]),p=t.modes.length,m=0,v=a[26];m<v;){var w=m++;if(g){if(0==c[w])return e(this.inputPosition=i.pageStart),null;this.inputPosition+=1;var b=this.input.readByte();if(0!=(1&b))return e(this.inputPosition=i.pageStart),null;b>>=1;var y=p-1,x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(p<=(b&=(1<<(y<16384?y<16?x[y]:y<512?5+x[y>>5]:10+x[y>>10]:y<16777216?y<524288?15+x[y>>15]:20+x[y>>20]:y<536870912?25+x[y>>25]:y<-2147483648?30+x[y>>30]:0))-1))return e(this.inputPosition=i.pageStart),null;n[f++]=t.modes[b].blockflag;var T=c[w]-1;this.inputPosition+=T;for(var S=new Array(T),E=0,B=T;E<B;){S[E++]=this.input.readByte()}}else{var k=c[w];this.inputPosition+=k;for(var I=new Array(k),C=0,L=k;C<L;){I[C++]=this.input.readByte()}}g=c[w]<255}var N=0;1<f&&(N+=n[f-1]?t.blocksize1:t.blocksize0);for(var F=f-2;1<=F;)n[--F]?n[F+1]?N+=t.blocksize1>>1:N+=(t.blocksize1-t.blocksize0>>2)+(t.blocksize0>>1):N+=t.blocksize0>>1,--F;return i.firstDecodedSample=i.lastDecodedSample-N,e(this.inputPosition=i.pageStart),i},decodeScalarRaw:function(e){this.prepHuffman();var t=e.codewordLengths,i=e.codewords,n=e.sortedCodewords;if(8<e.entries?null!=n:null!=i){for(var r=this.acc,s=(r=(-16711936&(r=(-252645136&(r=(-858993460&(r=(-1431655766&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8)>>>16|r<<16,a=0,o=e.sortedEntries;1<o;){var l=a+(o>>1);Me.gte(s,n[l])?(a=l,o-=o>>1):o>>=1}e.sparse||(a=e.sortedValues[a]);var u=t[a];return this.validBits>=u?(this.acc=this.acc>>>u,this.validBits-=u,a):(this.validBits=0,-1)}for(var h=0,c=e.entries;h<c;){var A=h++,d=t[A];if(255!=d&&i[A]==(this.acc&(1<<d)-1))return this.validBits>=d?(this.acc=this.acc>>>d,this.validBits-=d,A):(this.validBits=0,-1)}return this.error=new Xe(Ye.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}),this.validBits=0,-1},__class__:xe};var Te=f["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:!0,__constructs__:["Found","NotFound"],Found:((t=function(e,t){return{_hx_index:0,end:e,last:t,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:i}}).__params__=["end","last"],t),NotFound:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:i}},Se=function(e,t){this.header=e,this.decodeState=t,this.totalSample=null,this.currentSample=0,this.previousLength=0;var i=new Array(e.channel);this.channelBuffers=i;var n=new Array(e.channel);this.previousWindow=n;var r=new Array(e.channel);this.finalY=r;for(var s=0,a=e.channel;s<a;){var o=s++,l=this.channelBuffers,u=new Array(e.blocksize1);l[o]=u;var h=this.previousWindow,c=new Array(e.blocksize1/2|0);h[o]=c,this.finalY[o]=[]}var A=new Array(2);this.a=A;var d=new Array(2);this.b=d;var _=new Array(2);this.c=_;var f=new Array(2);this.window=f;var g=new Array(2);this.bitReverseData=g,this.initBlocksize(0,e.blocksize0),this.initBlocksize(1,e.blocksize1)};(x["kha.audio2.ogg.vorbis.VorbisDecoder"]=Se).__name__=!0,Se.start=function(e){var t=new xe(e),i=Ne.read(t),n=new Se(i,t);return t.startFirstDecode(),n.pumpFirstFrame(),n},Se.prototype={previousWindow:null,previousLength:null,finalY:null,a:null,b:null,c:null,window:null,bitReverseData:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,header:null,currentSample:null,totalSample:null,decodeState:null,read:function(e,t,i,n,r){var s=this.header.sampleRate;if(0!=(Me.toFloat(n)%Me.toFloat(s)|0)){var a=this.header.sampleRate;throw new ft("Unsupported sampleRate : can't convert "+st.string(null==a?null:Me.toFloat(a))+" to "+n)}if(i%this.header.channel!=0)throw new ft("Unsupported channels : can't convert "+this.header.channel+" to "+i);var o=this.header.sampleRate,l=Me.toFloat(n)/Me.toFloat(o)|0,u=i/this.header.channel|0,h=0,c=Math.floor(t/l);null!=this.totalSample&&c>this.totalSample-this.currentSample&&(c=this.totalSample-this.currentSample);for(var A=0;h<c;){var d=this.channelBufferEnd-this.channelBufferStart;c-h<=d&&(d=c-h);for(var _=this.channelBufferStart,f=this.channelBufferStart+d;_<f;)for(var g=_++,p=0,m=l;p<m;){p++;for(var v=0,w=this.header.channel;v<w;)for(var b=v++,y=0,x=u;y<x;){y++;var T=this.channelBuffers[b][g];1<T?T=1:T<-1&&(T=-1),r&&(e[A]=T,++A)}}if(h+=d,this.channelBufferStart+=d,h==c||0==this.getFrameFloat())break}for(var S=h,E=c;S<E;){S++;for(var B=0,k=l;B<k;){B++;for(var I=0,C=this.header.channel;I<C;){I++;for(var L=0,N=u;L<N;){L++;r&&(e[A]=0,++A)}}}}return this.currentSample+=c,c*l},skipSamples:function(e){var t=0;for(null!=this.totalSample&&e>this.totalSample-this.currentSample&&(e=this.totalSample-this.currentSample);t<e;){var i=this.channelBufferEnd-this.channelBufferStart;if(e-t<=i&&(i=e-t),t+=i,this.channelBufferStart+=i,t==e||0==this.getFrameFloat())break}return this.currentSample+=e,e},setupSampleNumber:function(e,t){null==this.totalSample&&(this.totalSample=this.decodeState.getSampleNumber(e,t))},seek:function(e,t,i){if(this.currentSample!=i){if(null==this.totalSample&&(this.setupSampleNumber(e,t),0==this.totalSample))throw new ft(new Xe(Ye.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));i<0&&(i=0);var n=this.decodeState.pFirst,r=this.decodeState.pLast;if(i>=r.lastDecodedSample&&(i=r.lastDecodedSample-1),i<n.lastDecodedSample)this.seekFrameFromPage(e,n.pageStart,0,i);else{for(var s=0;n.pageEnd<r.pageStart;){var a=n.pageEnd,o=r.afterPreviousPageStart,l=n.lastDecodedSample,u=r.lastDecodedSample;if(null==l||null==u)throw new ft(new Xe(Ye.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));Me.gt(o,a+4e3)&&(o-=4e3);var h=a+Math.floor(Me.toFloat(o-a)/Me.toFloat(u-l)*(i-l));if(4<=s){var c=a+(o-a>>>1);h=8<=s?c:Me.gt(c,h)?h+(c-h>>>1):c+(h-c>>>1)}++s,e(this.decodeState.inputPosition=h);var A=this.decodeState.findPage(e,t);switch(A._hx_index){case 0:A.last,A.end;break;case 1:throw new ft(new Xe(Ye.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}var d=this.decodeState.analyzePage(e,this.header);if(null==d)throw new ft(new Xe(Ye.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));d.afterPreviousPageStart=h,d.pageStart!=r.pageStart?i<d.lastDecodedSample?r=d:n=d:r=d}if(!(n.lastDecodedSample<=i&&i<r.lastDecodedSample))throw new ft(new Xe(Ye.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));this.seekFrameFromPage(e,r.pageStart,n.lastDecodedSample,i)}}},seekFrameFromPage:function(e,t,i,n){var r=0,s=i;e(this.decodeState.inputPosition=t),this.decodeState.nextSeg=-1;for(var a=0,o=0,l=null,u=null;;){l=u,u=this.decodeState.clone(e);var h=this.decodeInitial();if(null==h){u=l;break}o=h.left.start,a=h.left.end;var c=0==r?a:o;if(n<s+h.right.start-c)break;for(var A=this.decodeState;0!=A.bytesInSeg||!A.lastSeg&&0!=A.next();)A.bytesInSeg--,A.inputPosition+=1,A.input.readByte();s+=h.right.start-c,++r}this.decodeState=u,e(this.decodeState.inputPosition),this.previousLength=0,this.pumpFirstFrame(),this.currentSample=s,this.skipSamples(n-s)},clone:function(e){var t=Object.create(Se.prototype);t.currentSample=this.currentSample,t.totalSample=this.totalSample,t.previousLength=this.previousLength,t.channelBufferStart=this.channelBufferStart,t.channelBufferEnd=this.channelBufferEnd,t.a=this.a,t.b=this.b,t.c=this.c,t.window=this.window,t.bitReverseData=this.bitReverseData,t.header=this.header,t.decodeState=this.decodeState.clone(e);var i=new Array(this.header.channel);t.channelBuffers=i;var n=new Array(this.header.channel);t.previousWindow=n;var r=new Array(this.header.channel);t.finalY=r;for(var s=0,a=this.header.channel;s<a;){var o=s++;t.channelBuffers[o]=Ee.copyVector(this.channelBuffers[o]),t.previousWindow[o]=Ee.copyVector(this.previousWindow[o]),t.finalY[o]=l.array(this.finalY[o])}return t},ensurePosition:function(e){e(this.decodeState.inputPosition)},getFrameFloat:function(){var e=this.decodePacket();if(null==e)return this.channelBufferStart=this.channelBufferEnd=0,0;var t=this.finishFrame(e);return this.channelBufferStart=e.left,this.channelBufferEnd=e.left+t,t},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(e){var t=e.len,i=e.right,n=e.left;if(0!=this.previousLength)for(var r=this.previousLength,s=this.getWindow(r),a=0,o=this.header.channel;a<o;)for(var l=a++,u=this.channelBuffers[l],h=this.previousWindow[l],c=0,A=r;c<A;){var d=c++;u[n+d]=u[n+d]*s[d]+h[d]*s[r-1-d]}var _=this.previousLength;this.previousLength=t-i;for(var f=0,g=this.header.channel;f<g;)for(var p=f++,m=this.previousWindow[p],v=this.channelBuffers[p],w=0,b=t-i;w<b;){var y=w++;m[y]=v[i+y]}return 0==_?0:(t<i&&(i=t),i-n)},getWindow:function(e){return(e<<=1)==this.header.blocksize0?this.window[0]:e==this.header.blocksize1?this.window[1]:null},initBlocksize:function(e,t){var i=t>>1,n=t>>2,r=t>>3,s=this.a,a=new Array(i);s[e]=a;var o=this.b,l=new Array(i);o[e]=l;var u=this.c,h=new Array(n);u[e]=h;var c=this.window,A=new Array(i);c[e]=A;var d=this.bitReverseData,_=new Array(r);d[e]=_,Ee.computeTwiddleFactors(t,this.a[e],this.b[e],this.c[e]),Ee.computeWindow(t,this.window[e]),Ee.computeBitReverse(t,this.bitReverseData[e])},inverseMdct:function(e,t,i){for(var n=i?1:0,r=this.a[n],s=this.b[n],a=this.c[n],o=this.bitReverseData[n],l=t>>1,u=t>>2,h=t>>3,c=new Array(l),A=l-2,d=0,_=0,f=l;_!=f;)c[A+1]=e[_]*r[d]-e[_+2]*r[d+1],c[A]=e[_]*r[d+1]+e[_+2]*r[d],A-=2,d+=2,_+=4;for(_=l-3;0<=A;)c[A+1]=-e[_+2]*r[d]- -e[_]*r[d+1],c[A]=-e[_+2]*r[d+1]+-e[_]*r[d],A-=2,d+=2,_-=4;for(var g=e,p=c,m=l-8,v=u,w=0,b=u,y=0;0<=m;){var x=p[v+1]-p[w+1],T=p[v]-p[w];g[b+1]=p[v+1]+p[w+1],g[b]=p[v]+p[w],g[y+1]=x*r[m+4]-T*r[m+5],g[y]=T*r[m+4]+x*r[m+5],x=p[v+3]-p[w+3],T=p[v+2]-p[w+2],g[b+3]=p[v+3]+p[w+3],g[b+2]=p[v+2]+p[w+2],g[y+3]=x*r[m]-T*r[m+1],g[y+2]=T*r[m]+x*r[m+1],m-=8,b+=4,y+=4,v+=4,w+=4}for(var S=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],E=(t<16384?t<16?S[t]:t<512?5+S[t>>5]:10+S[t>>10]:t<16777216?t<524288?15+S[t>>15]:20+S[t>>20]:t<536870912?25+S[t>>25]:t<-2147483648?30+S[t>>30]:0)-1,B=l-1-0*u,k=B,I=B-(t>>3),C=0,L=1+(t>>4>>2);0<--L;){var N=g[k]-g[I],F=g[k+-1]-g[I+-1];g[k]=g[k]+g[I];var P=k+-1;g[P]=g[P]+g[I+-1],g[I]=N*r[C]-F*r[C+1],g[I+-1]=F*r[C]+N*r[C+1],C+=8,N=g[k+-2]-g[I+-2],F=g[k+-3]-g[I+-3];var M=k+-2;g[M]=g[M]+g[I+-2];var R=k+-3;g[R]=g[R]+g[I+-3],g[I+-2]=N*r[C]-F*r[C+1],g[I+-3]=F*r[C]+N*r[C+1],C+=8,N=g[k+-4]-g[I+-4],F=g[k+-5]-g[I+-5];var O=k+-4;g[O]=g[O]+g[I+-4];var V=k+-5;g[V]=g[V]+g[I+-5],g[I+-4]=N*r[C]-F*r[C+1],g[I+-5]=F*r[C]+N*r[C+1],C+=8,N=g[k+-6]-g[I+-6],F=g[k+-7]-g[I+-7];var D=k+-6;g[D]=g[D]+g[I+-6];var U=k+-7;g[U]=g[U]+g[I+-7],g[I+-6]=N*r[C]-F*r[C+1],g[I+-7]=F*r[C]+N*r[C+1],C+=8,k-=8,I-=8}for(var H=l-1-u,W=H,G=H-(t>>3),z=0,X=1+(t>>4>>2);0<--X;){var Y=g[W]-g[G],K=g[W+-1]-g[G+-1];g[W]=g[W]+g[G];var Q=W+-1;g[Q]=g[Q]+g[G+-1],g[G]=Y*r[z]-K*r[z+1],g[G+-1]=K*r[z]+Y*r[z+1],z+=8,Y=g[W+-2]-g[G+-2],K=g[W+-3]-g[G+-3];var q=W+-2;g[q]=g[q]+g[G+-2];var j=W+-3;g[j]=g[j]+g[G+-3],g[G+-2]=Y*r[z]-K*r[z+1],g[G+-3]=K*r[z]+Y*r[z+1],z+=8,Y=g[W+-4]-g[G+-4],K=g[W+-5]-g[G+-5];var Z=W+-4;g[Z]=g[Z]+g[G+-4];var J=W+-5;g[J]=g[J]+g[G+-5],g[G+-4]=Y*r[z]-K*r[z+1],g[G+-5]=K*r[z]+Y*r[z+1],z+=8,Y=g[W+-6]-g[G+-6],K=g[W+-7]-g[G+-7];var $=W+-6;g[$]=g[$]+g[G+-6];var ee=W+-7;g[ee]=g[ee]+g[G+-7],g[G+-6]=Y*r[z]-K*r[z+1],g[G+-7]=K*r[z]+Y*r[z+1],z+=8,W-=8,G-=8}for(var te=l-1-0*h,ie=0,ne=te,re=te-(t>>4),se=1+(t>>5>>2);0<--se;){var ae=g[ne]-g[re],oe=g[ne+-1]-g[re+-1];g[ne]=g[ne]+g[re];var le=ne+-1;g[le]=g[le]+g[re+-1],g[re]=ae*r[ie]-oe*r[ie+1],g[re+-1]=oe*r[ie]+ae*r[ie+1],ie+=16,ae=g[ne+-2]-g[re+-2],oe=g[ne+-3]-g[re+-3];var ue=ne+-2;g[ue]=g[ue]+g[re+-2];var he=ne+-3;g[he]=g[he]+g[re+-3],g[re+-2]=ae*r[ie]-oe*r[ie+1],g[re+-3]=oe*r[ie]+ae*r[ie+1],ie+=16,ae=g[ne+-4]-g[re+-4],oe=g[ne+-5]-g[re+-5];var ce=ne+-4;g[ce]=g[ce]+g[re+-4];var Ae=ne+-5;g[Ae]=g[Ae]+g[re+-5],g[re+-4]=ae*r[ie]-oe*r[ie+1],g[re+-5]=oe*r[ie]+ae*r[ie+1],ie+=16,ae=g[ne+-6]-g[re+-6],oe=g[ne+-7]-g[re+-7];var de=ne+-6;g[de]=g[de]+g[re+-6];var _e=ne+-7;g[_e]=g[_e]+g[re+-7],g[re+-6]=ae*r[ie]-oe*r[ie+1],g[re+-7]=oe*r[ie]+ae*r[ie+1],ne-=8,re-=8,ie+=16}for(var fe=l-1-h,ge=0,pe=fe,me=fe-(t>>4),ve=1+(t>>5>>2);0<--ve;){var we=g[pe]-g[me],be=g[pe+-1]-g[me+-1];g[pe]=g[pe]+g[me];var ye=pe+-1;g[ye]=g[ye]+g[me+-1],g[me]=we*r[ge]-be*r[ge+1],g[me+-1]=be*r[ge]+we*r[ge+1],ge+=16,we=g[pe+-2]-g[me+-2],be=g[pe+-3]-g[me+-3];var xe=pe+-2;g[xe]=g[xe]+g[me+-2];var Te=pe+-3;g[Te]=g[Te]+g[me+-3],g[me+-2]=we*r[ge]-be*r[ge+1],g[me+-3]=be*r[ge]+we*r[ge+1],ge+=16,we=g[pe+-4]-g[me+-4],be=g[pe+-5]-g[me+-5];var Se=pe+-4;g[Se]=g[Se]+g[me+-4];var Ee=pe+-5;g[Ee]=g[Ee]+g[me+-5],g[me+-4]=we*r[ge]-be*r[ge+1],g[me+-5]=be*r[ge]+we*r[ge+1],ge+=16,we=g[pe+-6]-g[me+-6],be=g[pe+-7]-g[me+-7];var Be=pe+-6;g[Be]=g[Be]+g[me+-6];var ke=pe+-7;g[ke]=g[ke]+g[me+-7],g[me+-6]=we*r[ge]-be*r[ge+1],g[me+-7]=be*r[ge]+we*r[ge+1],pe-=8,me-=8,ge+=16}for(var Ie=l-1-2*h,Ce=0,Le=Ie,Ne=Ie-(t>>4),Fe=1+(t>>5>>2);0<--Fe;){var Pe=g[Le]-g[Ne],Me=g[Le+-1]-g[Ne+-1];g[Le]=g[Le]+g[Ne];var Re=Le+-1;g[Re]=g[Re]+g[Ne+-1],g[Ne]=Pe*r[Ce]-Me*r[Ce+1],g[Ne+-1]=Me*r[Ce]+Pe*r[Ce+1],Ce+=16,Pe=g[Le+-2]-g[Ne+-2],Me=g[Le+-3]-g[Ne+-3];var Oe=Le+-2;g[Oe]=g[Oe]+g[Ne+-2];var Ve=Le+-3;g[Ve]=g[Ve]+g[Ne+-3],g[Ne+-2]=Pe*r[Ce]-Me*r[Ce+1],g[Ne+-3]=Me*r[Ce]+Pe*r[Ce+1],Ce+=16,Pe=g[Le+-4]-g[Ne+-4],Me=g[Le+-5]-g[Ne+-5];var De=Le+-4;g[De]=g[De]+g[Ne+-4];var Ue=Le+-5;g[Ue]=g[Ue]+g[Ne+-5],g[Ne+-4]=Pe*r[Ce]-Me*r[Ce+1],g[Ne+-5]=Me*r[Ce]+Pe*r[Ce+1],Ce+=16,Pe=g[Le+-6]-g[Ne+-6],Me=g[Le+-7]-g[Ne+-7];var He=Le+-6;g[He]=g[He]+g[Ne+-6];var We=Le+-7;g[We]=g[We]+g[Ne+-7],g[Ne+-6]=Pe*r[Ce]-Me*r[Ce+1],g[Ne+-7]=Me*r[Ce]+Pe*r[Ce+1],Le-=8,Ne-=8,Ce+=16}for(var Ge=l-1-3*h,ze=0,Xe=Ge,Ye=Ge-(t>>4),Ke=1+(t>>5>>2);0<--Ke;){var Qe=g[Xe]-g[Ye],qe=g[Xe+-1]-g[Ye+-1];g[Xe]=g[Xe]+g[Ye];var je=Xe+-1;g[je]=g[je]+g[Ye+-1],g[Ye]=Qe*r[ze]-qe*r[ze+1],g[Ye+-1]=qe*r[ze]+Qe*r[ze+1],ze+=16,Qe=g[Xe+-2]-g[Ye+-2],qe=g[Xe+-3]-g[Ye+-3];var Ze=Xe+-2;g[Ze]=g[Ze]+g[Ye+-2];var Je=Xe+-3;g[Je]=g[Je]+g[Ye+-3],g[Ye+-2]=Qe*r[ze]-qe*r[ze+1],g[Ye+-3]=qe*r[ze]+Qe*r[ze+1],ze+=16,Qe=g[Xe+-4]-g[Ye+-4],qe=g[Xe+-5]-g[Ye+-5];var $e=Xe+-4;g[$e]=g[$e]+g[Ye+-4];var et=Xe+-5;g[et]=g[et]+g[Ye+-5],g[Ye+-4]=Qe*r[ze]-qe*r[ze+1],g[Ye+-5]=qe*r[ze]+Qe*r[ze+1],ze+=16,Qe=g[Xe+-6]-g[Ye+-6],qe=g[Xe+-7]-g[Ye+-7];var tt=Xe+-6;g[tt]=g[tt]+g[Ye+-6];var it=Xe+-7;g[it]=g[it]+g[Ye+-7],g[Ye+-6]=Qe*r[ze]-qe*r[ze+1],g[Ye+-7]=qe*r[ze]+Qe*r[ze+1],Xe-=8,Ye-=8,ze+=16}for(var nt=2,rt=E-3>>1;nt<rt;)for(var st=nt++,at=t>>2+st,ot=at>>1,lt=0,ut=1<<1+st;lt<ut;)for(var ht=l-1-at*lt++,ct=1<<3+st,At=0,dt=ht,_t=ht-ot,ft=1+(t>>4+st>>2);0<--ft;){var gt=g[dt]-g[_t],pt=g[dt+-1]-g[_t+-1];g[dt]=g[dt]+g[_t];var mt=dt+-1;g[mt]=g[mt]+g[_t+-1],g[_t]=gt*r[At]-pt*r[At+1],g[_t+-1]=pt*r[At]+gt*r[At+1],At+=ct,gt=g[dt+-2]-g[_t+-2],pt=g[dt+-3]-g[_t+-3];var vt=dt+-2;g[vt]=g[vt]+g[_t+-2];var wt=dt+-3;g[wt]=g[wt]+g[_t+-3],g[_t+-2]=gt*r[At]-pt*r[At+1],g[_t+-3]=pt*r[At]+gt*r[At+1],At+=ct,gt=g[dt+-4]-g[_t+-4],pt=g[dt+-5]-g[_t+-5];var bt=dt+-4;g[bt]=g[bt]+g[_t+-4];var yt=dt+-5;g[yt]=g[yt]+g[_t+-5],g[_t+-4]=gt*r[At]-pt*r[At+1],g[_t+-5]=pt*r[At]+gt*r[At+1],At+=ct,gt=g[dt+-6]-g[_t+-6],pt=g[dt+-7]-g[_t+-7];var xt=dt+-6;g[xt]=g[xt]+g[_t+-6];var Tt=dt+-7;g[Tt]=g[Tt]+g[_t+-7],g[_t+-6]=gt*r[At]-pt*r[At+1],g[_t+-7]=pt*r[At]+gt*r[At+1],dt-=8,_t-=8,At+=ct}for(var St=E-3>>1,Et=E-6;St<Et;)for(var Bt=St++,kt=t>>2+Bt,It=1<<3+Bt,Ct=kt>>1,Lt=1<<1+Bt,Nt=0,Ft=l-1,Pt=1+(t>>6+Bt);0<--Pt;){for(var Mt=r[Nt],Rt=r[Nt+1],Ot=r[Nt+It],Vt=r[Nt+It+1],Dt=r[Nt+2*It],Ut=r[Nt+2*It+1],Ht=r[Nt+3*It],Wt=r[Nt+3*It+1],Gt=Ft,zt=Ft+-Ct,Xt=1+Lt;0<--Xt;){var Yt=g[Gt]-g[zt],Kt=g[Gt+-1]-g[zt+-1];g[Gt]=g[Gt]+g[zt],g[Gt+-1]=g[Gt+-1]+g[zt+-1],g[zt]=Yt*Mt-Kt*Rt,g[zt+-1]=Kt*Mt+Yt*Rt,Yt=g[Gt+-2]-g[zt+-2],Kt=g[Gt+-3]-g[zt+-3],g[Gt+-2]=g[Gt+-2]+g[zt+-2],g[Gt+-3]=g[Gt+-3]+g[zt+-3],g[zt+-2]=Yt*Ot-Kt*Vt,g[zt+-3]=Kt*Ot+Yt*Vt,Yt=g[Gt+-4]-g[zt+-4],Kt=g[Gt+-5]-g[zt+-5],g[Gt+-4]=g[Gt+-4]+g[zt+-4],g[Gt+-5]=g[Gt+-5]+g[zt+-5],g[zt+-4]=Yt*Dt-Kt*Ut,g[zt+-5]=Kt*Dt+Yt*Ut,Yt=g[Gt+-6]-g[zt+-6],Kt=g[Gt+-7]-g[zt+-7],g[Gt+-6]=g[Gt+-6]+g[zt+-6],g[Gt+-7]=g[Gt+-7]+g[zt+-7],g[zt+-6]=Yt*Ht-Kt*Wt,g[zt+-7]=Kt*Ht+Yt*Wt,Gt-=kt,zt-=kt}Nt+=4*It,Ft-=8}for(var Qt=l-1,qt=r[t>>3],jt=Qt,Zt=Qt-16*(t>>5);Zt<jt;){var Jt=g[jt],$t=g[jt+-8];g[jt+-8]=Jt-$t,g[jt]=Jt+$t,Jt=g[jt+-1],$t=g[jt+-9],g[jt+-9]=Jt-$t,g[jt+-1]=Jt+$t;var ei=(Jt=g[jt+-2])-($t=g[jt+-10]);g[jt+-2]=Jt+$t;var ti=(Jt=g[jt+-3])-($t=g[jt+-11]);g[jt+-3]=Jt+$t,g[jt+-10]=(ei+ti)*qt,g[jt+-11]=(ti-ei)*qt,Jt=g[jt+-4],ei=($t=g[jt+-12])-Jt,g[jt+-4]=Jt+$t,ti=(Jt=g[jt+-5])-($t=g[jt+-13]),g[jt+-5]=Jt+$t,g[jt+-12]=ti,g[jt+-13]=ei,Jt=g[jt+-6],ei=($t=g[jt+-14])-Jt,g[jt+-6]=Jt+$t,ti=(Jt=g[jt+-7])-($t=g[jt+-15]),g[jt+-7]=Jt+$t,g[jt+-14]=(ei+ti)*qt,g[jt+-15]=(ei-ti)*qt;var ii=g[jt],ni=g[jt+-4],ri=ii-ni,si=ii+ni,ai=(ii=g[jt+-2])+(ni=g[jt+-6]),oi=ii-ni;g[jt]=si+ai,g[jt+-2]=si-ai;var li=g[jt+-3]-g[jt+-7];g[jt+-4]=ri+li,g[jt+-6]=ri-li;var ui=(ii=g[jt+-1])-(ni=g[jt+-5]),hi=ii+ni,ci=g[jt+-3]+g[jt+-7];g[jt+-1]=hi+ci,g[jt+-3]=hi-ci,g[jt+-5]=ui-oi,g[jt+-7]=ui+oi;var Ai=jt-8,di=g[Ai],_i=g[Ai-4],fi=di-_i,gi=di+_i,pi=(di=g[Ai-2])+(_i=g[Ai-6]),mi=di-_i;g[Ai]=gi+pi,g[Ai-2]=gi-pi;var vi=g[Ai-3]-g[Ai-7];g[Ai-4]=fi+vi,g[Ai-6]=fi-vi;var wi=(di=g[Ai-1])-(_i=g[Ai-5]),bi=di+_i,yi=g[Ai-3]+g[Ai-7];g[Ai-1]=bi+yi,g[Ai-3]=bi-yi,g[Ai-5]=wi-mi,g[Ai-7]=wi+mi,jt-=16}for(var xi=0,Ti=u-4,Si=l-4;0<=Ti;){var Ei=o[xi];p[Si+3]=g[Ei],p[Si+2]=g[Ei+1],p[Ti+3]=g[Ei+2],p[Ti+2]=g[Ei+3],Ei=o[xi+1],p[Si+1]=g[Ei],p[Si]=g[Ei+1],p[Ti+1]=g[Ei+2],p[Ti]=g[Ei+3],Ti-=4,Si-=4,xi+=2}for(var Bi=0,ki=0,Ii=l-4;ki<Ii;){var Ci=p[ki]-p[Ii+2],Li=p[ki+1]+p[Ii+3],Ni=a[Bi+1]*Ci+a[Bi]*Li,Fi=a[Bi+1]*Li-a[Bi]*Ci,Pi=p[ki]+p[Ii+2],Mi=p[ki+1]-p[Ii+3];p[ki]=Pi+Ni,p[ki+1]=Mi+Fi,p[Ii+2]=Pi-Ni,p[Ii+3]=Fi-Mi,Ci=p[ki+2]-p[Ii],Li=p[ki+3]+p[Ii+1],Ni=a[Bi+3]*Ci+a[Bi+2]*Li,Fi=a[Bi+3]*Li-a[Bi+2]*Ci,Pi=p[ki+2]+p[Ii],Mi=p[ki+3]-p[Ii+1],p[ki+2]=Pi+Ni,p[ki+3]=Mi+Fi,p[Ii]=Pi-Ni,p[Ii+1]=Fi-Mi,Bi+=4,ki+=4,Ii-=4}for(var Ri=l-8,Oi=l-8,Vi=0,Di=l-4,Ui=l,Hi=t-4;0<=Oi;){var Wi=c[Oi+6]*s[Ri+7]-c[Oi+7]*s[Ri+6],Gi=-c[Oi+6]*s[Ri+6]-c[Oi+7]*s[Ri+7];e[Vi]=Wi,e[Di+3]=-Wi,e[Ui]=Gi,e[Hi+3]=Gi;var zi=c[Oi+4]*s[Ri+5]-c[Oi+5]*s[Ri+4],Xi=-c[Oi+4]*s[Ri+4]-c[Oi+5]*s[Ri+5];e[Vi+1]=zi,e[Di+2]=-zi,e[Ui+1]=Xi,e[Hi+2]=Xi,Wi=c[Oi+2]*s[Ri+3]-c[Oi+3]*s[Ri+2],Gi=-c[Oi+2]*s[Ri+2]-c[Oi+3]*s[Ri+3],e[Vi+2]=Wi,e[Di+1]=-Wi,e[Ui+2]=Gi,e[Hi+1]=Gi,zi=c[Oi]*s[Ri+1]-c[Oi+1]*s[Ri],Xi=-c[Oi]*s[Ri]-c[Oi+1]*s[Ri+1],e[Vi+3]=zi,e[Di]=-zi,e[Ui+3]=Xi,e[Hi]=Xi,Ri-=8,Oi-=8,Vi+=4,Ui+=4,Di-=4,Hi-=4}},decodePacket:function(){var e=this.decodeInitial();return null==e?null:this.decodePacketRest(e)},decodeInitial:function(){for(this.channelBufferStart=this.channelBufferEnd=0;;){if(!this.decodeState.maybeStartPacket())return null;if(0==this.decodeState.readBits(1))break;for(;;){var e,t=this.decodeState;if(e=0!=t.bytesInSeg||!t.lastSeg&&0!=t.next()?(t.bytesInSeg--,t.inputPosition+=1,t.input.readByte()):-1,t.validBits=0,-1==e)break}}var i=this.header.modes.length-1,n=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],r=this.decodeState.readBits(i<16384?i<16?n[i]:i<512?5+n[i>>5]:10+n[i>>10]:i<16777216?i<524288?15+n[i>>15]:20+n[i>>20]:i<536870912?25+n[i>>25]:i<-2147483648?30+n[i>>30]:0);if(-1==r||r>=this.header.modes.length)throw new ft(new Xe(Ye.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}));var s,a,o,l=this.header.modes[r];l.blockflag?(s=this.header.blocksize1,a=this.decodeState.readBits(1),o=this.decodeState.readBits(1)):(a=o=0,s=this.header.blocksize0);var u=s>>1;return{mode:r,left:l.blockflag&&0==a?{start:s-this.header.blocksize0>>2,end:s+this.header.blocksize0>>2}:{start:0,end:u},right:l.blockflag&&0==o?{start:3*s-this.header.blocksize0>>2,end:3*s+this.header.blocksize0>>2}:{start:u,end:s}}},decodePacketRest:function(e){for(var t=this.header.modes[e.mode],i=new Array(256),n=new Array(256),r=t.blockflag?this.header.blocksize1:this.header.blocksize0,s=this.header.mapping[t.mapping],a=r>>1,o=[256,128,86,64],l=this.header.codebooks,u=0,h=this.header.channel;u<h;){var c=u++,A=s.chan[c].mux;i[c]=!1;var d=this.header.floorConfig[s.submapFloor[A]];if(0==d.type)throw new ft(new Xe(Ye.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}));var _=d.floor1;if(0!=this.decodeState.readBits(1)){var f=[],g=new Array(256),p=o[_.floor1Multiplier-1],m=2,v=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];(f=this.finalY[c])[0]=this.decodeState.readBits((p<16384?p<16?v[p]:p<512?5+v[p>>5]:10+v[p>>10]:p<16777216?p<524288?15+v[p>>15]:20+v[p>>20]:p<536870912?25+v[p>>25]:p<-2147483648?30+v[p>>30]:0)-1);var w=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];f[1]=this.decodeState.readBits((p<16384?p<16?w[p]:p<512?5+w[p>>5]:10+w[p>>10]:p<16777216?p<524288?15+w[p>>15]:20+w[p>>20]:p<536870912?25+w[p>>25]:p<-2147483648?30+w[p>>30]:0)-1);for(var b=0,y=_.partitions;b<y;){var x=b++,T=_.partitionClassList[x],S=_.classDimensions[T],E=_.classSubclasses[T],B=(1<<E)-1,k=0;if(0!=E){var I=l[_.classMasterbooks[T]],C=this.decodeState;C.validBits<10&&C.prepHuffman();var L,N=I.fastHuffman[1023&C.acc];if(0<=N){var F=I.codewordLengths[N];C.acc=C.acc>>>F,C.validBits-=F,L=C.validBits<0?(C.validBits=0,-1):N}else L=C.decodeScalarRaw(I);I.sparse&&(L=I.sortedValues[L]),k=L}for(var P=_.subclassBooks[T],M=0,R=S;M<R;){M++;var O=P[k&B];k>>=E;var V,D=m++;if(0<=O){var U=this.decodeState,H=l[O];U.validBits<10&&U.prepHuffman();var W,G=H.fastHuffman[1023&U.acc];if(0<=G){var z=H.codewordLengths[G];U.acc=U.acc>>>z,U.validBits-=z,W=U.validBits<0?(U.validBits=0,-1):G}else W=U.decodeScalarRaw(H);H.sparse&&(W=H.sortedValues[W]),V=W}else V=0;f[D]=V}}if(-1==this.decodeState.validBits){i[c]=!0;continue}g[0]=g[1]=!0;for(var X=_.neighbors,Y=_.xlist,K=2,Q=_.values;K<Q;){var q=K++,j=X[q][0],Z=X[q][1],J=Y[j],$=f[j],ee=f[Z]-$,te=Y[Z]-J,ie=Math.abs(ee)*(Y[q]-J)/te|0,ne=ee<0?$-ie:$+ie,re=f[q],se=p-ne,ae=se<ne?2*se:2*ne;0!=re?(g[j]=g[Z]=!0,g[q]=!0,f[q]=ae<=re?ne<se?re-ne+ne:ne-re+se-1:0!=(1&re)?ne-(re+1>>1):ne+(re>>1)):(g[q]=!1,f[q]=ne)}for(var oe=0,le=_.values;oe<le;){var ue=oe++;g[ue]||(f[ue]=-1)}}else i[c]=!0}for(var he=0,ce=this.header.channel;he<ce;){var Ae=he++;n[Ae]=i[Ae]}for(var de=0,_e=s.couplingSteps;de<_e;){var fe=de++;i[s.chan[fe].magnitude]&&i[s.chan[fe].angle]||(i[s.chan[fe].magnitude]=i[s.chan[fe].angle]=!1)}for(var ge=0,pe=s.submaps;ge<pe;){for(var me=ge++,ve=new Array(this.header.channel),we=new Array(256),be=0,ye=0,xe=this.header.channel;ye<xe;){var Te=ye++;s.chan[Te].mux==me&&(i[Te]?(we[be]=!0,ve[be]=null):(we[be]=!1,ve[be]=this.channelBuffers[Te]),++be)}var Se=s.submapResidue[me];this.header.residueConfig[Se].decode(this.decodeState,this.header,ve,be,a,we,this.channelBuffers)}for(var Ee=s.couplingSteps,Be=r>>1;0<=--Ee;)for(var ke=this.channelBuffers[s.chan[Ee].magnitude],Ie=this.channelBuffers[s.chan[Ee].angle],Ce=0,Le=Be;Ce<Le;){var Ne,Fe,Pe=Ce++;0<ke[Pe]?0<Ie[Pe]?(Fe=ke[Pe],Ne=ke[Pe]-Ie[Pe]):(Ne=ke[Pe],Fe=ke[Pe]+Ie[Pe]):0<Ie[Pe]?(Fe=ke[Pe],Ne=ke[Pe]+Ie[Pe]):(Ne=ke[Pe],Fe=ke[Pe]-Ie[Pe]),ke[Pe]=Fe,Ie[Pe]=Ne}for(var Me=0,Re=this.header.channel;Me<Re;){var Oe=Me++;if(n[Oe])for(var Ve=0,De=Be;Ve<De;){var Ue=Ve++;this.channelBuffers[Oe][Ue]=0}else s.doFloor(this.header.floorConfig,Oe,r,this.channelBuffers[Oe],this.finalY[Oe],null)}for(var He=0,We=this.header.channel;He<We;){var Ge=He++;this.inverseMdct(this.channelBuffers[Ge],r,t.blockflag)}for(var ze=this.decodeState;0!=ze.bytesInSeg||!ze.lastSeg&&0!=ze.next();)ze.bytesInSeg--,ze.inputPosition+=1,ze.input.readByte();return this.decodeState.finishDecodePacket(this.previousLength,r,e)},__class__:Se};var Ee=function(){};(x["kha.audio2.ogg.vorbis.VorbisTools"]=Ee).__name__=!0,Ee.assert=function(e,t){},Ee.neighbors=function(e,t){for(var i=-1,n=65536,r=0,s=0,a=0,o=t;a<o;){var l=a++;e[l]>i&&e[l]<e[t]&&(i=e[r=l]),e[l]<n&&e[l]>e[t]&&(n=e[s=l])}return{low:r,high:s}},Ee.floatUnpack=function(e){var t=Me.toFloat(2097151&e),i=(2145386496&e)>>>21;return(0!=(-2147483648&e)?-t:t)*Math.pow(2,i-788)},Ee.bitReverse=function(e){return(e=(-16711936&(e=(-252645136&(e=(-858993460&(e=(-1431655766&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8)>>>16|e<<16},Ee.pointCompare=function(e,t){return e.x<t.x?-1:e.x>t.x?1:0},Ee.uintAsc=function(e,t){return Me.gt(t,e)?-1:e==t?0:1},Ee.lookup1Values=function(e,t){var i=0|Math.exp(Math.log(e)/t);return(0|Math.pow(i+1,t))<=e&&++i,i},Ee.computeWindow=function(e,t){for(var i=e>>1,n=0,r=i;n<r;){var s=n++;t[s]=Math.sin(1.5707963267948966*Ee.square(Math.sin((.5+s)/i*.5*3.141592653589793)))}},Ee.square=function(e){return e*e},Ee.computeBitReverse=function(e,t){for(var i=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],n=(e<16384?e<16?i[e]:e<512?5+i[e>>5]:10+i[e>>10]:e<16777216?e<524288?15+i[e>>15]:20+i[e>>20]:e<536870912?25+i[e>>25]:e<-2147483648?30+i[e>>30]:0)-1,r=0,s=e>>3;r<s;){var a=r++,o=a;o=(-16711936&(o=(-252645136&(o=(-858993460&(o=(-1431655766&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,t[a]=(o>>>16|o<<16)>>>32-n+3<<2}},Ee.computeTwiddleFactors=function(e,t,i,n){for(var r=e>>3,s=0,a=0,o=e>>2;a<o;){var l=a++;t[s]=Math.cos(4*l*3.141592653589793/e),t[s+1]=-Math.sin(4*l*3.141592653589793/e),i[s]=.5*Math.cos(3.141592653589793*(s+1)/e/2),i[s+1]=.5*Math.sin(3.141592653589793*(s+1)/e/2),s+=2}for(var u=0,h=0,c=r;h<c;){h++;n[u]=Math.cos(2*(u+1)*3.141592653589793/e),n[u+1]=-Math.sin(2*(u+1)*3.141592653589793/e),u+=2}},Ee.drawLine=function(e,t,i,n,r,s){if(null==Ee.integerDivideTable){var a=new Array(32);Ee.integerDivideTable=a;for(var o=0;o<32;){var l=o++,u=Ee.integerDivideTable,h=new Array(64);u[l]=h;for(var c=1;c<64;){var A=c++;Ee.integerDivideTable[l][A]=l/A|0}}}var d,_,f=r-i,g=n-t,p=f<0?-f:f,m=t,v=i,w=0;_=g<64&&p<32?f<0?(d=-Ee.integerDivideTable[p][g])-1:(d=Ee.integerDivideTable[p][g])+1:(d=f/g|0,f<0?d-1:d+1),p-=(d<0?-d:d)*g,s<n&&(n=s);e[m]=e[m]*Ee.INVERSE_DB_TABLE[v];for(var b=m+1,y=n;b<y;){var x=b++;g<=(w+=p)?(w-=g,v+=_):v+=d;e[x]=e[x]*Ee.INVERSE_DB_TABLE[v]}},Ee.predictPoint=function(e,t,i,n,r){var s=r-n,a=i-t,o=Math.abs(s)*(e-t)/a|0;return s<0?n-o:n+o},Ee.emptyFloatVector=function(e){return new Array(e)},Ee.copyVector=function(e){for(var t=new Array(e.length),i=0,n=e.length;i<n;){var r=i++;t[r]=e[r]}return t};function Be(){}(x["kha.audio2.ogg.vorbis.data.Codebook"]=Be).__name__=!0,Be.read=function(e){var t=new Be;if(66!=e.readBits(8)||67!=e.readBits(8)||86!=e.readBits(8))throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));var i=e.readBits(8);t.dimensions=(e.readBits(8)<<8)+i;var n=e.readBits(8),r=e.readBits(8);t.entries=(e.readBits(8)<<16)+(r<<8)+n;var s=e.readBits(1);t.sparse=0==s&&0!=e.readBits(1);var a=new Array(t.entries);t.sparse||(t.codewordLengths=a);var o,l=0;if(0!=s)for(var u=0,h=e.readBits(5)+1;u<t.entries;){var c=t.entries-u,A=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],d=e.readBits(c<16384?c<16?A[c]:c<512?5+A[c>>5]:10+A[c>>10]:c<16777216?c<524288?15+A[c>>15]:20+A[c>>20]:c<536870912?25+A[c>>25]:c<-2147483648?30+A[c>>30]:0);if(u+d>t.entries)throw new ft(new Xe(Ye.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));for(var _=0,f=d;_<f;){a[u+_++]=h}u+=d,++h}else for(var g=0,p=t.entries;g<p;){var m=g++;0!=(t.sparse?e.readBits(1):1)?(a[m]=e.readBits(5)+1,++l):a[m]=255}if(t.sparse&&l>=t.entries>>2&&(t.codewordLengths=a,t.sparse=!1),t.sparse)o=l;else{for(var v=0,w=0,b=t.entries;w<b;){var y=a[w++];10<y&&255!=y&&++v}o=v}t.sortedEntries=o;var x=null;if(t.sparse){if(0!=t.sortedEntries){var T=new Array(t.sortedEntries);t.codewordLengths=T;var S=new Array(t.entries);t.codewords=S,x=new Array(t.entries)}t.entries,t.sortedEntries}else{var E=new Array(t.entries);t.codewords=E}if(!t.computeCodewords(a,t.entries,x))throw new ft(new Xe(Ye.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0!=t.sortedEntries){t.sortedCodewords=[];var B=new Array(t.sortedEntries);t.sortedValues=B,t.computeSortedHuffman(a,x)}if(t.sparse&&(x=null,a=t.codewords=null),t.computeAcceleratedHuffman(),t.lookupType=e.readBits(4),2<t.lookupType)throw new ft(new Xe(Ye.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0<t.lookupType){var k=e.readBits(32),I=Me.toFloat(2097151&k),C=(2145386496&k)>>>21,L=0!=(-2147483648&k)?-I:I;t.minimumValue=L*Math.pow(2,C-788);var N=e.readBits(32),F=Me.toFloat(2097151&N),P=(2145386496&N)>>>21,M=0!=(-2147483648&N)?-F:F;t.deltaValue=M*Math.pow(2,P-788),t.valueBits=e.readBits(4)+1,t.sequenceP=0!=e.readBits(1),1==t.lookupType?t.lookupValues=Ee.lookup1Values(t.entries,t.dimensions):t.lookupValues=t.entries*t.dimensions;for(var R=new Array(t.lookupValues),O=0,V=t.lookupValues;O<V;){var D=O++,U=e.readBits(t.valueBits);if(-1==U)throw new ft(new Xe(Ye.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));R[D]=U}var H=new Array(t.lookupValues);t.multiplicands=H;for(var W=0,G=t.lookupValues;W<G;){var z=W++;t.multiplicands[z]=R[z]*t.deltaValue+t.minimumValue}if(2==t.lookupType&&t.sequenceP){for(var X=1,Y=t.lookupValues;X<Y;){var K=X++;t.multiplicands[K]=t.multiplicands[K-1]}t.sequenceP=!1}}return t},Be.prototype={dimensions:null,entries:null,codewordLengths:null,minimumValue:null,deltaValue:null,valueBits:null,lookupType:null,sequenceP:null,sparse:null,lookupValues:null,multiplicands:null,codewords:null,fastHuffman:null,sortedCodewords:null,sortedValues:null,sortedEntries:null,addEntry:function(e,t,i,n,r){this.sparse?(this.codewords[i]=e,this.codewordLengths[i]=n,r[i]=t):this.codewords[t]=e},includeInSort:function(e){return!!this.sparse||255!=e&&10<e},computeCodewords:function(e,t,i){var n=new Array(32);n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=0,n[19]=0,n[20]=0,n[21]=0,n[22]=0,n[23]=0,n[24]=0,n[25]=0,n[26]=0,n[27]=0,n[28]=0,n[29]=0,n[30]=0;for(var r=n[31]=0;r<t&&!(e[r]<255);)++r;if(r==t)return!0;var s=0,a=s++;this.sparse?(this.codewords[a]=0,this.codewordLengths[a]=e[r],i[a]=r):this.codewords[r]=0;for(var o=0;++o<=e[r];)n[o]=1<<32-o;for(o=r;++o<t;){var l=e[o];if(255!=l){for(;0<l&&0==n[l];)--l;if(0==l)return!1;var u=n[l];n[l]=0;var h=u,c=(h=(-16711936&(h=(-252645136&(h=(-858993460&(h=(-1431655766&h)>>>1|(1431655765&h)<<1))>>>2|(858993459&h)<<2))>>>4|(252645135&h)<<4))>>>8|(16711935&h)<<8)>>>16|h<<16,A=s++;if(this.sparse?(this.codewords[A]=c,this.codewordLengths[A]=e[o],i[A]=o):this.codewords[o]=c,l!=e[o])for(var d=e[o];l<d;)n[d]=u+(1<<32-d),--d}}return!0},computeSortedHuffman:function(e,t){if(this.sparse)for(var i=0,n=this.sortedEntries;i<n;){var r=i++,s=this.codewords[r];s=(-16711936&(s=(-252645136&(s=(-858993460&(s=(-1431655766&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,this.sortedCodewords[r]=s>>>16|s<<16}else for(var a=0,o=0,l=this.entries;o<l;){var u=o++,h=e[u];if(this.sparse||255!=h&&10<h){var c=this.codewords[u];c=(-16711936&(c=(-252645136&(c=(-858993460&(c=(-1431655766&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,this.sortedCodewords[a++]=c>>>16|c<<16}}this.sortedCodewords[this.sortedEntries]=-1,this.sortedCodewords.sort(Ee.uintAsc);for(var A=0,d=this.sparse?this.sortedEntries:this.entries;A<d;){var _=A++,f=this.sparse?e[t[_]]:e[_];if(this.sparse||255!=f&&10<f){for(var g=this.codewords[_],p=(g=(-16711936&(g=(-252645136&(g=(-858993460&(g=(-1431655766&g)>>>1|(1431655765&g)<<1))>>>2|(858993459&g)<<2))>>>4|(252645135&g)<<4))>>>8|(16711935&g)<<8)>>>16|g<<16,m=0,v=this.sortedEntries;1<v;){var w=m+(v>>1);Me.gte(p,this.sortedCodewords[w])?(m=w,v-=v>>1):v>>=1}this.sparse?(this.sortedValues[m]=t[_],this.codewordLengths[m]=f):this.sortedValues[m]=_}}},computeAcceleratedHuffman:function(){var e=new Array(1024);this.fastHuffman=e,this.fastHuffman[0]=-1;for(var t=0;t<1024;){var i=t++;this.fastHuffman[i]=-1}for(var n=0,r=this.sparse?this.sortedEntries:this.entries;n<r;){var s=n++;if(this.codewordLengths[s]<=10){var a;if(this.sparse){var o=this.sortedCodewords[s];a=(o=(-16711936&(o=(-252645136&(o=(-858993460&(o=(-1431655766&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8)>>>16|o<<16}else a=this.codewords[s];for(;a<1024;)this.fastHuffman[a]=s,a+=1<<this.codewordLengths[s]}}},codebookDecode:function(e,t,i,n){e.validBits<10&&e.prepHuffman();var r,s=this.fastHuffman[1023&e.acc];if(0<=s){var a=this.codewordLengths[s];e.acc=e.acc>>>a,e.validBits-=a,r=e.validBits<0?(e.validBits=0,-1):s}else r=e.decodeScalarRaw(this);this.sparse&&(r=this.sortedValues[r]);var o=r,l=this.lookupValues,u=this.sequenceP,h=this.multiplicands,c=this.minimumValue;if(o<0)return!1;if(n>this.dimensions&&(n=this.dimensions),1==this.lookupType){for(var A=1,d=0,_=0,f=n;_<f;){var g=_++,p=h[Me.toFloat(o/A|0)%Me.toFloat(l)|0]+d,m=i+g;t[m]=t[m]+p,u&&(d=p+c),A*=l}return!0}if(o*=this.dimensions,u)for(var v=0,w=0,b=n;w<b;){var y=w++,x=h[o+y]+v,T=i+y;t[T]=t[T]+x,v=x+c}else for(var S=0,E=n;S<E;){var B=S++,k=i+B;t[k]=t[k]+(h[o+B]+0)}return!0},codebookDecodeStep:function(e,t,i,n,r){e.validBits<10&&e.prepHuffman();var s,a=this.fastHuffman[1023&e.acc];if(0<=a){var o=this.codewordLengths[a];e.acc=e.acc>>>o,e.validBits-=o,s=e.validBits<0?(e.validBits=0,-1):a}else s=e.decodeScalarRaw(this);this.sparse&&(s=this.sortedValues[s]);var l=s,u=0;if(l<0)return!1;n>this.dimensions&&(n=this.dimensions);var h=this.lookupValues,c=this.sequenceP,A=this.multiplicands;if(1==this.lookupType){for(var d=1,_=0,f=n;_<f;){var g=_++,p=A[Me.toFloat(l/d|0)%Me.toFloat(h)|0]+u,m=i+g*r;t[m]=t[m]+p,c&&(u=p),d*=h}return!0}l*=this.dimensions;for(var v=0,w=n;v<w;){var b=v++,y=A[l+b]+u,x=i+b*r;t[x]=t[x]+y,c&&(u=y)}return!0},decodeStart:function(e){e.validBits<10&&e.prepHuffman();var t,i=this.fastHuffman[1023&e.acc];if(0<=i){var n=this.codewordLengths[i];e.acc=e.acc>>>n,e.validBits-=n,t=e.validBits<0?(e.validBits=0,-1):i}else t=e.decodeScalarRaw(this);return this.sparse&&(t=this.sortedValues[t]),t},decodeDeinterleaveRepeat:function(e,t,i,n,r,s,a){var o=this.dimensions;if(0==this.lookupType)throw new ft(new Xe(Ye.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}));for(var l=this.multiplicands,u=this.sequenceP,h=this.lookupValues;0<a;){var c=0;e.validBits<10&&e.prepHuffman();var A,d=this.fastHuffman[1023&e.acc];if(0<=d){var _=this.codewordLengths[d];e.acc=e.acc>>>_,e.validBits-=_,A=e.validBits<0?(e.validBits=0,-1):d}else A=e.decodeScalarRaw(this);this.sparse&&(A=this.sortedValues[A]);var f=A;if(f<0){if(0==e.bytesInSeg&&e.lastSeg)return null;throw new ft(new Xe(Ye.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(s*i<n+r*i+o&&(o=s*i-(r*i-n)),1==this.lookupType){var g=1;if(u)for(var p=0,m=o;p<m;){p++;var v=l[Me.toFloat(f/g|0)%Me.toFloat(h)|0]+c,w=t[n];w[r]=w[r]+v,++n==i&&(n=0,++r),c=v,g*=h}else for(var b=0,y=o;b<y;){b++;var x=l[Me.toFloat(f/g|0)%Me.toFloat(h)|0]+c,T=t[n];T[r]=T[r]+x,++n==i&&(n=0,++r),g*=h}}else if(f*=this.dimensions,u)for(var S=0,E=o;S<E;){var B=l[f+S++]+c,k=t[n];k[r]=k[r]+B,++n==i&&(n=0,++r),c=B}else for(var I=0,C=o;I<C;){var L=l[f+I++]+c,N=t[n];N[r]=N[r]+L,++n==i&&(n=0,++r)}a-=o}return{cInter:n,pInter:r}},residueDecode:function(e,t,i,n,r){if(0==r)for(var s=n/this.dimensions|0,a=0,o=s;a<o;){var l=a++;if(!this.codebookDecodeStep(e,t,i+l,n-i-l,s))return!1}else for(var u=0;u<n;){if(!this.codebookDecode(e,t,i,n-u))return!1;u+=this.dimensions,i+=this.dimensions}return!0},__class__:Be};function ke(){this.data=new ie}(x["kha.audio2.ogg.vorbis.data.Comment"]=ke).__name__=!0,ke.prototype={data:null,get_title:function(){return this.getString("title")},get_loopStart:function(){return st.parseInt(this.getString("loopstart"))},get_loopLength:function(){return st.parseInt(this.getString("looplength"))},get_version:function(){return this.getString("version")},get_album:function(){return this.getString("album")},get_organization:function(){return this.getString("organization")},get_tracknumber:function(){return this.getString("tracknumber")},get_performer:function(){return this.getString("performer")},get_copyright:function(){return this.getString("copyright")},get_license:function(){return this.getString("license")},get_artist:function(){return this.getString("artist")},get_description:function(){return this.getString("description")},get_genre:function(){return this.getString("genre")},get_date:function(){return this.getString("date")},get_location:function(){return this.getString("location")},get_contact:function(){return this.getString("contact")},get_isrc:function(){return this.getString("isrc")},get_artists:function(){return this.getArray("artist")},add:function(e,t){e=e.toLowerCase();var i=this.data;if(null!=Di[e]?i.existsReserved(e):i.h.hasOwnProperty(e)){var n=this.data;(null!=Di[e]?n.getReserved(e):n.h[e]).push(t)}else{var r=[t],s=this.data;null!=Di[e]?s.setReserved(e,r):s.h[e]=r}},getString:function(e){e=e.toLowerCase();var t=this.data;if(null!=Di[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var i=this.data;return(null!=Di[e]?i.getReserved(e):i.h[e])[0]}return null},getArray:function(e){e=e.toLowerCase();var t=this.data;if(null!=Di[e]?t.existsReserved(e):t.h.hasOwnProperty(e)){var i=this.data;return null!=Di[e]?i.getReserved(e):i.h[e]}return null},__class__:ke,__properties__:{get_artists:"get_artists",get_isrc:"get_isrc",get_contact:"get_contact",get_location:"get_location",get_date:"get_date",get_genre:"get_genre",get_description:"get_description",get_artist:"get_artist",get_license:"get_license",get_copyright:"get_copyright",get_performer:"get_performer",get_tracknumber:"get_tracknumber",get_organization:"get_organization",get_album:"get_album",get_version:"get_version",get_loopLength:"get_loopLength",get_loopStart:"get_loopStart",get_title:"get_title"}};function Ie(){}(x["kha.audio2.ogg.vorbis.data.Floor"]=Ie).__name__=!0,Ie.read=function(e,t){var i=new Ie;if(i.type=e.readBits(16),1<i.type)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));if(0==i.type){var n=i.floor0=new Ce;n.order=e.readBits(8),n.rate=e.readBits(16),n.barkMapSize=e.readBits(16),n.amplitudeBits=e.readBits(6),n.amplitudeOffset=e.readBits(8),n.numberOfBooks=e.readBits(4)+1;for(var r=0,s=n.numberOfBooks;r<s;){var a=r++;n.bookList[a]=e.readBits(8)}throw new ft(new Xe(Ye.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}var o=[],l=i.floor1=new Le,u=-1;l.partitions=e.readBits(5);var h=new Array(l.partitions);l.partitionClassList=h;for(var c=0,A=l.partitions;c<A;){var d=c++;l.partitionClassList[d]=e.readBits(4),l.partitionClassList[d]>u&&(u=l.partitionClassList[d])}var _=new Array(u+1);l.classDimensions=_;var f=new Array(u+1);l.classMasterbooks=f;var g=new Array(u+1);l.classSubclasses=g;var p=new Array(u+1);l.subclassBooks=p;for(var m=0,v=u+1;m<v;){var w=m++;if(l.classDimensions[w]=e.readBits(3)+1,l.classSubclasses[w]=e.readBits(2),0!=l.classSubclasses[w]&&(l.classMasterbooks[w]=e.readBits(8),l.classMasterbooks[w]>=t.length))throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));var b=1<<l.classSubclasses[w],y=l.subclassBooks,x=new Array(b);y[w]=x;for(var T=0,S=b;T<S;){var E=T++;if(l.subclassBooks[w][E]=e.readBits(8)-1,l.subclassBooks[w][E]>=t.length)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}}l.floor1Multiplier=e.readBits(2)+1,l.rangebits=e.readBits(4);var B=new Array(250);l.xlist=B,l.xlist[0]=0,l.xlist[1]=1<<l.rangebits,l.values=2;for(var k=0,I=l.partitions;k<I;)for(var C=k++,L=l.partitionClassList[C],N=0,F=l.classDimensions[L];N<F;){N++;l.xlist[l.values]=e.readBits(l.rangebits),l.values++}for(var P=0,M=l.values;P<M;){var R=P++;o.push(new Fe),o[R].x=l.xlist[R],o[R].y=R}o.sort(Ee.pointCompare);var O=new Array(l.values);l.sortedOrder=O;for(var V=0,D=l.values;V<D;){var U=V++;l.sortedOrder[U]=o[U].y}var H=new Array(l.values);l.neighbors=H;for(var W=2,G=l.values;W<G;){for(var z=W++,X=l.xlist,Y=-1,K=65536,Q=0,q=0,j=0,Z=z;j<Z;){var J=j++;X[J]>Y&&X[J]<X[z]&&(Y=X[Q=J]),X[J]<K&&X[J]>X[z]&&(K=X[q=J])}var $=Q,ee=q,te=l.neighbors,ie=new Array(l.values);te[z]=ie,l.neighbors[z][0]=$,l.neighbors[z][1]=ee}return i},Ie.prototype={floor0:null,floor1:null,type:null,__class__:Ie};var Ce=function(){};(x["kha.audio2.ogg.vorbis.data.Floor0"]=Ce).__name__=!0,Ce.prototype={order:null,rate:null,barkMapSize:null,amplitudeBits:null,amplitudeOffset:null,numberOfBooks:null,bookList:null,__class__:Ce};var Le=function(){};(x["kha.audio2.ogg.vorbis.data.Floor1"]=Le).__name__=!0,Le.prototype={partitions:null,partitionClassList:null,classDimensions:null,classSubclasses:null,classMasterbooks:null,subclassBooks:null,xlist:null,sortedOrder:null,neighbors:null,floor1Multiplier:null,rangebits:null,values:null,__class__:Le};var Ne=function(){};(x["kha.audio2.ogg.vorbis.data.Header"]=Ne).__name__=!0,Ne.read=function(e){var t=e.page;if(t.start(e),0==(2&t.flag))throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(4&t.flag))throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(1&t.flag))throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.firstPageValidate(),e.inputPosition+=1,1!=e.input.readByte())throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var i,n,r,s,a,o,l=new he(new ArrayBuffer(6));if(i=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,l.b[0]=i,n=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,l.b[1]=n,r=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,l.b[2]=r,s=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,l.b[3]=s,a=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,l.b[4]=a,o=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,l.b[5]=o,"vorbis"!=l.toString())throw new ft(new Xe(Ye.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));e.inputPosition+=4;var u=e.input.readInt32();if(0!=u)throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"vorbis version : "+u,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var h=new Ne;if(e.inputPosition+=1,h.channel=e.input.readByte(),0==h.channel)throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(16<h.channel)throw new ft(new Xe(Ye.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.inputPosition+=4,h.sampleRate=e.input.readInt32(),0==h.sampleRate)throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=4,h.maximumBitRate=e.input.readInt32(),e.inputPosition+=4,h.nominalBitRate=e.input.readInt32(),e.inputPosition+=4,h.minimumBitRate=e.input.readInt32(),e.inputPosition+=1;var c=e.input.readByte(),A=15&c,d=c>>4;if(h.blocksize0=1<<A,h.blocksize1=1<<d,A<6||13<A)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(d<6||13<d)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(d<A)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=1;var _=e.input.readByte();if(0==(1&_))throw new ft(new Xe(Ye.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.page.start(e),e.startPacket();for(var f=0,g=new Ae;0!=(f=e.next());)e.inputPosition+=f,g.write(e.input.read(f)),e.bytesInSeg=0;var p=new ce(g.getBytes());p.readByte(),p.read(6);var m,v=p.readInt32();h.vendor=p.readString(v),h.comment=new ke;for(var w=0,b=p.readInt32();w<b;){w++;var y=p.readInt32(),x=p.readString(y),T=x.indexOf("=");-1!=T&&h.comment.add(x.substring(0,T),x.substring(T+1))}if(0==(1&p.readByte()))throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.startPacket(),m=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,5!=m)throw new ft(new Xe(Ye.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var S,E,B,k,I,C,L=new he(new ArrayBuffer(6));if(S=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,L.b[0]=S,E=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,L.b[1]=E,B=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,L.b[2]=B,k=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,L.b[3]=k,I=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,L.b[4]=I,C=0!=e.bytesInSeg||!e.lastSeg&&0!=e.next()?(e.bytesInSeg--,e.inputPosition+=1,e.input.readByte()):-1,e.validBits=0,L.b[5]=C,"vorbis"!=L.toString())throw new ft(new Xe(Ye.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));var N=e.readBits(8)+1,F=new Array(N);h.codebooks=F;for(var P=0,M=N;P<M;){var R=P++;h.codebooks[R]=Be.read(e)}for(var O=0,V=_=e.readBits(6)+1;O<V;){O++;if(0!=e.readBits(16))throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var D=e.readBits(6)+1,U=new Array(D);h.floorConfig=U;for(var H=0,W=D;H<W;){var G=H++;h.floorConfig[G]=Ie.read(e,h.codebooks)}var z=e.readBits(6)+1,X=new Array(z);h.residueConfig=X;for(var Y=0,K=z;Y<K;){var Q=Y++;h.residueConfig[Q]=He.read(e,h.codebooks)}var q=e.readBits(6)+1,j=new Array(q);h.mapping=j;for(var Z=0,J=q;Z<J;)for(var $=Z++,ee=Pe.read(e,h.channel),te=0,ie=(h.mapping[$]=ee).submaps;te<ie;){var ne=te++;if(ee.submapFloor[ne]>=h.floorConfig.length)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(ee.submapResidue[ne]>=h.residueConfig.length)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}var re=e.readBits(6)+1,se=new Array(re);h.modes=se;for(var ae=0,oe=re;ae<oe;){var le=ae++,ue=Oe.read(e);if((h.modes[le]=ue).mapping>=h.mapping.length)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}for(;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next();)e.bytesInSeg--,e.inputPosition+=1,e.input.readByte();return h},Ne.prototype={maximumBitRate:null,nominalBitRate:null,minimumBitRate:null,sampleRate:null,channel:null,blocksize0:null,blocksize1:null,codebooks:null,floorConfig:null,residueConfig:null,mapping:null,modes:null,comment:null,vendor:null,__class__:Ne};var Fe=function(){};(x["kha.audio2.ogg.vorbis.data.IntPoint"]=Fe).__name__=!0,Fe.prototype={x:null,y:null,__class__:Fe};var Pe=function(){};(x["kha.audio2.ogg.vorbis.data.Mapping"]=Pe).__name__=!0,Pe.read=function(e,t){var i=new Pe,n=e.readBits(16);if(0!=n)throw new ft(new Xe(Ye.INVALID_SETUP,"mapping type "+n,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));var r=new Array(t);i.chan=r;for(var s=0,a=t;s<a;){var o=s++;i.chan[o]=new Re}if(0!=e.readBits(1)?i.submaps=e.readBits(4)+1:i.submaps=1,0!=e.readBits(1)){i.couplingSteps=e.readBits(8)+1;for(var l=0,u=i.couplingSteps;l<u;){var h=l++,c=t-1,A=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];i.chan[h].magnitude=e.readBits(c<16384?c<16?A[c]:c<512?5+A[c>>5]:10+A[c>>10]:c<16777216?c<524288?15+A[c>>15]:20+A[c>>20]:c<536870912?25+A[c>>25]:c<-2147483648?30+A[c>>30]:0);var d=t-1,_=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(i.chan[h].angle=e.readBits(d<16384?d<16?_[d]:d<512?5+_[d>>5]:10+_[d>>10]:d<16777216?d<524288?15+_[d>>15]:20+_[d>>20]:d<536870912?25+_[d>>25]:d<-2147483648?30+_[d>>30]:0),i.chan[h].magnitude>=t)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(i.chan[h].angle>=t)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(i.chan[h].magnitude==i.chan[h].angle)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}else i.couplingSteps=0;if(0!=e.readBits(2))throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(1<i.submaps)for(var f=0,g=t;f<g;){var p=f++;if(i.chan[p].mux=e.readBits(4),i.chan[p].mux>=i.submaps)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}else for(var m=0,v=t;m<v;){var w=m++;i.chan[w].mux=0}var b=new Array(i.submaps);i.submapFloor=b;var y=new Array(i.submaps);i.submapResidue=y;for(var x=0,T=i.submaps;x<T;){var S=x++;e.readBits(8),i.submapFloor[S]=e.readBits(8),i.submapResidue[S]=e.readBits(8)}return i},Pe.prototype={couplingSteps:null,chan:null,submaps:null,submapFloor:null,submapResidue:null,doFloor:function(e,t,i,n,r,s){var a=i>>1,o=this.chan[t].mux,l=e[this.submapFloor[o]];if(0==l.type)throw new ft(new Xe(Ye.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}));for(var u=l.floor1,h=0,c=r[0]*u.floor1Multiplier,A=1,d=u.values;A<d;){var _=A++,f=u.sortedOrder[_];if(0<=r[f]){var g=r[f]*u.floor1Multiplier,p=u.xlist[f];Ee.drawLine(n,h,c,p,g,a),h=p,c=g}}if(h<a)for(var m=h,v=a;m<v;){var w=m++;n[w]=n[w]*Ee.INVERSE_DB_TABLE[c]}},__class__:Pe};var Re=function(){};(x["kha.audio2.ogg.vorbis.data.MappingChannel"]=Re).__name__=!0,Re.prototype={magnitude:null,angle:null,mux:null,__class__:Re};var Oe=function(){};(x["kha.audio2.ogg.vorbis.data.Mode"]=Oe).__name__=!0,Oe.read=function(e){var t=new Oe;if(t.blockflag=0!=e.readBits(1),t.windowtype=e.readBits(16),t.transformtype=e.readBits(16),t.mapping=e.readBits(8),0!=t.windowtype)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));if(0!=t.transformtype)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));return t},Oe.prototype={blockflag:null,mapping:null,windowtype:null,transformtype:null,__class__:Oe};var Ve=function(){};(x["kha.audio2.ogg.vorbis.data.Page"]=Ve).__name__=!0,Ve.prototype={flag:null,clone:function(){var e=new Ve;return e.flag=this.flag,e},start:function(e){if(e.inputPosition+=1,!!(!!(79!=e.input.readByte()||(e.inputPosition+=1,103!=e.input.readByte()))||(e.inputPosition+=1,103!=e.input.readByte()))||(e.inputPosition+=1,83!=e.input.readByte()))throw new ft(new Xe(Ye.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}));this.startWithoutCapturePattern(e)},startWithoutCapturePattern:function(e){e.inputPosition+=1;var t=e.input.readByte();if(0!=t)throw new ft(new Xe(Ye.INVALID_STREAM_STRUCTURE_VERSION,""+t,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}));e.inputPosition+=1,this.flag=e.input.readByte(),e.inputPosition+=4;var i=e.input.readInt32();e.inputPosition+=4;var n=e.input.readInt32();e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.setup(i,n)},__class__:Ve};function De(){}(x["kha.audio2.ogg.vorbis.data.PageFlag"]=De).__name__=!0;var Ue=function(){};(x["kha.audio2.ogg.vorbis.data.ProbedPage"]=Ue).__name__=!0,Ue.prototype={pageStart:null,pageEnd:null,afterPreviousPageStart:null,firstDecodedSample:null,lastDecodedSample:null,__class__:Ue};var Xe=function(e,t,i){null==t&&(t=""),this.type=e,this.message=t,this.posInfos=i};(x["kha.audio2.ogg.vorbis.data.ReaderError"]=Xe).__name__=!0,Xe.prototype={type:null,message:null,posInfos:null,__class__:Xe};var Ye=f["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:!0,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"],NEED_MORE_DATA:{_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},INVALID_API_MIXING:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},OUTOFMEM:{_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},FEATURE_NOT_SUPPORTED:{_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},TOO_MANY_CHANNELS:{_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},FILE_OPEN_FAILURE:{_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},SEEK_WITHOUT_LENGTH:{_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},UNEXPECTED_EOF:{_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},SEEK_INVALID:{_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},INVALID_SETUP:{_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},INVALID_STREAM:{_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},MISSING_CAPTURE_PATTERN:{_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},INVALID_STREAM_STRUCTURE_VERSION:{_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},CONTINUED_PACKET_FLAG_INVALID:{_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},INVALID_FIRST_PAGE:{_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},BAD_PACKET_TYPE:{_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},CANT_FIND_LAST_PAGE:{_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},SEEK_FAILED:{_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i},OTHER:{_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:i}},He=function(){};(x["kha.audio2.ogg.vorbis.data.Residue"]=He).__name__=!0,He.read=function(e,t){var i=new He;if(i.type=e.readBits(16),2<i.type)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}));var n=new Array(64);i.begin=e.readBits(24),i.end=e.readBits(24),i.partSize=e.readBits(24)+1;var r=i.classifications=e.readBits(6)+1;i.classbook=e.readBits(8);for(var s=0,a=i.classifications;s<a;){var o=s++,l=0,u=e.readBits(3);0!=e.readBits(1)&&(l=e.readBits(5)),n[o]=8*l+u}var h=new Array(i.classifications);i.residueBooks=h;for(var c=0,A=i.classifications;c<A;){var d=c++,_=i.residueBooks,f=new Array(8);_[d]=f;for(var g=0;g<8;){var p=g++;if(0!=(n[d]&1<<p)){if(i.residueBooks[d][p]=e.readBits(8),i.residueBooks[d][p]>=t.length)throw new ft(new Xe(Ye.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}else i.residueBooks[d][p]=-1}}var m=t[i.classbook].entries,v=t[i.classbook].dimensions,w=new Array(m);i.classdata=w;for(var b=0,y=m;b<y;)for(var x=b++,T=x,S=v,E=i.classdata,B=new Array(v),k=E[x]=B;0<=--S;)k[S]=T%r,T=T/r|0;return i},He.prototype={begin:null,end:null,partSize:null,classifications:null,classbook:null,classdata:null,residueBooks:null,type:null,decode:function(e,t,i,n,r,s,a){for(var o=t.codebooks,l=o[this.classbook].dimensions,u=this.end-this.begin,h=this.partSize,c=Me.toFloat(u)/Me.toFloat(h)|0,A=new Array(t.channel*c+1),d=0,_=n;d<_;){var f=d++;if(!s[f])for(var g=i[f],p=0,m=g.length;p<m;){g[p++]=0}}if(2!=this.type||1==n)for(var v=0;v<8;)for(var w=v++,b=0;b<c;){if(0==w)for(var y=0,x=n;y<x;){var T=y++;if(!s[T]){var S=o[this.classbook];e.validBits<10&&e.prepHuffman();var E,B=S.fastHuffman[1023&e.acc];if(0<=B){var k=S.codewordLengths[B];e.acc=e.acc>>>k,e.validBits-=k,E=e.validBits<0?(e.validBits=0,-1):B}else E=e.decodeScalarRaw(S);S.sparse&&(E=S.sortedValues[E]);var I=E;if(-1==I)return;for(var C=l;0<=--C;)A[T*c+C+b]=I%this.classifications,I=I/this.classifications|0}}for(var L=0,N=l;L<N;){L++;if(c<=b)break;for(var F=0,P=n;F<P;){var M=F++;if(!s[M]){var R=A[M*c+b],O=this.residueBooks[R][w];if(0<=O){var V=i[M],D=this.begin+b*h,U=h;if(!o[O].residueDecode(e,V,D,U,this.type))return}}}++b}}else{for(var H=0,W=n;H<W;){var G=H++;if(!s[G])break;if(G==n-1)return}for(var z=0;z<8;){var X=z++,Y=0;if(2==n)for(;Y<c;){var K=this.begin+Y*h,Q=1&K,q=K>>>1;if(0==X){var j=o[this.classbook];e.validBits<10&&e.prepHuffman();var Z,J=j.fastHuffman[1023&e.acc];if(0<=J){var $=j.codewordLengths[J];e.acc=e.acc>>>$,e.validBits-=$,Z=e.validBits<0?(e.validBits=0,-1):J}else Z=e.decodeScalarRaw(j);j.sparse&&(Z=j.sortedValues[Z]);var ee=Z;if(-1==ee)return;for(var te=l;0<=--te;)A[te+Y]=ee%this.classifications,ee=ee/this.classifications|0}for(var ie=0,ne=l;ie<ne;){ie++;if(c<=Y)break;var re=this.begin+Y*h,se=A[Y],ae=this.residueBooks[se][X];if(0<=ae){var oe=o[ae].decodeDeinterleaveRepeat(e,i,n,Q,q,r,h);if(null==oe)return;Q=oe.cInter,q=oe.pInter}else Q=1&(re+=h),q=re>>>1;++Y}}else if(1==n)for(;Y<c;){var le=0,ue=this.begin+Y*h;if(0==X){var he=o[this.classbook];e.validBits<10&&e.prepHuffman();var ce,Ae=he.fastHuffman[1023&e.acc];if(0<=Ae){var de=he.codewordLengths[Ae];e.acc=e.acc>>>de,e.validBits-=de,ce=e.validBits<0?(e.validBits=0,-1):Ae}else ce=e.decodeScalarRaw(he);he.sparse&&(ce=he.sortedValues[ce]);var _e=ce;if(-1==_e)return;for(var fe=l;0<=--fe;)A[fe+Y]=_e%this.classifications,_e=_e/this.classifications|0}for(var ge=0,pe=l;ge<pe;){ge++;if(c<=Y)break;var me=this.begin+Y*h,ve=this.residueBooks[A[Y]][X];if(0<=ve){var we=o[ve].decodeDeinterleaveRepeat(e,i,n,le,ue,r,h);if(null==we)return;le=we.cInter,ue=we.pInter}else le=0,ue=me+=h;++Y}}else for(;Y<c;){var be=this.begin+Y*h,ye=Me.toFloat(be)%Me.toFloat(n)|0,xe=Me.toFloat(be)/Me.toFloat(n)|0;if(0==X){var Te=o[this.classbook];e.validBits<10&&e.prepHuffman();var Se,Ee=Te.fastHuffman[1023&e.acc];if(0<=Ee){var Be=Te.codewordLengths[Ee];e.acc=e.acc>>>Be,e.validBits-=Be,Se=e.validBits<0?(e.validBits=0,-1):Ee}else Se=e.decodeScalarRaw(Te);Te.sparse&&(Se=Te.sortedValues[Se]);var ke=Se;if(-1==ke)return;for(var Ie=l;0<=--Ie;)A[Ie+Y]=ke%this.classifications,ke=ke/this.classifications|0}for(var Ce=0,Le=l;Ce<Le;){Ce++;if(c<=Y)break;var Ne=this.begin+Y*h,Fe=this.residueBooks[A[Y]][X];if(0<=Fe){var Pe=o[Fe].decodeDeinterleaveRepeat(e,i,n,ye,xe,r,h);if(null==Pe)return;ye=Pe.cInter,xe=Pe.pInter}else Ne+=h,ye=Me.toFloat(Ne)%Me.toFloat(n)|0,xe=Me.toFloat(Ne)/Me.toFloat(n)|0;++Y}}}}},__class__:He};function We(){}(x["kha.audio2.ogg.vorbis.data.Setting"]=We).__name__=!0;function Ge(){}(x["kha.compute.ConstantLocation"]=Ge).__name__=!0,Ge.prototype={__class__:Ge};function ze(){}(x["kha.compute.TextureUnit"]=ze).__name__=!0,ze.prototype={__class__:ze};function Ke(){}(x["kha.graphics1.Graphics"]=Ke).__name__=!0,Ke.__isInterface__=!0,Ke.prototype={begin:null,end:null,setPixel:null,__class__:Ke};var Qe=function(){this.transformations=[new li(1,0,0,0,1,0,0,0,1)],this.transformationIndex=0,this.opacities=[1],this.myFontSize=12,this.pipe=null};(x["kha.graphics2.Graphics"]=Qe).__name__=!0,Qe.prototype={begin:function(e,t){null==e&&(e=!0)},end:function(){},flush:function(){},clear:function(e){},drawImage:function(e,t,i){this.drawSubImage(e,t,i,0,0,e.get_width(),e.get_height())},drawSubImage:function(e,t,i,n,r,s,a){this.drawScaledSubImage(e,n,r,s,a,t,i,s,a)},drawScaledImage:function(e,t,i,n,r){this.drawScaledSubImage(e,0,0,e.get_width(),e.get_height(),t,i,n,r)},drawScaledSubImage:function(e,t,i,n,r,s,a,o,l){},drawRect:function(e,t,i,n,r){null==r&&(r=1)},fillRect:function(e,t,i,n){},drawString:function(e,t,i){},drawCharacters:function(e,t,i,n,r){},drawLine:function(e,t,i,n,r){null==r&&(r=1)},drawVideo:function(e,t,i,n,r){},fillTriangle:function(e,t,i,n,r,s){},get_imageScaleQuality:function(){return 0},set_imageScaleQuality:function(e){return 1},get_mipmapScaleQuality:function(){return 0},set_mipmapScaleQuality:function(e){return 1},get_color:function(){return-16777216},set_color:function(e){return-16777216},get_font:function(){return null},set_font:function(e){return null},get_fontSize:function(){return this.myFontSize},set_fontSize:function(e){return this.myFontSize=e},get_transformation:function(){return this.transformations[this.transformationIndex]},set_transformation:function(e){this.setTransformation(e);var t=this.transformations[this.transformationIndex];return t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,e},pushTransformation:function(e){this.transformationIndex++,this.transformationIndex==this.transformations.length&&this.transformations.push(new li(1,0,0,0,1,0,0,0,1));var t=this.transformations[this.transformationIndex];t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,this.setTransformation(this.transformations[this.transformationIndex])},popTransformation:function(){return this.transformationIndex--,this.setTransformation(this.transformations[this.transformationIndex]),this.transformations[this.transformationIndex+1]},scale:function(e,t){var i=this.transformations[this.transformationIndex],n=this.transformations[this.transformationIndex],r=e*n._00+0*n._01+0*n._02,s=e*n._10+0*n._11+0*n._12,a=e*n._20+0*n._21+0*n._22,o=0*n._00+t*n._01+0*n._02,l=0*n._10+t*n._11+0*n._12,u=0*n._20+t*n._21+0*n._22,h=0*n._00+0*n._01+ +n._02,c=0*n._10+0*n._11+ +n._12,A=0*n._20+0*n._21+ +n._22;i._00=r,i._10=s,i._20=a,i._01=o,i._11=l,i._21=u,i._02=h,i._12=c,i._22=A},translation:function(e,t){var i=this.transformations[this.transformationIndex];return new li(+i._00+0*i._01+e*i._02,+i._10+0*i._11+e*i._12,+i._20+0*i._21+e*i._22,0*i._00+ +i._01+t*i._02,0*i._10+ +i._11+t*i._12,0*i._20+ +i._21+t*i._22,0*i._00+0*i._01+ +i._02,0*i._10+0*i._11+ +i._12,0*i._20+0*i._21+ +i._22)},translate:function(e,t){var i=this.transformations[this.transformationIndex],n=this.transformations[this.transformationIndex],r=+n._00+0*n._01+e*n._02,s=+n._10+0*n._11+e*n._12,a=+n._20+0*n._21+e*n._22,o=0*n._00+ +n._01+t*n._02,l=0*n._10+ +n._11+t*n._12,u=0*n._20+ +n._21+t*n._22,h=0*n._00+0*n._01+ +n._02,c=0*n._10+0*n._11+ +n._12,A=0*n._20+0*n._21+ +n._22;i._00=r,i._10=s,i._20=a,i._01=o,i._11=l,i._21=u,i._02=h,i._12=c,i._22=A},pushTranslation:function(e,t){var i=this.transformations[this.transformationIndex],n=+i._00+0*i._01+e*i._02,r=+i._10+0*i._11+e*i._12,s=+i._20+0*i._21+e*i._22,a=0*i._00+ +i._01+t*i._02,o=0*i._10+ +i._11+t*i._12,l=0*i._20+ +i._21+t*i._22,u=0*i._00+0*i._01+ +i._02,h=0*i._10+0*i._11+ +i._12,c=0*i._20+0*i._21+ +i._22;this.transformationIndex++,this.transformationIndex==this.transformations.length&&this.transformations.push(new li(1,0,0,0,1,0,0,0,1));var A=this.transformations[this.transformationIndex];A._00=n,A._10=r,A._20=s,A._01=a,A._11=o,A._21=l,A._02=u,A._12=h,A._22=c,this.setTransformation(this.transformations[this.transformationIndex])},rotation:function(e,t,i){var n=t,r=i,s=Math.cos(e),a=-Math.sin(e),o=Math.sin(e),l=Math.cos(e),u=+s+0*o+0*n,h=a+0*l+0*n,c=+n+0,A=0*s+ +o+0*r,d=0*a+ +l+0*r,_=+r+0,f=0*s+0*o,g=0*a+0*l,p=-t,m=-i,v=u+0*h+0*c,w=0*u+h+0*c,b=u*p+h*m+c,y=A+0*d+0*_,x=0*A+d+0*_,T=A*p+d*m+_,S=f+0*g,E=0*f+g,B=f*p+g*m+1,k=this.transformations[this.transformationIndex];return new li(v*k._00+w*k._01+b*k._02,v*k._10+w*k._11+b*k._12,v*k._20+w*k._21+b*k._22,y*k._00+x*k._01+T*k._02,y*k._10+x*k._11+T*k._12,y*k._20+x*k._21+T*k._22,S*k._00+E*k._01+B*k._02,S*k._10+E*k._11+B*k._12,S*k._20+E*k._21+B*k._22)},rotate:function(e,t,i){var n=this.transformations[this.transformationIndex],r=t,s=i,a=Math.cos(e),o=-Math.sin(e),l=Math.sin(e),u=Math.cos(e),h=+a+0*l+0*r,c=o+0*u+0*r,A=+r+0,d=0*a+ +l+0*s,_=0*o+ +u+0*s,f=+s+0,g=0*a+0*l,p=0*o+0*u,m=-t,v=-i,w=h+0*c+0*A,b=0*h+c+0*A,y=h*m+c*v+A,x=d+0*_+0*f,T=0*d+_+0*f,S=d*m+_*v+f,E=g+0*p,B=0*g+p,k=g*m+p*v+1,I=this.transformations[this.transformationIndex],C=w*I._00+b*I._01+y*I._02,L=w*I._10+b*I._11+y*I._12,N=w*I._20+b*I._21+y*I._22,F=x*I._00+T*I._01+S*I._02,P=x*I._10+T*I._11+S*I._12,M=x*I._20+T*I._21+S*I._22,R=E*I._00+B*I._01+k*I._02,O=E*I._10+B*I._11+k*I._12,V=E*I._20+B*I._21+k*I._22;n._00=C,n._10=L,n._20=N,n._01=F,n._11=P,n._21=M,n._02=R,n._12=O,n._22=V},pushRotation:function(e,t,i){var n=t,r=i,s=Math.cos(e),a=-Math.sin(e),o=Math.sin(e),l=Math.cos(e),u=+s+0*o+0*n,h=a+0*l+0*n,c=+n+0,A=0*s+ +o+0*r,d=0*a+ +l+0*r,_=+r+0,f=0*s+0*o,g=0*a+0*l,p=-t,m=-i,v=u+0*h+0*c,w=0*u+h+0*c,b=u*p+h*m+c,y=A+0*d+0*_,x=0*A+d+0*_,T=A*p+d*m+_,S=f+0*g,E=0*f+g,B=f*p+g*m+1,k=this.transformations[this.transformationIndex],I=v*k._00+w*k._01+b*k._02,C=v*k._10+w*k._11+b*k._12,L=v*k._20+w*k._21+b*k._22,N=y*k._00+x*k._01+T*k._02,F=y*k._10+x*k._11+T*k._12,P=y*k._20+x*k._21+T*k._22,M=S*k._00+E*k._01+B*k._02,R=S*k._10+E*k._11+B*k._12,O=S*k._20+E*k._21+B*k._22;this.transformationIndex++,this.transformationIndex==this.transformations.length&&this.transformations.push(new li(1,0,0,0,1,0,0,0,1));var V=this.transformations[this.transformationIndex];V._00=I,V._10=C,V._20=L,V._01=N,V._11=F,V._21=P,V._02=M,V._12=R,V._22=O,this.setTransformation(this.transformations[this.transformationIndex])},pushOpacity:function(e){this.setOpacity(e),this.opacities.push(e)},popOpacity:function(){var e=this.opacities.pop();return this.setOpacity(this.get_opacity()),e},get_opacity:function(){return this.opacities[this.opacities.length-1]},set_opacity:function(e){return this.setOpacity(e),this.opacities[this.opacities.length-1]=e},scissor:function(e,t,i,n){},disableScissor:function(){},pipe:null,get_pipeline:function(){return this.pipe},set_pipeline:function(e){return this.setPipeline(e),this.pipe=e},transformations:null,transformationIndex:null,opacities:null,myFontSize:null,setTransformation:function(e){},setOpacity:function(e){},setPipeline:function(e){},__class__:Qe,__properties__:{set_pipeline:"set_pipeline",get_pipeline:"get_pipeline",set_opacity:"set_opacity",get_opacity:"get_opacity",set_transformation:"set_transformation",get_transformation:"get_transformation",set_fontSize:"set_fontSize",get_fontSize:"get_fontSize",set_font:"set_font",get_font:"get_font",set_color:"set_color",get_color:"get_color",set_mipmapScaleQuality:"set_mipmapScaleQuality",get_mipmapScaleQuality:"get_mipmapScaleQuality",set_imageScaleQuality:"set_imageScaleQuality",get_imageScaleQuality:"get_imageScaleQuality"}};var qe=function(e){this.canvas=e};(x["kha.graphics2.Graphics1"]=qe).__name__=!0,qe.__interfaces__=[Ke],qe.prototype={canvas:null,texture:null,pixels:null,begin:function(){null!=this.texture&&this.texture.get_realWidth()==this.canvas.get_width()&&this.texture.get_realHeight()==this.canvas.get_height()||(this.texture=R.create(this.canvas.get_width(),this.canvas.get_height(),0,2)),this.pixels=this.texture.lock()},end:function(){this.texture.unlock(),this.canvas.get_g2().begin(),this.canvas.get_g2().drawImage(this.texture,0,0),this.canvas.get_g2().end()},setPixel:function(e,t,i){this.pixels.setInt32(t*this.texture.get_realWidth()*4+4*e,i)},__class__:qe};var mt=function(){};(x["kha.graphics2.GraphicsExtension"]=mt).__name__=!0,mt.drawArc=function(e,t,i,n,r,s,a,o,l){null==l&&(l=0),null==o&&(o=!1),null==a&&(a=1),r%=2*Math.PI,s%=2*Math.PI,o?r<s&&(s-=2*Math.PI):s<r&&(s+=2*Math.PI),l<=0&&(l=Math.floor(10*Math.sqrt(n)));for(var u=(s-r)/l,h=Math.cos(u),c=Math.sin(u),A=Math.cos(r)*n,d=Math.sin(r)*n,_=0,f=l;_<f;){_++;var g=A+t,p=d+i,m=A;A=h*A-c*d,d=h*d+c*m,e.drawLine(g,p,A+t,d+i,a)}},mt.fillArc=function(e,t,i,n,r,s,a,o){null==o&&(o=0),null==a&&(a=!1),r%=2*Math.PI,s%=2*Math.PI,a?r<s&&(s-=2*Math.PI):s<r&&(s+=2*Math.PI),o<=0&&(o=Math.floor(10*Math.sqrt(n)));for(var l=(s-r)/o,u=Math.cos(l),h=Math.sin(l),c=Math.cos(r)*n,A=Math.sin(r)*n,d=c+t,_=A+i,f=0,g=o;f<g;){f++;var p=c+t,m=A+i,v=c;c=u*c-h*A,A=u*A+h*v,e.fillTriangle(p,m,c+t,A+i,d,_)}},mt.drawCircle=function(e,t,i,n,r,s){null==s&&(s=0),null==r&&(r=1),s<=0&&(s=Math.floor(10*Math.sqrt(n)));for(var a=2*Math.PI/s,o=Math.cos(a),l=Math.sin(a),u=n,h=0,c=0,A=s;c<A;){c++;var d=u+t,_=h+i,f=u;u=o*u-l*h,h=o*h+l*f,e.drawLine(d,_,u+t,h+i,r)}},mt.fillCircle=function(e,t,i,n,r){null==r&&(r=0),r<=0&&(r=Math.floor(10*Math.sqrt(n)));for(var s=2*Math.PI/r,a=Math.cos(s),o=Math.sin(s),l=n,u=0,h=0,c=r;h<c;){h++;var A=l+t,d=u+i,_=l;l=a*l-o*u,u=a*u+o*_,e.fillTriangle(A,d,l+t,u+i,t,i)}},mt.drawPolygon=function(e,t,i,n,r){null==r&&(r=1);for(var s=it.iter(n),a=s.next(),o=a;s.hasNext();){var l=s.next();e.drawLine(o.x+t,o.y+i,l.x+t,l.y+i,r),o=l}e.drawLine(o.x+t,o.y+i,a.x+t,a.y+i,r)},mt.fillPolygon=function(e,t,i,n){var r=it.iter(n);if(r.hasNext()){var s=r.next();if(r.hasNext())for(var a=r.next();r.hasNext();){var o=r.next();e.fillTriangle(s.x+t,s.y+i,a.x+t,a.y+i,o.x+t,o.y+i),a=o}}},mt.drawCubicBezier=function(e,t,i,n,r){var s;null==r&&(r=1),null==n&&(n=20);for(var a,o=mt.calculateCubicBezierPoint(0,t,i),l=1,u=n+1;l<u;){s=l++/n,a=mt.calculateCubicBezierPoint(s,t,i),e.drawLine(o[0],o[1],a[0],a[1],r),o=a}},mt.drawCubicBezierPath=function(e,t,i,n,r){null==r&&(r=1),null==n&&(n=20);for(var s,a=0,o=null,l=null;a<t.length-3;){0==a&&(o=mt.calculateCubicBezierPoint(0,[t[a],t[a+1],t[a+2],t[a+3]],[i[a],i[a+1],i[a+2],i[a+3]]));for(var u=1,h=n+1;u<h;){s=u++/n,l=mt.calculateCubicBezierPoint(s,[t[a],t[a+1],t[a+2],t[a+3]],[i[a],i[a+1],i[a+2],i[a+3]]),e.drawLine(o[0],o[1],l[0],l[1],r),o=l}a+=3}},mt.calculateCubicBezierPoint=function(e,t,i){var n=1-e,r=e*e,s=n*n,a=s*n,o=r*e,l=[a*t[0],a*i[0]];return l[0]+=3*s*e*t[1],l[1]+=3*s*e*i[1],l[0]+=3*n*r*t[2],l[1]+=3*n*r*i[2],l[0]+=o*t[3],l[1]+=o*i[3],l},mt.drawAlignedString=function(e,t,i,n,r,s){var a=0;if(1==r||2==r){var o=e.get_font().width(e.get_fontSize(),t);a=1==r?.5*-o:-o}var l=0;if(1==s||2==s){var u=e.get_font().height(e.get_fontSize());l=1==s?.5*-u:-u}e.drawString(t,i+a,n+l)},mt.drawAlignedCharacters=function(e,t,i,n,r,s,a,o){var l=0;if(1==a||2==a){var u=e.get_font().widthOfCharacters(e.get_fontSize(),t,i,n);l=1==a?.5*-u:-u}var h=0;if(1==o||2==o){var c=e.get_font().height(e.get_fontSize());h=1==o?.5*-c:-c}e.drawCharacters(t,i,n,r+l,s+h)};function je(){}(x["kha.graphics2.truetype.VectorOfIntPointer"]=je).__name__=!0,je.prototype={value:null,__class__:je};function Ze(){}(x["kha.graphics2.truetype.Stbtt_temp_rect"]=Ze).__name__=!0,Ze.prototype={x0:null,y0:null,x1:null,y1:null,__class__:Ze};function Je(){}(x["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=Je).__name__=!0,Je.prototype={advanceWidth:null,leftSideBearing:null,__class__:Je};function $e(){}(x["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=$e).__name__=!0,$e.prototype={ascent:null,descent:null,lineGap:null,__class__:$e};function et(){}(x["kha.graphics2.truetype.Stbtt_temp_region"]=et).__name__=!0,et.prototype={width:null,height:null,xoff:null,yoff:null,__class__:et};var tt=function(){};(x["kha.graphics2.truetype.Stbtt_bakedchar"]=tt).__name__=!0,tt.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,__class__:tt};function vt(){}(x["kha.graphics2.truetype.Stbtt_aligned_quad"]=vt).__name__=!0,vt.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,__class__:vt};function wt(){}(x["kha.graphics2.truetype.Stbtt_packedchar"]=wt).__name__=!0,wt.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,xoff2:null,yoff2:null,__class__:wt};function bt(){}(x["kha.graphics2.truetype.Stbtt_pack_range"]=bt).__name__=!0,bt.prototype={font_size:null,first_unicode_codepoint_in_range:null,array_of_unicode_codepoints:null,num_chars:null,chardata_for_range:null,h_oversample:null,v_oversample:null,__class__:bt};function yt(){}(x["kha.graphics2.truetype.Stbtt_pack_context"]=yt).__name__=!0,yt.prototype={width:null,height:null,stride_in_bytes:null,padding:null,h_oversample:null,v_oversample:null,pixels:null,__class__:yt};var xt=function(){};(x["kha.graphics2.truetype.Stbtt_fontinfo"]=xt).__name__=!0,xt.prototype={data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,index_map:null,indexToLocFormat:null,__class__:xt};function Tt(){}(x["kha.graphics2.truetype.Stbtt_vertex"]=Tt).__name__=!0,Tt.prototype={x:null,y:null,cx:null,cy:null,type:null,padding:null,__class__:Tt};function St(){}(x["kha.graphics2.truetype.Stbtt__bitmap"]=St).__name__=!0,St.prototype={w:null,h:null,stride:null,pixels:null,pixels_offset:null,__class__:St};function Et(){}(x["kha.graphics2.truetype.Stbtt__edge"]=Et).__name__=!0,Et.prototype={x0:null,y0:null,x1:null,y1:null,invert:null,__class__:Et};function Bt(){}(x["kha.graphics2.truetype.Stbtt__active_edge"]=Bt).__name__=!0,Bt.prototype={next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null,__class__:Bt};function kt(){}(x["kha.graphics2.truetype.Stbtt__point"]=kt).__name__=!0,kt.prototype={x:null,y:null,__class__:kt};var It=function(){};(x["kha.graphics2.truetype.StbTruetype"]=It).__name__=!0,It.STBTT_assert=function(e){if(!e)throw new ft("Error")},It.STBTT_POINT_SIZE=function(e){return-e},It.ttBYTE=function(e,t){return null==t&&(t=0),e.readU8(t)},It.ttCHAR=function(e,t){null==t&&(t=0);var i=e.readU8(t);return 128<=i?i-256:i},It.ttUSHORT=function(e,t){null==t&&(t=0);var i=e.readU8(t);return e.readU8(t+1)|i<<8},It.ttSHORT=function(e,t){null==t&&(t=0);var i=e.readU8(t),n=e.readU8(t+1)|i<<8;return 0!=(32768&n)?n-65536:n},It.ttULONG=function(e,t){null==t&&(t=0);var i=t;null==i&&(i=0);var n=e.readU8(i),r=e.readU8(i+1),s=e.readU8(i+2);return e.readU8(i+3)|s<<8|r<<16|n<<24},It.ttLONG=function(e,t){null==t&&(t=0);var i=e.readU8(t),n=e.readU8(t+1),r=e.readU8(t+2);return e.readU8(t+3)|r<<8|n<<16|i<<24},It.ttFixed=function(e,t){null==t&&(t=0);var i=t;null==i&&(i=0);var n=e.readU8(i),r=e.readU8(i+1),s=e.readU8(i+2);return e.readU8(i+3)|s<<8|r<<16|n<<24},It.stbtt_tag4=function(e,t,i,n,r,s){return e.readU8(t)==i&&e.readU8(t+1)==n&&e.readU8(t+2)==r&&e.readU8(t+3)==s},It.stbtt_tag=function(e,t,i){var n=it.cca(i,0),r=it.cca(i,1),s=it.cca(i,2),a=it.cca(i,3);return e.readU8(t)==n&&e.readU8(t+1)==r&&e.readU8(t+2)==s&&e.readU8(t+3)==a},It.stbtt__isfont=function(e){var t=it.cca("1",0);if(e.readU8(0)==t&&0==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3))return!0;var i=it.cca("typ1",0),n=it.cca("typ1",1),r=it.cca("typ1",2),s=it.cca("typ1",3);if(e.readU8(0)==i&&e.readU8(1)==n&&e.readU8(2)==r&&e.readU8(3)==s)return!0;var a=it.cca("OTTO",0),o=it.cca("OTTO",1),l=it.cca("OTTO",2),u=it.cca("OTTO",3);return e.readU8(0)==a&&e.readU8(1)==o&&e.readU8(2)==l&&e.readU8(3)==u||0==e.readU8(0)&&1==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3)},It.stbtt__find_table=function(e,t,i){var n=t+4;null==n&&(n=0);for(var r=e.readU8(n),s=t+12,a=0,o=e.readU8(n+1)|r<<8;a<o;){var l=s+16*a++,u=it.cca(i,0),h=it.cca(i,1),c=it.cca(i,2),A=it.cca(i,3);if(e.readU8(l)==u&&e.readU8(l+1)==h&&e.readU8(l+2)==c&&e.readU8(l+3)==A){var d=l+8;null==d&&(d=0);var _=d;null==_&&(_=0);var f=e.readU8(_),g=e.readU8(_+1),p=e.readU8(_+2);return e.readU8(_+3)|p<<8|g<<16|f<<24}}return 0},It.stbtt_GetFontOffsetForIndex=function(e,t){if(It.stbtt__isfont(e))return 0==t?0:-1;var i=it.cca("ttcf",0),n=it.cca("ttcf",1),r=it.cca("ttcf",2),s=it.cca("ttcf",3);if(e.readU8(0)==i&&e.readU8(1)==n&&e.readU8(2)==r&&e.readU8(3)==s){var a,o=4;null==o&&(o=0);var l=o;null==l&&(l=0);var u=e.readU8(l),h=e.readU8(l+1),c=e.readU8(l+2);if(65536!=(e.readU8(l+3)|c<<8|h<<16|u<<24)){var A=4;null==A&&(A=0);var d=A;null==d&&(d=0);var _=e.readU8(d),f=e.readU8(d+1),g=e.readU8(d+2);a=131072==(e.readU8(d+3)|g<<8|f<<16|_<<24)}else a=!0;if(a){var p=8;null==p&&(p=0);var m=e.readU8(p),v=e.readU8(p+1),w=e.readU8(p+2);if((e.readU8(p+3)|w<<8|v<<16|m<<24)<=t)return-1;var b=12+4*t;null==b&&(b=0);var y=b;null==y&&(y=0);var x=e.readU8(y),T=e.readU8(y+1),S=e.readU8(y+2);return e.readU8(y+3)|S<<8|T<<16|x<<24}}return-1},It.stbtt_InitFont=function(e,t,i){e.data=t,e.fontstart=i;var n=It.stbtt__find_table(t,i,"cmap");if(e.loca=It.stbtt__find_table(t,i,"loca"),e.head=It.stbtt__find_table(t,i,"head"),e.glyf=It.stbtt__find_table(t,i,"glyf"),e.hhea=It.stbtt__find_table(t,i,"hhea"),e.hmtx=It.stbtt__find_table(t,i,"hmtx"),e.kern=It.stbtt__find_table(t,i,"kern"),0==n||0==e.loca||0==e.head||0==e.glyf||0==e.hhea||0==e.hmtx)return!1;var r=It.stbtt__find_table(t,i,"maxp");if(0!=r){var s=r+4;null==s&&(s=0);var a=t.readU8(s),o=t.readU8(s+1);e.numGlyphs=o|a<<8}else e.numGlyphs=65535;var l=n+2;null==l&&(l=0);for(var u=t.readU8(l),h=t.readU8(l+1)|u<<8,c=e.index_map=0,A=h;c<A;){var d=n+4+8*c++,_=d;null==_&&(_=0);var f=t.readU8(_);switch(t.readU8(_+1)|f<<8){case 0:var g=d+4;null==g&&(g=0);var p=g;null==p&&(p=0);var m=t.readU8(p),v=t.readU8(p+1),w=t.readU8(p+2),b=t.readU8(p+3);e.index_map=n+(b|w<<8|v<<16|m<<24);break;case 3:var y=d+2;null==y&&(y=0);var x=t.readU8(y);switch(t.readU8(y+1)|x<<8){case 1:case 10:var T=d+4;null==T&&(T=0);var S=T;null==S&&(S=0);var E=t.readU8(S),B=t.readU8(S+1),k=t.readU8(S+2),I=t.readU8(S+3);e.index_map=n+(I|k<<8|B<<16|E<<24)}}}if(0==e.index_map)return!1;var C=e.head+50;null==C&&(C=0);var L=t.readU8(C),N=t.readU8(C+1);return e.indexToLocFormat=N|L<<8,!0},It.stbtt_FindGlyphIndex=function(e,t){var i=e.data,n=e.index_map,r=n;null==r&&(r=0);var s=i.readU8(r),a=i.readU8(r+1)|s<<8;if(0==a){var o=n+2;null==o&&(o=0);var l=i.readU8(o);if(t<(i.readU8(o+1)|l<<8)-6){var u=n+6+t;return null==u&&(u=0),i.readU8(u)}return 0}if(6==a){var h=n+6;null==h&&(h=0);var c=i.readU8(h),A=i.readU8(h+1)|c<<8,d=n+8;null==d&&(d=0);var _=i.readU8(d),f=i.readU8(d+1);if(A<=t&&t<A+(f|_<<8)){var g=n+10+2*(t-A);null==g&&(g=0);var p=i.readU8(g);return i.readU8(g+1)|p<<8}return 0}if(2==a)throw new ft("Error");if(4==a){var m=n+6;null==m&&(m=0);var v=i.readU8(m),w=(i.readU8(m+1)|v<<8)>>1,b=n+8;null==b&&(b=0);var y=i.readU8(b),x=(i.readU8(b+1)|y<<8)>>1,T=n+10;null==T&&(T=0);var S=i.readU8(T),E=i.readU8(T+1)|S<<8,B=n+12;null==B&&(B=0);var k=i.readU8(B),I=(i.readU8(B+1)|k<<8)>>1,C=n+14,L=C;if(65535<t)return 0;var N=L+2*I;null==N&&(N=0);var F=i.readU8(N);for((i.readU8(N+1)|F<<8)<=t&&(L+=2*I),L-=2;0!=E;){var P=L+2*(x>>=1);null==P&&(P=0);var M=i.readU8(P);(i.readU8(P+1)|M<<8)<t&&(L+=2*x),--E}var R=(L+=2)-C>>1,O=C+2*R;null==O&&(O=0);var V=i.readU8(O);if((i.readU8(O+1)|V<<8)<t)throw new ft("Error");var D=n+14+2*w+2+2*R;null==D&&(D=0);var U=i.readU8(D),H=i.readU8(D+1)|U<<8;if(t<H)return 0;var W=n+14+6*w+2+2*R;null==W&&(W=0);var G=i.readU8(W),z=i.readU8(W+1)|G<<8;if(0==z){var X=n+14+4*w+2+2*R;null==X&&(X=0);var Y=i.readU8(X),K=i.readU8(X+1)|Y<<8;return t+(0!=(32768&K)?K-65536:K)}var Q=z+2*(t-H)+n+14+6*w+2+2*R;null==Q&&(Q=0);var q=i.readU8(Q);return i.readU8(Q+1)|q<<8}if(12!=a&&13!=a)throw new ft("Error");var j=n+12;null==j&&(j=0);var Z=j;null==Z&&(Z=0);for(var J=i.readU8(Z),$=i.readU8(Z+1),ee=i.readU8(Z+2),te=0,ie=i.readU8(Z+3)|ee<<8|$<<16|J<<24;te<ie;){var ne=te+(ie-te>>1),re=n+16+12*ne;null==re&&(re=0);var se=re;null==se&&(se=0);var ae=i.readU8(se),oe=i.readU8(se+1),le=i.readU8(se+2),ue=i.readU8(se+3)|le<<8|oe<<16|ae<<24,he=n+16+12*ne+4;null==he&&(he=0);var ce=he;null==ce&&(ce=0);var Ae=i.readU8(ce),de=i.readU8(ce+1),_e=i.readU8(ce+2),fe=i.readU8(ce+3);if(t<ue)ie=ne;else{if(!((fe|_e<<8|de<<16|Ae<<24)<t)){var ge=n+16+12*ne+8;null==ge&&(ge=0);var pe=ge;null==pe&&(pe=0);var me=i.readU8(pe),ve=i.readU8(pe+1),we=i.readU8(pe+2),be=i.readU8(pe+3)|we<<8|ve<<16|me<<24;return 12==a?be+t-ue:be}te=ne+1}}return 0},It.stbtt_GetCodepointShape=function(e,t){return It.stbtt_GetGlyphShape(e,It.stbtt_FindGlyphIndex(e,t))},It.stbtt_setvertex=function(e,t,i,n,r,s){e.type=t,e.x=i,e.y=n,e.cx=r,e.cy=s},It.stbtt__GetGlyfOffset=function(e,t){var i,n;if(t>=e.numGlyphs)return-1;if(2<=e.indexToLocFormat)return-1;if(0==e.indexToLocFormat){var r=e.glyf,s=e.data,a=e.loca+2*t;null==a&&(a=0);var o=s.readU8(a);i=r+2*(s.readU8(a+1)|o<<8);var l=e.glyf,u=e.data,h=e.loca+2*t+2;null==h&&(h=0);var c=u.readU8(h);n=l+2*(u.readU8(h+1)|c<<8)}else{var A=e.glyf,d=e.data,_=e.loca+4*t;null==_&&(_=0);var f=_;null==f&&(f=0);var g=d.readU8(f),p=d.readU8(f+1),m=d.readU8(f+2);i=A+(d.readU8(f+3)|m<<8|p<<16|g<<24);var v=e.glyf,w=e.data,b=e.loca+4*t+4;null==b&&(b=0);var y=b;null==y&&(y=0);var x=w.readU8(y),T=w.readU8(y+1),S=w.readU8(y+2);n=v+(w.readU8(y+3)|S<<8|T<<16|x<<24)}return i==n?-1:i},It.stbtt_GetGlyphBox=function(e,t,i){var n=It.stbtt__GetGlyfOffset(e,t);if(n<0)return!1;var r=e.data,s=n+2;null==s&&(s=0);var a=r.readU8(s),o=r.readU8(s+1)|a<<8;i.x0=0!=(32768&o)?o-65536:o;var l=e.data,u=n+4;null==u&&(u=0);var h=l.readU8(u),c=l.readU8(u+1)|h<<8;i.y0=0!=(32768&c)?c-65536:c;var A=e.data,d=n+6;null==d&&(d=0);var _=A.readU8(d),f=A.readU8(d+1)|_<<8;i.x1=0!=(32768&f)?f-65536:f;var g=e.data,p=n+8;null==p&&(p=0);var m=g.readU8(p),v=g.readU8(p+1)|m<<8;return i.y1=0!=(32768&v)?v-65536:v,!0},It.stbtt_GetCodepointBox=function(e,t,i){return It.stbtt_GetGlyphBox(e,It.stbtt_FindGlyphIndex(e,t),i)},It.stbtt_IsGlyphEmpty=function(e,t){var i=It.stbtt__GetGlyfOffset(e,t);if(i<0)return!0;var n=e.data,r=i;null==r&&(r=0);var s=n.readU8(r),a=n.readU8(r+1)|s<<8;return 0==(0!=(32768&a)?a-65536:a)},It.stbtt__close_shape=function(e,t,i,n,r,s,a,o,l,u){return n?(i&&It.stbtt_setvertex(e[t++],3,l+a>>1,u+o>>1,l,u),It.stbtt_setvertex(e[t++],3,r,s,a,o)):i?It.stbtt_setvertex(e[t++],3,r,s,l,u):It.stbtt_setvertex(e[t++],2,r,s,0,0),t},It.copyVertices=function(e,t,i,n){for(var r=0,s=n;r<s;){var a=r++;t[i+a]=e[a]}},It.stbtt_GetGlyphShape=function(e,t){var i=e.data,n=null,r=0,s=It.stbtt__GetGlyfOffset(e,t);if(s<0)return null;var a=s;null==a&&(a=0);var o=i.readU8(a),l=i.readU8(a+1)|o<<8,u=0!=(32768&l)?l-65536:l;if(0<u){var h,c=0,A=0,d=0,_=!1,f=!1,g=s+10,p=g+2*u;null==p&&(p=0);var m=i.readU8(p),v=g+2*u+2+(i.readU8(p+1)|m<<8),w=g+2*u-2;null==w&&(w=0);var b=i.readU8(w),y=1+(i.readU8(w+1)|b<<8),x=y+2*u;if(null==(n=new Array(x)))return null;for(var T=0,S=n.length;T<S;){n[T++]=new Tt}var E=d=0;h=x-y;for(var B=0,k=y;B<k;){var I=B++;0==E?0!=(8&(c=i.readU8(v++)))&&(E=i.readU8(v++)):--E,n[h+I].type=c}for(var C=0,L=0,N=y;L<N;){var F=L++;if(0!=(2&(c=n[h+F].type))){var P=i.readU8(v++);C+=0!=(16&c)?P:-P}else if(0==(16&c)){var M=i.readU8(v),R=i.readU8(v+1)|M<<8;C+=0!=(32768&R)?R-65536:R,v+=2}n[h+F].x=C}for(var O=0,V=0,D=y;V<D;){var U=V++;if(0!=(4&(c=n[h+U].type))){var H=i.readU8(v++);O+=0!=(32&c)?H:-H}else if(0==(32&c)){var W=i.readU8(v),G=i.readU8(v+1)|W<<8;O+=0!=(32768&G)?G-65536:G,v+=2}n[h+U].y=O}for(var z=r=0,X=z,Y=X,K=Y,Q=K,q=Q,j=0;j<y;){if(c=n[h+j].type,C=n[h+j].x,O=n[h+j].y,d==j){0!=j&&(r=It.stbtt__close_shape(n,r,_,f,q,Q,X,z,K,Y)),(f=0==(1&c))?(X=C,z=O,0==(1&n[h+j+1].type)?(q=C+n[h+j+1].x>>1,Q=O+n[h+j+1].y>>1):(q=n[h+j+1].x,Q=n[h+j+1].y,++j)):(q=C,Q=O),It.stbtt_setvertex(n[r++],1,q,Q,0,0),_=!1;var Z=g+2*A;null==Z&&(Z=0);var J=i.readU8(Z);d=1+(i.readU8(Z+1)|J<<8),++A}else _=0==(1&c)?(_&&It.stbtt_setvertex(n[r++],3,K+C>>1,Y+O>>1,K,Y),K=C,Y=O,!0):(_?It.stbtt_setvertex(n[r++],3,C,O,K,Y):It.stbtt_setvertex(n[r++],2,C,O,0,0),!1);++j}r=It.stbtt__close_shape(n,r,_,f,q,Q,X,z,K,Y)}else if(-1==u){var $=1,ee=s+10;for(r=0,n=null;0!=$;){var te,ie,ne=null,re=1,se=0,ae=0,oe=1,le=0,ue=0,he=ee;null==he&&(he=0);var ce=i.readU8(he),Ae=i.readU8(he+1)|ce<<8,de=0!=(32768&Ae)?Ae-65536:Ae,_e=ee+=2;null==_e&&(_e=0);var fe=i.readU8(_e),ge=i.readU8(_e+1)|fe<<8,pe=0!=(32768&ge)?ge-65536:ge;if(ee+=2,0==(2&de))throw new ft("Error");if(0!=(1&de)){var me=ee;null==me&&(me=0);var ve=i.readU8(me),we=i.readU8(me+1)|ve<<8;le=0!=(32768&we)?we-65536:we;var be=ee+=2;null==be&&(be=0);var ye=i.readU8(be),xe=i.readU8(be+1)|ye<<8;ue=0!=(32768&xe)?xe-65536:xe,ee+=2}else{var Te=ee;null==Te&&(Te=0);var Se=i.readU8(Te);le=128<=Se?Se-256:Se;var Ee=++ee;null==Ee&&(Ee=0);var Be=i.readU8(Ee);ue=128<=Be?Be-256:Be,++ee}if(0!=(8&de)){var ke=ee;null==ke&&(ke=0);var Ie=i.readU8(ke),Ce=i.readU8(ke+1)|Ie<<8;re=oe=(0!=(32768&Ce)?Ce-65536:Ce)/16384,ee+=2,se=ae=0}else if(0!=(64&de)){var Le=ee;null==Le&&(Le=0);var Ne=i.readU8(Le),Fe=i.readU8(Le+1)|Ne<<8;re=(0!=(32768&Fe)?Fe-65536:Fe)/16384,se=ae=0;var Pe=ee+=2;null==Pe&&(Pe=0);var Me=i.readU8(Pe),Re=i.readU8(Pe+1)|Me<<8;oe=(0!=(32768&Re)?Re-65536:Re)/16384,ee+=2}else if(0!=(128&de)){var Oe=ee;null==Oe&&(Oe=0);var Ve=i.readU8(Oe),De=i.readU8(Oe+1)|Ve<<8;re=(0!=(32768&De)?De-65536:De)/16384;var Ue=ee+=2;null==Ue&&(Ue=0);var He=i.readU8(Ue),We=i.readU8(Ue+1)|He<<8;se=(0!=(32768&We)?We-65536:We)/16384;var Ge=ee+=2;null==Ge&&(Ge=0);var ze=i.readU8(Ge),Xe=i.readU8(Ge+1)|ze<<8;ae=(0!=(32768&Xe)?Xe-65536:Xe)/16384;var Ye=ee+=2;null==Ye&&(Ye=0);var Ke=i.readU8(Ye),Qe=i.readU8(Ye+1)|Ke<<8;oe=(0!=(32768&Qe)?Qe-65536:Qe)/16384,ee+=2}var qe=Math.sqrt(re*re+se*se),je=Math.sqrt(ae*ae+oe*oe);if(0<(te=null==(ie=It.stbtt_GetGlyphShape(e,pe))?0:ie.length)){for(var Ze=0,Je=te;Ze<Je;){var $e=ie[Ze++],et=$e.x,tt=$e.y;$e.x=qe*(re*et+ae*tt+le)|0,$e.y=je*(se*et+oe*tt+ue)|0,et=$e.cx,tt=$e.cy,$e.cx=qe*(re*et+ae*tt+le)|0,$e.cy=je*(se*et+oe*tt+ue)|0}if(null==(ne=new Array(r+te)))return null;0<r&&It.copyVertices(n,ne,0,r),It.copyVertices(ie,ne,r,te),n=ne,r+=te}$=32&de}}else if(u<0)throw new ft("Error");if(null==n)return null;if(n.length<r)throw new ft("Error");if(r<n.length){var it=new Array(r);return It.copyVertices(n,it,0,r),it}return n},It.stbtt_GetGlyphHMetrics=function(e,t){var i=e.data,n=e.hhea+34;null==n&&(n=0);var r=i.readU8(n),s=i.readU8(n+1)|r<<8,a=new Je;if(t<s){var o=e.data,l=e.hmtx+4*t;null==l&&(l=0);var u=o.readU8(l),h=o.readU8(l+1)|u<<8;a.advanceWidth=0!=(32768&h)?h-65536:h;var c=e.data,A=e.hmtx+4*t+2;null==A&&(A=0);var d=c.readU8(A),_=c.readU8(A+1)|d<<8;a.leftSideBearing=0!=(32768&_)?_-65536:_}else{var f=e.data,g=e.hmtx+4*(s-1);null==g&&(g=0);var p=f.readU8(g),m=f.readU8(g+1)|p<<8;a.advanceWidth=0!=(32768&m)?m-65536:m;var v=e.data,w=e.hmtx+4*s+2*(t-s);null==w&&(w=0);var b=v.readU8(w),y=v.readU8(w+1)|b<<8;a.leftSideBearing=0!=(32768&y)?y-65536:y}return a},It.stbtt_GetGlyphKernAdvance=function(e,t,i){var n,r,s=e.kern,a=e.data;if(0==e.kern)return 0;var o=s+2;null==o&&(o=0);var l=a.readU8(o);if((a.readU8(o+1)|l<<8)<1)return 0;var u=s+8;null==u&&(u=0);var h=a.readU8(u);if(1!=(a.readU8(u+1)|h<<8))return 0;var c=0,A=s+10;null==A&&(A=0);for(var d=a.readU8(A),_=(a.readU8(A+1)|d<<8)-1,f=t<<16|i;c<=_;){var g=s+18+6*(r=c+_>>1);null==g&&(g=0);var p=g;null==p&&(p=0);var m=a.readU8(p),v=a.readU8(p+1),w=a.readU8(p+2);if(f<(n=a.readU8(p+3)|w<<8|v<<16|m<<24))_=r-1;else{if(!(n<f)){var b=s+22+6*r;null==b&&(b=0);var y=a.readU8(b),x=a.readU8(b+1)|y<<8;return 0!=(32768&x)?x-65536:x}c=1+r}}return 0},It.stbtt_GetCodepointKernAdvance=function(e,t,i){return 0==e.kern?0:It.stbtt_GetGlyphKernAdvance(e,It.stbtt_FindGlyphIndex(e,t),It.stbtt_FindGlyphIndex(e,i))},It.stbtt_GetCodepointHMetrics=function(e,t){return It.stbtt_GetGlyphHMetrics(e,It.stbtt_FindGlyphIndex(e,t))},It.stbtt_GetFontVMetrics=function(e){var t=new $e,i=e.data,n=e.hhea+4;null==n&&(n=0);var r=i.readU8(n),s=i.readU8(n+1)|r<<8;t.ascent=0!=(32768&s)?s-65536:s;var a=e.data,o=e.hhea+6;null==o&&(o=0);var l=a.readU8(o),u=a.readU8(o+1)|l<<8;t.descent=0!=(32768&u)?u-65536:u;var h=e.data,c=e.hhea+8;null==c&&(c=0);var A=h.readU8(c),d=h.readU8(c+1)|A<<8;return t.lineGap=0!=(32768&d)?d-65536:d,t},It.stbtt_GetFontBoundingBox=function(e){var t=new Ze,i=e.data,n=e.head+36;null==n&&(n=0);var r=i.readU8(n),s=i.readU8(n+1)|r<<8;t.x0=0!=(32768&s)?s-65536:s;var a=e.data,o=e.head+38;null==o&&(o=0);var l=a.readU8(o),u=a.readU8(o+1)|l<<8;t.y0=0!=(32768&u)?u-65536:u;var h=e.data,c=e.head+40;null==c&&(c=0);var A=h.readU8(c),d=h.readU8(c+1)|A<<8;t.x1=0!=(32768&d)?d-65536:d;var _=e.data,f=e.head+42;null==f&&(f=0);var g=_.readU8(f),p=_.readU8(f+1)|g<<8;return t.y1=0!=(32768&p)?p-65536:p,t},It.stbtt_ScaleForPixelHeight=function(e,t){var i=e.data,n=e.hhea+4;null==n&&(n=0);var r=i.readU8(n),s=i.readU8(n+1)|r<<8,a=e.data,o=e.hhea+6;null==o&&(o=0);var l=a.readU8(o),u=a.readU8(o+1)|l<<8;return t/((0!=(32768&s)?s-65536:s)-(0!=(32768&u)?u-65536:u))},It.stbtt_ScaleForMappingEmToPixels=function(e,t){var i=e.data,n=e.head+18;null==n&&(n=0);var r=i.readU8(n);return t/(i.readU8(n+1)|r<<8)},It.stbtt_GetGlyphBitmapBoxSubpixel=function(e,t,i,n,r,s){var a=new Ze;if(It.stbtt_GetGlyphBox(e,t,a)){var o=a.x0,l=a.x1,u=a.y0,h=a.y1;a.x0=Math.floor(o*i+r),a.y0=Math.floor(-h*n+s),a.x1=Math.ceil(l*i+r),a.y1=Math.ceil(-u*n+s)}else a.x0=0,a.y0=0,a.x1=0,a.y1=0;return a},It.stbtt_GetGlyphBitmapBox=function(e,t,i,n){return It.stbtt_GetGlyphBitmapBoxSubpixel(e,t,i,n,0,0)},It.stbtt_GetCodepointBitmapBoxSubpixel=function(e,t,i,n,r,s){return It.stbtt_GetGlyphBitmapBoxSubpixel(e,It.stbtt_FindGlyphIndex(e,t),i,n,r,s)},It.stbtt_GetCodepointBitmapBox=function(e,t,i,n){return It.stbtt_GetCodepointBitmapBoxSubpixel(e,t,i,n,0,0)},It.stbtt__new_active=function(e,t,i,n){var r=new Bt,s=(e[t].x1-e[t].x0)/(e[t].y1-e[t].y0);return null==r||(r.fdx=s,r.fdy=0!=s?1/s:0,r.fx=e[t].x0+s*(n-e[t].y0),r.fx-=i,r.direction=e[t].invert?1:-1,r.sy=e[t].y0,r.ey=e[t].y1,r.next=null),r},It.stbtt__handle_clipped_edge=function(e,t,i,n,r,s,a,o){if(s!=o){if(!(s<o))throw new ft("Error");if(!(n.sy<=n.ey))throw new ft("Error");if(!(s>n.ey||o<n.sy)){if(s<n.sy&&(r+=(a-r)*(n.sy-s)/(o-s),s=n.sy),o>n.ey&&(a+=(a-r)*(n.ey-o)/(o-s),o=n.ey),r==i){if(!(a<=i+1))throw new ft("Error")}else if(r==i+1){if(!(i<=a))throw new ft("Error")}else if(r<=i){if(!(a<=i))throw new ft("Error")}else if(i+1<=r){if(!(i+1<=a))throw new ft("Error")}else if(!(i<=a&&a<=i+1))throw new ft("Error");if(r<=i&&a<=i){var l=t+i;e[l]=e[l]+n.direction*(o-s)}else if(!(i+1<=r&&i+1<=a)){if(!(i<=r&&r<=i+1&&i<=a&&a<=i+1))throw new ft("Error");var u=t+i;e[u]=e[u]+n.direction*(o-s)*(1-(r-i+(a-i))/2)}}}},It.stbtt__fill_active_edges_new=function(e,t,i,n,r,s){for(var a=s+1;null!=r;){if(!(r.ey>=s))throw new ft("Error");if(0==r.fdx){var o=r.fx;o<n&&(0<=o?(It.stbtt__handle_clipped_edge(e,0,0|o,r,o,s,o,a),It.stbtt__handle_clipped_edge(t,i-1,o+1|0,r,o,s,o,a)):It.stbtt__handle_clipped_edge(t,i-1,0,r,o,s,o,a))}else{var l,u,h,c,A=r.fx,d=r.fdx,_=A+d,f=r.fdy;if(!(r.sy<=a&&r.ey>=s))throw new ft("Error");if(h=r.sy>s?(l=A+d*(r.sy-s),r.sy):(l=A,s),c=r.ey<a?(u=A+d*(r.ey-s),r.ey):(u=_,a),0<=l&&0<=u&&l<n&&u<n)if((0|l)==(0|u)){var g=0|l,p=c-h;if(!(0<=g&&g<n))throw new ft("Error");e[g]=e[g]+r.direction*(1-(l-g+(u-g))/2)*p;var m=i+g;t[m]=t[m]+r.direction*p}else{if(u<l){var v=h=a-(h-s);h=c=a-(c-s),c=v,v=u,u=l,l=v,d=-d,f=-f,v=A,A=_,_=v}var w=0|l,b=0|u,y=(1+w-A)*f+s,x=r.direction,T=x*(y-h);e[w]=e[w]+T*(1-(l-w+(1+w-w))/2);for(var S=x*f,E=1+w,B=b;E<B;){var k=E++;e[k]=e[k]+(T+S/2),T+=S}if(y+=f*(b-(1+w)),!(Math.abs(T)<=1.01))throw new ft("Error");e[b]=e[b]+(T+x*(1-(b-b+(u-b))/2)*(c-y));var I=i+b;t[I]=t[I]+x*(c-h)}else for(var C=0,L=n;C<L;){var N=C++,F=s,P=N,M=1+N,R=_,O=a,V=(N-A)/d+s,D=(1+N-A)/d+s;A<P&&M<R?(It.stbtt__handle_clipped_edge(e,0,N,r,A,F,P,V),It.stbtt__handle_clipped_edge(e,0,N,r,P,V,M,D),It.stbtt__handle_clipped_edge(e,0,N,r,M,D,R,O)):R<P&&M<A?(It.stbtt__handle_clipped_edge(e,0,N,r,A,F,M,D),It.stbtt__handle_clipped_edge(e,0,N,r,M,D,P,V),It.stbtt__handle_clipped_edge(e,0,N,r,P,V,R,O)):A<P&&P<R||R<P&&P<A?(It.stbtt__handle_clipped_edge(e,0,N,r,A,F,P,V),It.stbtt__handle_clipped_edge(e,0,N,r,P,V,R,O)):A<M&&M<R||R<M&&M<A?(It.stbtt__handle_clipped_edge(e,0,N,r,A,F,M,D),It.stbtt__handle_clipped_edge(e,0,N,r,M,D,R,O)):It.stbtt__handle_clipped_edge(e,0,N,r,A,F,R,O)}}r=r.next}},It.stbtt__rasterize_sorted_edges=function(e,t,i,n,r,s){var a,o,l=null,u=0,h=0;64<e.w?a=new Array(2*e.w+1):a=new Array(129);var c=a;o=e.w;var A=s;for(t[h+i].y0=s+e.h+1;u<e.h;){for(var d=A+0,_=A+1,f=l,g=null,p=0,m=e.w;p<m;){a[p++]=0}for(var v=0,w=e.w+1;v<w;){c[o+v++]=0}for(;null!=f;){var b=f;if(b.ey<=d){if(f=(null==g?l=b.next:g.next=b.next,b.next),0==b.direction)throw new ft("Error");b.direction=0}else f=(g=f).next}for(;t[h].y0<=_;){if(t[h].y0!=t[h].y1){var y=It.stbtt__new_active(t,h,r,d);if(!(y.ey>=d))throw new ft("Error");y.next=l,l=y}++h}null!=l&&It.stbtt__fill_active_edges_new(a,c,o+1,e.w,l,d);for(var x=0,T=0,S=e.w;T<S;){var E=T++;x+=c[o+E];var B=a[E]+x,k=0|(B=255*Math.abs(B)+.5);255<k&&(k=255),e.pixels.writeU8(e.pixels_offset+u*e.stride+E,k)}for(g=null,f=l;null!=f;){f.fx+=f.fdx,f=(g=f).next}++A,++u}},It.STBTT__COMPARE=function(e,t){return e.y0<t.y0},It.stbtt__sort_edges_ins_sort=function(e,t){for(var i,n=1,r=t;n<r;){var s=n++,a=e[s],o=a;for(i=s;0<i;){var l=e[i-1];if(!It.STBTT__COMPARE(o,l))break;e[i]=e[i-1],--i}s!=i&&(e[i]=a)}},It.stbtt__sort_edges_quicksort=function(e,t,i){for(;12<i;){var n,r=i>>1,s=It.STBTT__COMPARE(e[t],e[t+r]),a=It.STBTT__COMPARE(e[t+r],e[t+i-1]);if(s!=a){var o=It.STBTT__COMPARE(e[t],e[t+i-1])==a?0:i-1;n=e[t+o],e[t+o]=e[t+r],e[t+r]=n}n=e[t],e[t]=e[t+r],e[t+r]=n;for(var l=1,u=i-1;;){for(;It.STBTT__COMPARE(e[t+l],e[t]);)++l;for(;It.STBTT__COMPARE(e[t],e[t+u]);)--u;if(u<=l)break;n=e[t+l],e[t+l]=e[t+u],e[t+u]=n,++l,--u}u<i-l?(It.stbtt__sort_edges_quicksort(e,t,u),t+=l,i-=l):(It.stbtt__sort_edges_quicksort(e,t+l,i-l),i=u)}},It.stbtt__sort_edges=function(e,t){It.stbtt__sort_edges_quicksort(e,0,t),It.stbtt__sort_edges_ins_sort(e,t)},It.stbtt__rasterize=function(e,t,i,n,r,s,a,o,l,u,h){for(var c,A=h?-s:s,d=0,_=0,f=n;_<f;){d+=i[_++]}var g=new Array(d+1);if(null!=g){for(var p=0,m=g.length;p<m;){g[p++]=new Et}for(var v=d=0,w=0,b=n;w<b;){var y=w++,x=t,T=0+v;v+=i[y],c=i[y]-1;for(var S=0,E=i[y];S<E;){var B=S++,k=B,I=c;x[T+c].y!=x[T+B].y?(g[d].invert=!1,(h?x[T+c].y>x[T+B].y:x[T+c].y<x[T+B].y)&&(g[d].invert=!0,k=c,I=B),g[d].x0=x[T+k].x*r+a,g[d].y0=+(x[T+k].y*A+o),g[d].x1=x[T+I].x*r+a,g[d].y1=+(x[T+I].y*A+o),++d,c=B):c=B}}It.stbtt__sort_edges(g,d),It.stbtt__rasterize_sorted_edges(e,g,d,1,l,u)}},It.stbtt__add_point=function(e,t,i,n){null!=e&&(e[t].x=i,e[t].y=n)},It.stbtt__tesselate_curve=function(e,t,i,n,r,s,a,o,l,u){var h=(i+2*r+a)/4,c=(n+2*s+o)/4,A=(i+a)/2-h,d=(n+o)/2-c;return 16<u||(l<A*A+d*d?(It.stbtt__tesselate_curve(e,t,i,n,(i+r)/2,(n+s)/2,h,c,l,u+1),It.stbtt__tesselate_curve(e,t,h,c,(r+a)/2,(s+o)/2,a,o,l,u+1)):(It.stbtt__add_point(e,t.value,a,o),t.value+=1)),1},It.stbtt_FlattenCurves=function(e,t,i,n,r){for(var s=null,a=0,o=i*i,l=0,u=0,h=0,c=t;h<c;){1==e[h++].type&&++l}if(0==(r.value=l))return null;var A=new Array(l);if(n.value=A,null==n.value)return r.value=0,null;for(var d=0;d<2;){var _=0,f=0;if(1==d++){if(null==(s=new Array(a)))return n.value=null,r.value=0,null;for(var g=0,p=s.length;g<p;){s[g++]=new kt}}l=-1;for(var m=a=0,v=t;m<v;){var w=m++;switch(e[w].type){case 1:0<=l&&(n.value[l]=a-u),++l,u=a,_=e[w].x,f=e[w].y,It.stbtt__add_point(s,a++,_,f);break;case 2:_=e[w].x,f=e[w].y,It.stbtt__add_point(s,a++,_,f);break;case 3:var b={value:a};It.stbtt__tesselate_curve(s,b,_,f,e[w].cx,e[w].cy,e[w].x,e[w].y,o,0),a=b.value,_=e[w].x,f=e[w].y}}n.value[l]=a-u}return s},It.stbtt_Rasterize=function(e,t,i,n,r,s,a,o,l,u,h){var c,A=s<r?s:r,d=0,_={value:d},f=new je,g=It.stbtt_FlattenCurves(i,n,t/A,f,_);d=_.value,c=f.value,null!=g&&It.stbtt__rasterize(e,g,c,d,r,s,a,o,l,u,h)},It.stbtt_GetGlyphBitmapSubpixel=function(e,t,i,n,r,s,a){var o=new St,l=It.stbtt_GetGlyphShape(e,s),u=l.length;if(0==t&&(t=i),0==i){if(0==t)return null;i=t}var h=It.stbtt_GetGlyphBitmapBoxSubpixel(e,s,t,i,n,r),c=h.x0,A=h.y0,d=h.x1,_=h.y1;return o.w=d-c,o.h=_-A,o.pixels=null,a.width=o.w,a.height=o.h,a.xoff=c,a.yoff=A,0!=o.w&&0!=o.h&&(o.pixels=si.alloc(o.w*o.h),null!=o.pixels&&(o.stride=o.w,It.stbtt_Rasterize(o,.35,l,u,t,i,n,r,c,A,!0))),o.pixels},It.stbtt_GetGlyphBitmap=function(e,t,i,n,r){return It.stbtt_GetGlyphBitmapSubpixel(e,t,i,0,0,n,r)},It.stbtt_MakeGlyphBitmapSubpixel=function(e,t,i,n,r,s,a,o,l,u,h){var c,A,d=It.stbtt_GetGlyphShape(e,h),_=null==d?0:d.length,f=new St,g=It.stbtt_GetGlyphBitmapBoxSubpixel(e,h,a,o,l,u);c=g.x0,A=g.y0,f.pixels=t,f.pixels_offset=i,f.w=n,f.h=r,f.stride=s,0!=f.w&&0!=f.h&&It.stbtt_Rasterize(f,.35,d,_,a,o,l,u,c,A,!0)},It.stbtt_MakeGlyphBitmap=function(e,t,i,n,r,s,a,o,l){It.stbtt_MakeGlyphBitmapSubpixel(e,t,i,n,r,s,a,o,0,0,l)},It.stbtt_GetCodepointBitmapSubpixel=function(e,t,i,n,r,s,a){return It.stbtt_GetGlyphBitmapSubpixel(e,t,i,n,r,It.stbtt_FindGlyphIndex(e,s),a)},It.stbtt_MakeCodepointBitmapSubpixel=function(e,t,i,n,r,s,a,o,l,u,h){It.stbtt_MakeGlyphBitmapSubpixel(e,t,i,n,r,s,a,o,l,u,It.stbtt_FindGlyphIndex(e,h))},It.stbtt_GetCodepointBitmap=function(e,t,i,n,r){return It.stbtt_GetCodepointBitmapSubpixel(e,t,i,0,0,n,r)},It.stbtt_MakeCodepointBitmap=function(e,t,i,n,r,s,a,o,l){It.stbtt_MakeCodepointBitmapSubpixel(e,t,i,n,r,s,a,o,0,0,l)},It.stbtt_BakeFontBitmap=function(e,t,i,n,r,s,a,o){var l=new xt;if(!It.stbtt_InitFont(l,e,t))return-1;for(var u=1,h=u,c=1,A=It.stbtt_ScaleForPixelHeight(l,i),d=0,_=0;_<a.length;){var f=a[_];++_;var g=It.stbtt_FindGlyphIndex(l,f),p=It.stbtt_GetGlyphHMetrics(l,g),m=p.advanceWidth,v=(p.leftSideBearing,It.stbtt_GetGlyphBitmapBox(l,g,A,A)),w=v.x0,b=v.y0,y=v.x1-w,x=v.y1-b;if(r<=h+y+1&&(u=c,h=1),s<=u+x+1)return-d;if(r<=h+y)throw new ft("Error");if(s<=u+x)throw new ft("Error");o[d].x0=h,o[d].y0=u,o[d].x1=h+y,o[d].y1=u+x,o[d].xadvance=A*m,o[d].xoff=w,o[d].yoff=b,h=h+y+1,c<u+x+1&&(c=u+x+1),++d}for(var T,S=0,E=r*s;S<E;){var B=S++;n.writeU8(B,0)}for(var k=d=0;k<a.length;){var I=a[k];++k;var C=It.stbtt_FindGlyphIndex(l,I);T=o[d],It.stbtt_MakeGlyphBitmap(l,n,T.x0+T.y0*r,T.x1-T.x0,T.y1-T.y0,r,A,A,C),++d}return c},It.stbtt_GetBakedQuad=function(e,t,i,n,r,s,a,o){var l=o?0:-.5,u=1/t,h=1/i,c=e[n],A=Math.floor(r.value+c.xoff+.5),d=Math.floor(s.value+c.yoff+.5);a.x0=A+l,a.y0=d+l,a.x1=A+c.x1-c.x0+l,a.y1=d+c.y1-c.y0+l,a.s0=c.x0*u,a.t0=c.y0*h,a.s1=c.x1*u,a.t1=c.y1*h,r.value+=c.xadvance};function Ct(){}(x["kha.graphics4.ConstantLocation"]=Ct).__name__=!0,Ct.__isInterface__=!0;function Lt(e){this.texture_=e}(x["kha.graphics4.CubeMap"]=Lt).__name__=!0,Lt.__interfaces__=[M,w],Lt.getRenderTargetFormat=function(e){switch(e){case 0:return 0;case 2:return 3;case 3:return 4;case 4:return 1;default:return 0}},Lt.getDepthBufferBits=function(e){switch(e){case 0:return-1;case 1:case 2:case 3:return 24;case 4:return 32;case 5:return 16}},Lt.getStencilBufferBits=function(e){switch(e){case 0:case 1:return-1;case 2:case 3:case 4:return 8;case 5:return 0}},Lt.getTextureFormat=function(e){switch(e){case 0:return 0;case 2:return 3;case 4:return 4;case 5:return 5;default:return 1}},Lt.createRenderTarget=function(e,t,i,n){null==n&&(n=0),null==i&&(i=0),null==t&&(t=0);var r=new Lt(null);return r.format=t,r.renderTarget_=Krom.createRenderTargetCubeMap(e,Lt.getDepthBufferBits(i),Lt.getRenderTargetFormat(t),Lt.getStencilBufferBits(i),n),r},Lt.prototype={texture_:null,renderTarget_:null,format:null,graphics4:null,unload:function(){},lock:function(e){return null==e&&(e=0),null},unlock:function(){},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},g1:null,get_g1:function(){return null},g2:null,get_g2:function(){return null},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new ai(this)),this.graphics4},__class__:Lt,__properties__:{get_g4:"get_g4",get_g2:"get_g2",get_g1:"get_g1",get_height:"get_height",get_width:"get_width"}};var Nt=function(e,t){null!=e&&(this.shader=Krom.createFragmentShader(e[0].bytes.b.bufferValue,t[0]))};(x["kha.graphics4.FragmentShader"]=Nt).__name__=!0,Nt.fromSource=function(e){var t=new Nt(null,null);return t.shader=Krom.createFragmentShaderFromSource(e),t},Nt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Nt};function Ft(e,t){this.shader=Krom.createGeometryShader(e[0].bytes.b.bufferValue,t[0])}(x["kha.graphics4.GeometryShader"]=Ft).__name__=!0,Ft.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Ft};function Pt(){}(x["kha.graphics4.Graphics"]=Pt).__name__=!0,Pt.__isInterface__=!0,Pt.prototype={begin:null,beginFace:null,beginEye:null,end:null,vsynced:null,refreshRate:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setTextureArray:null,setVideoTexture:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setTextureCompareMode:null,setCubeMapCompareMode:null,setCubeMap:null,setCubeMapDepth:null,setStencilReferenceValue:null,instancedRenderingAvailable:null,setPipeline:null,setBool:null,setInt:null,setInt2:null,setInt3:null,setInt4:null,setInts:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setVector2:null,setVector3:null,setVector4:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null,flush:null,__class__:Pt};function Mt(e){this.pipeline=e;try{this.projectionLocation=e.getConstantLocation("projectionMatrix")}catch(e){L.trace(e instanceof ft?e.val:e,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:39,className:"kha.graphics4.PipelineCache",methodName:"new"})}try{this.textureLocation=e.getTextureUnit("tex")}catch(e){L.trace(e instanceof ft?e.val:e,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:40,className:"kha.graphics4.PipelineCache",methodName:"new"})}}(x["kha.graphics4.PipelineCache"]=Mt).__name__=!0,Mt.prototype={pipeline:null,projectionLocation:null,textureLocation:null,__class__:Mt};var Rt=function(e){this.myPipeline=null,this.bilinearMipmaps=!1,this.bilinear=!1,this.g=e,Rt.bufferIndex=0,Rt.initShaders(),this.myPipeline=Rt.standardImagePipeline,this.initBuffers()};(x["kha.graphics4.ImageShaderPainter"]=Rt).__name__=!0,Rt.initShaders=function(){if(null==Rt.structure&&(Rt.structure=Dt.createImageVertexStructure()),null==Rt.standardImagePipeline){var e=Dt.createImagePipeline(Rt.structure);e.compile(),Rt.standardImagePipeline=new Mt(e)}},Rt.prototype={projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.myPipeline=null!=e?e:Rt.standardImagePipeline,this.myPipeline},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==Rt.rectVertexBuffer){Rt.rectVertexBuffer=new Kt(6e3,Rt.structure,1),Rt.rectVertices=Rt.rectVertexBuffer.lock(),Rt.indexBuffer=new Ut(9e3,0);for(var e=Rt.indexBuffer.lock(),t=0;t<1500;){var i=t++;e[3*i*2]=4*i,e[3*i*2+1]=4*i+1,e[3*i*2+2]=4*i+2,e[3*i*2+3]=4*i,e[3*i*2+4]=4*i+2,e[3*i*2+5]=4*i+3}Rt.indexBuffer.unlock()}},setRectVertices:function(e,t,i,n,r,s,a,o){var l=9*Rt.bufferIndex*4;Rt.rectVertices[l]=e,Rt.rectVertices[1+l]=t,Rt.rectVertices[2+l]=-5,Rt.rectVertices[9+l]=i,Rt.rectVertices[10+l]=n,Rt.rectVertices[11+l]=-5,Rt.rectVertices[18+l]=r,Rt.rectVertices[19+l]=s,Rt.rectVertices[20+l]=-5,Rt.rectVertices[27+l]=a,Rt.rectVertices[28+l]=o,Rt.rectVertices[29+l]=-5},setRectTexCoords:function(e,t,i,n){var r=9*Rt.bufferIndex*4;Rt.rectVertices[3+r]=e,Rt.rectVertices[4+r]=n,Rt.rectVertices[12+r]=e,Rt.rectVertices[13+r]=t,Rt.rectVertices[21+r]=i,Rt.rectVertices[22+r]=t,Rt.rectVertices[30+r]=i,Rt.rectVertices[31+r]=n},setRectColor:function(e,t,i,n){var r=9*Rt.bufferIndex*4;Rt.rectVertices[5+r]=e,Rt.rectVertices[6+r]=t,Rt.rectVertices[7+r]=i,Rt.rectVertices[8+r]=n,Rt.rectVertices[14+r]=e,Rt.rectVertices[15+r]=t,Rt.rectVertices[16+r]=i,Rt.rectVertices[17+r]=n,Rt.rectVertices[23+r]=e,Rt.rectVertices[24+r]=t,Rt.rectVertices[25+r]=i,Rt.rectVertices[26+r]=n,Rt.rectVertices[32+r]=e,Rt.rectVertices[33+r]=t,Rt.rectVertices[34+r]=i,Rt.rectVertices[35+r]=n},drawBuffer:function(){Rt.rectVertexBuffer.unlock(4*Rt.bufferIndex),this.g.setVertexBuffer(Rt.rectVertexBuffer),this.g.setIndexBuffer(Rt.indexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setTexture(this.myPipeline.textureLocation,Rt.lastTexture),this.g.setTextureParameters(this.myPipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,this.bilinearMipmaps?2:0),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*Rt.bufferIndex*3),this.g.setTexture(this.myPipeline.textureLocation,null),Rt.bufferIndex=0,Rt.rectVertices=Rt.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setBilinearMipmapFilter:function(e){this.end(),this.bilinearMipmaps=e},drawImage:function(e,t,i,n,r,s,a,o,l,u,h){var c=e;(1500<=Rt.bufferIndex+1||null!=Rt.lastTexture&&c!=Rt.lastTexture)&&this.drawBuffer();var A=.00392156862745098*((16711680&h)>>>16),d=.00392156862745098*((65280&h)>>>8),_=.00392156862745098*(255&h),f=.00392156862745098*(h>>>24)*u,g=9*Rt.bufferIndex*4;Rt.rectVertices[5+g]=A,Rt.rectVertices[6+g]=d,Rt.rectVertices[7+g]=_,Rt.rectVertices[8+g]=f,Rt.rectVertices[14+g]=A,Rt.rectVertices[15+g]=d,Rt.rectVertices[16+g]=_,Rt.rectVertices[17+g]=f,Rt.rectVertices[23+g]=A,Rt.rectVertices[24+g]=d,Rt.rectVertices[25+g]=_,Rt.rectVertices[26+g]=f,Rt.rectVertices[32+g]=A,Rt.rectVertices[33+g]=d,Rt.rectVertices[34+g]=_,Rt.rectVertices[35+g]=f;var p=c.get_width()/c.get_realWidth(),m=c.get_height()/c.get_realHeight(),v=9*Rt.bufferIndex*4;Rt.rectVertices[3+v]=0,Rt.rectVertices[4+v]=m,Rt.rectVertices[12+v]=0,Rt.rectVertices[13+v]=0,Rt.rectVertices[21+v]=p,Rt.rectVertices[22+v]=0,Rt.rectVertices[30+v]=p,Rt.rectVertices[31+v]=m;var w=9*Rt.bufferIndex*4;Rt.rectVertices[w]=t,Rt.rectVertices[1+w]=i,Rt.rectVertices[2+w]=-5,Rt.rectVertices[9+w]=n,Rt.rectVertices[10+w]=r,Rt.rectVertices[11+w]=-5,Rt.rectVertices[18+w]=s,Rt.rectVertices[19+w]=a,Rt.rectVertices[20+w]=-5,Rt.rectVertices[27+w]=o,Rt.rectVertices[28+w]=l,Rt.rectVertices[29+w]=-5,++Rt.bufferIndex,Rt.lastTexture=c},drawImage2:function(e,t,i,n,r,s,a,o,l,u,h,c,A,d,_){var f=e;(1500<=Rt.bufferIndex+1||null!=Rt.lastTexture&&f!=Rt.lastTexture)&&this.drawBuffer();var g=t/f.get_realWidth(),p=i/f.get_realHeight(),m=(t+n)/f.get_realWidth(),v=(i+r)/f.get_realHeight(),w=9*Rt.bufferIndex*4;Rt.rectVertices[3+w]=g,Rt.rectVertices[4+w]=v,Rt.rectVertices[12+w]=g,Rt.rectVertices[13+w]=p,Rt.rectVertices[21+w]=m,Rt.rectVertices[22+w]=p,Rt.rectVertices[30+w]=m,Rt.rectVertices[31+w]=v;var b=.00392156862745098*((16711680&_)>>>16),y=.00392156862745098*((65280&_)>>>8),x=.00392156862745098*(255&_),T=.00392156862745098*(_>>>24)*d,S=9*Rt.bufferIndex*4;Rt.rectVertices[5+S]=b,Rt.rectVertices[6+S]=y,Rt.rectVertices[7+S]=x,Rt.rectVertices[8+S]=T,Rt.rectVertices[14+S]=b,Rt.rectVertices[15+S]=y,Rt.rectVertices[16+S]=x,Rt.rectVertices[17+S]=T,Rt.rectVertices[23+S]=b,Rt.rectVertices[24+S]=y,Rt.rectVertices[25+S]=x,Rt.rectVertices[26+S]=T,Rt.rectVertices[32+S]=b,Rt.rectVertices[33+S]=y,Rt.rectVertices[34+S]=x,Rt.rectVertices[35+S]=T;var E=9*Rt.bufferIndex*4;Rt.rectVertices[E]=s,Rt.rectVertices[1+E]=a,Rt.rectVertices[2+E]=-5,Rt.rectVertices[9+E]=o,Rt.rectVertices[10+E]=l,Rt.rectVertices[11+E]=-5,Rt.rectVertices[18+E]=u,Rt.rectVertices[19+E]=h,Rt.rectVertices[20+E]=-5,Rt.rectVertices[27+E]=c,Rt.rectVertices[28+E]=A,Rt.rectVertices[29+E]=-5,++Rt.bufferIndex,Rt.lastTexture=f},drawImageScale:function(e,t,i,n,r,s,a,o,l,u,h){var c=e;(1500<=Rt.bufferIndex+1||null!=Rt.lastTexture&&c!=Rt.lastTexture)&&this.drawBuffer();var A=t/c.get_realWidth(),d=i/c.get_realHeight(),_=(t+n)/c.get_realWidth(),f=(i+r)/c.get_realHeight(),g=9*Rt.bufferIndex*4;Rt.rectVertices[3+g]=A,Rt.rectVertices[4+g]=f,Rt.rectVertices[12+g]=A,Rt.rectVertices[13+g]=d,Rt.rectVertices[21+g]=_,Rt.rectVertices[22+g]=d,Rt.rectVertices[30+g]=_,Rt.rectVertices[31+g]=f;var p=.00392156862745098*((16711680&h)>>>16),m=.00392156862745098*((65280&h)>>>8),v=.00392156862745098*(255&h),w=9*Rt.bufferIndex*4;Rt.rectVertices[5+w]=p,Rt.rectVertices[6+w]=m,Rt.rectVertices[7+w]=v,Rt.rectVertices[8+w]=u,Rt.rectVertices[14+w]=p,Rt.rectVertices[15+w]=m,Rt.rectVertices[16+w]=v,Rt.rectVertices[17+w]=u,Rt.rectVertices[23+w]=p,Rt.rectVertices[24+w]=m,Rt.rectVertices[25+w]=v,Rt.rectVertices[26+w]=u,Rt.rectVertices[32+w]=p,Rt.rectVertices[33+w]=m,Rt.rectVertices[34+w]=v,Rt.rectVertices[35+w]=u;var b=9*Rt.bufferIndex*4;Rt.rectVertices[b]=s,Rt.rectVertices[1+b]=l,Rt.rectVertices[2+b]=-5,Rt.rectVertices[9+b]=s,Rt.rectVertices[10+b]=a,Rt.rectVertices[11+b]=-5,Rt.rectVertices[18+b]=o,Rt.rectVertices[19+b]=a,Rt.rectVertices[20+b]=-5,Rt.rectVertices[27+b]=o,Rt.rectVertices[28+b]=l,Rt.rectVertices[29+b]=-5,++Rt.bufferIndex,Rt.lastTexture=c},end:function(){0<Rt.bufferIndex&&this.drawBuffer(),Rt.lastTexture=null},__class__:Rt,__properties__:{set_pipeline:"set_pipeline",get_pipeline:"get_pipeline"}};var Ot=function(e){this.myPipeline=null,this.g=e,Ot.bufferIndex=0,Ot.triangleBufferIndex=0,Ot.initShaders(),this.myPipeline=Ot.standardColorPipeline,this.initBuffers()};(x["kha.graphics4.ColoredShaderPainter"]=Ot).__name__=!0,Ot.initShaders=function(){if(null==Ot.structure&&(Ot.structure=Dt.createColoredVertexStructure()),null==Ot.standardColorPipeline){var e=Dt.createColoredPipeline(Ot.structure);e.compile(),Ot.standardColorPipeline=new Mt(e)}},Ot.prototype={projectionMatrix:null,g:null,myPipeline:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.myPipeline=null!=e?e:Ot.standardColorPipeline,this.myPipeline},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==Ot.rectVertexBuffer){Ot.rectVertexBuffer=new Kt(4e3,Ot.structure,1),Ot.rectVertices=Ot.rectVertexBuffer.lock(),Ot.indexBuffer=new Ut(6e3,0);for(var e=Ot.indexBuffer.lock(),t=0;t<1e3;){var i=t++;e[3*i*2]=4*i,e[3*i*2+1]=4*i+1,e[3*i*2+2]=4*i+2,e[3*i*2+3]=4*i,e[3*i*2+4]=4*i+2,e[3*i*2+5]=4*i+3}Ot.indexBuffer.unlock(),Ot.triangleVertexBuffer=new Kt(3e3,Ot.structure,1),Ot.triangleVertices=Ot.triangleVertexBuffer.lock(),Ot.triangleIndexBuffer=new Ut(3e3,0);for(var n=Ot.triangleIndexBuffer.lock(),r=0;r<1e3;){var s=r++;n[3*s]=3*s,n[3*s+1]=3*s+1,n[3*s+2]=3*s+2}Ot.triangleIndexBuffer.unlock()}},setRectVertices:function(e,t,i,n,r,s,a,o){var l=7*Ot.bufferIndex*4;Ot.rectVertices[l]=e,Ot.rectVertices[1+l]=t,Ot.rectVertices[2+l]=-5,Ot.rectVertices[7+l]=i,Ot.rectVertices[8+l]=n,Ot.rectVertices[9+l]=-5,Ot.rectVertices[14+l]=r,Ot.rectVertices[15+l]=s,Ot.rectVertices[16+l]=-5,Ot.rectVertices[21+l]=a,Ot.rectVertices[22+l]=o,Ot.rectVertices[23+l]=-5},setRectColors:function(e,t){var i=7*Ot.bufferIndex*4,n=e*(.00392156862745098*(t>>>24)),r=.00392156862745098*((16711680&t)>>>16)*n,s=.00392156862745098*((65280&t)>>>8)*n,a=.00392156862745098*(255&t)*n;Ot.rectVertices[3+i]=r,Ot.rectVertices[4+i]=s,Ot.rectVertices[5+i]=a,Ot.rectVertices[6+i]=n,Ot.rectVertices[10+i]=r,Ot.rectVertices[11+i]=s,Ot.rectVertices[12+i]=a,Ot.rectVertices[13+i]=n,Ot.rectVertices[17+i]=r,Ot.rectVertices[18+i]=s,Ot.rectVertices[19+i]=a,Ot.rectVertices[20+i]=n,Ot.rectVertices[24+i]=r,Ot.rectVertices[25+i]=s,Ot.rectVertices[26+i]=a,Ot.rectVertices[27+i]=n},setTriVertices:function(e,t,i,n,r,s){var a=7*Ot.triangleBufferIndex*3;Ot.triangleVertices[a]=e,Ot.triangleVertices[1+a]=t,Ot.triangleVertices[2+a]=-5,Ot.triangleVertices[7+a]=i,Ot.triangleVertices[8+a]=n,Ot.triangleVertices[9+a]=-5,Ot.triangleVertices[14+a]=r,Ot.triangleVertices[15+a]=s,Ot.triangleVertices[16+a]=-5},setTriColors:function(e,t){var i=7*Ot.triangleBufferIndex*3,n=e*(.00392156862745098*(t>>>24)),r=.00392156862745098*((16711680&t)>>>16)*n,s=.00392156862745098*((65280&t)>>>8)*n,a=.00392156862745098*(255&t)*n;Ot.triangleVertices[3+i]=r,Ot.triangleVertices[4+i]=s,Ot.triangleVertices[5+i]=a,Ot.triangleVertices[6+i]=n,Ot.triangleVertices[10+i]=r,Ot.triangleVertices[11+i]=s,Ot.triangleVertices[12+i]=a,Ot.triangleVertices[13+i]=n,Ot.triangleVertices[17+i]=r,Ot.triangleVertices[18+i]=s,Ot.triangleVertices[19+i]=a,Ot.triangleVertices[20+i]=n},drawBuffer:function(e){e||0<Ot.triangleBufferIndex&&this.drawTriBuffer(!0),Ot.rectVertexBuffer.unlock(4*Ot.bufferIndex),this.g.setVertexBuffer(Ot.rectVertexBuffer),this.g.setIndexBuffer(Ot.indexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,2*Ot.bufferIndex*3),Ot.bufferIndex=0,Ot.rectVertices=Ot.rectVertexBuffer.lock()},drawTriBuffer:function(e){e||0<Ot.bufferIndex&&this.drawBuffer(!0),Ot.triangleVertexBuffer.unlock(3*Ot.triangleBufferIndex),this.g.setVertexBuffer(Ot.triangleVertexBuffer),this.g.setIndexBuffer(Ot.triangleIndexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*Ot.triangleBufferIndex),Ot.triangleBufferIndex=0,Ot.triangleVertices=Ot.triangleVertexBuffer.lock()},fillRect:function(e,t,i,n,r,s,a,o,l,u){0<Ot.triangleBufferIndex&&this.drawTriBuffer(!0),1e3<=Ot.bufferIndex+1&&this.drawBuffer(!1),this.setRectColors(e,t),this.setRectVertices(i,n,r,s,a,o,l,u),++Ot.bufferIndex},fillTriangle:function(e,t,i,n,r,s,a,o){0<Ot.bufferIndex&&this.drawBuffer(!0),1e3<=Ot.triangleBufferIndex+1&&this.drawTriBuffer(!1),this.setTriColors(e,t),this.setTriVertices(i,n,r,s,a,o),++Ot.triangleBufferIndex},endTris:function(e){0<Ot.triangleBufferIndex&&this.drawTriBuffer(e)},endRects:function(e){0<Ot.bufferIndex&&this.drawBuffer(e)},end:function(){0<Ot.triangleBufferIndex&&this.drawTriBuffer(!1),0<Ot.bufferIndex&&this.drawBuffer(!1)},__class__:Ot,__properties__:{set_pipeline:"set_pipeline",get_pipeline:"get_pipeline"}};var Vt=function(e){this.bakedQuadCache=new O,this.bilinear=!1,this.myPipeline=null,this.g=e,Vt.bufferIndex=0,Vt.initShaders(),this.myPipeline=Vt.standardTextPipeline,this.initBuffers()};(x["kha.graphics4.TextShaderPainter"]=Vt).__name__=!0,Vt.initShaders=function(){if(null==Vt.structure&&(Vt.structure=Dt.createTextVertexStructure()),null==Vt.standardTextPipeline){var e=Dt.createTextPipeline(Vt.structure);e.compile(),Vt.standardTextPipeline=new Mt(e)}},Vt.findIndex=function(e){Qe.fontGlyphs;for(var t=V.charBlocks,i=0,n=0,r=t.length/2|0;n<r;){var s=n++,a=t[2*s],o=t[2*s+1];if(a<=e&&e<=o)return i+e-a;i+=o-a+1}return 0},Vt.prototype={projectionMatrix:null,font:null,g:null,myPipeline:null,fontSize:null,bilinear:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.myPipeline=null!=e?e:Vt.standardTextPipeline,this.myPipeline},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==Vt.rectVertexBuffer){Vt.rectVertexBuffer=new Kt(4e3,Vt.structure,1),Vt.rectVertices=Vt.rectVertexBuffer.lock(),Vt.indexBuffer=new Ut(6e3,0);for(var e=Vt.indexBuffer.lock(),t=0;t<1e3;){var i=t++;e[3*i*2]=4*i,e[3*i*2+1]=4*i+1,e[3*i*2+2]=4*i+2,e[3*i*2+3]=4*i,e[3*i*2+4]=4*i+2,e[3*i*2+5]=4*i+3}Vt.indexBuffer.unlock()}},setRectVertices:function(e,t,i,n,r,s,a,o){var l=9*Vt.bufferIndex*4;Vt.rectVertices[l]=e,Vt.rectVertices[1+l]=t,Vt.rectVertices[2+l]=-5,Vt.rectVertices[9+l]=i,Vt.rectVertices[10+l]=n,Vt.rectVertices[11+l]=-5,Vt.rectVertices[18+l]=r,Vt.rectVertices[19+l]=s,Vt.rectVertices[20+l]=-5,Vt.rectVertices[27+l]=a,Vt.rectVertices[28+l]=o,Vt.rectVertices[29+l]=-5},setRectTexCoords:function(e,t,i,n){var r=9*Vt.bufferIndex*4;Vt.rectVertices[3+r]=e,Vt.rectVertices[4+r]=n,Vt.rectVertices[12+r]=e,Vt.rectVertices[13+r]=t,Vt.rectVertices[21+r]=i,Vt.rectVertices[22+r]=t,Vt.rectVertices[30+r]=i,Vt.rectVertices[31+r]=n},setRectColors:function(e,t){var i=9*Vt.bufferIndex*4,n=e*(.00392156862745098*(t>>>24));Vt.rectVertices[5+i]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[6+i]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[7+i]=.00392156862745098*(255&t),Vt.rectVertices[8+i]=n,Vt.rectVertices[14+i]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[15+i]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[16+i]=.00392156862745098*(255&t),Vt.rectVertices[17+i]=n,Vt.rectVertices[23+i]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[24+i]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[25+i]=.00392156862745098*(255&t),Vt.rectVertices[26+i]=n,Vt.rectVertices[32+i]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[33+i]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[34+i]=.00392156862745098*(255&t),Vt.rectVertices[35+i]=n},drawBuffer:function(){Vt.rectVertexBuffer.unlock(4*Vt.bufferIndex),this.g.setVertexBuffer(Vt.rectVertexBuffer),this.g.setIndexBuffer(Vt.indexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setTexture(this.myPipeline.textureLocation,Vt.lastTexture),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.setTextureParameters(this.myPipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,0),this.g.drawIndexedVertices(0,2*Vt.bufferIndex*3),this.g.setTexture(this.myPipeline.textureLocation,null),Vt.bufferIndex=0,Vt.rectVertices=Vt.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setFont:function(e){this.font=g.__cast(e,D)},bakedQuadCache:null,drawString:function(e,t,i,n,r,s){var a=this.font._get(this.fontSize),o=a.getTexture();null!=Vt.lastTexture&&o!=Vt.lastTexture&&this.drawBuffer(),Vt.lastTexture=o;for(var l=n,u=r,h=0,c=e.length;h<c;){var A=h++,d=e.charCodeAt(A),_=a.getBakedQuad(this.bakedQuadCache,Vt.findIndex(d),l,u);if(null!=_){1e3<=Vt.bufferIndex+1&&this.drawBuffer(),this.setRectColors(t,i),this.setRectTexCoords(_.s0*o.get_width()/o.get_realWidth(),_.t0*o.get_height()/o.get_realHeight(),_.s1*o.get_width()/o.get_realWidth(),_.t1*o.get_height()/o.get_realHeight());var f=_.x0,g=_.y1;null==g&&(g=0),null==f&&(f=0);var p=s._02*f+s._12*g+s._22,m=(s._00*f+s._10*g+s._20)/p,v=(s._01*f+s._11*g+s._21)/p;null==v&&(v=0),null==m&&(m=0);var w=m,b=v,y=_.x0,x=_.y0;null==x&&(x=0),null==y&&(y=0);var T=s._02*y+s._12*x+s._22,S=(s._00*y+s._10*x+s._20)/T,E=(s._01*y+s._11*x+s._21)/T;null==E&&(E=0),null==S&&(S=0);var B=S,k=E,I=_.x1,C=_.y0;null==C&&(C=0),null==I&&(I=0);var L=s._02*I+s._12*C+s._22,N=(s._00*I+s._10*C+s._20)/L,F=(s._01*I+s._11*C+s._21)/L;null==F&&(F=0),null==N&&(N=0);var P=N,M=F,R=_.x1,O=_.y1;null==O&&(O=0),null==R&&(R=0);var V=s._02*R+s._12*O+s._22,D=(s._00*R+s._10*O+s._20)/V,U=(s._01*R+s._11*O+s._21)/V;null==U&&(U=0),null==D&&(D=0);var H=D,W=U;this.setRectVertices(w,b,B,k,P,M,H,W),l+=_.xadvance,++Vt.bufferIndex}}},drawCharacters:function(e,t,i,n,r,s,a,o){var l=this.font._get(this.fontSize),u=l.getTexture();null!=Vt.lastTexture&&u!=Vt.lastTexture&&this.drawBuffer(),Vt.lastTexture=u;for(var h=s,c=a,A=t,d=t+i;A<d;){var _=A++,f=l.getBakedQuad(this.bakedQuadCache,Vt.findIndex(e[_]),h,c);if(null!=f){1e3<=Vt.bufferIndex+1&&this.drawBuffer(),this.setRectColors(n,r),this.setRectTexCoords(f.s0*u.get_width()/u.get_realWidth(),f.t0*u.get_height()/u.get_realHeight(),f.s1*u.get_width()/u.get_realWidth(),f.t1*u.get_height()/u.get_realHeight());var g=f.x0,p=f.y1;null==p&&(p=0),null==g&&(g=0);var m=o._02*g+o._12*p+o._22,v=(o._00*g+o._10*p+o._20)/m,w=(o._01*g+o._11*p+o._21)/m;null==w&&(w=0),null==v&&(v=0);var b=v,y=w,x=f.x0,T=f.y0;null==T&&(T=0),null==x&&(x=0);var S=o._02*x+o._12*T+o._22,E=(o._00*x+o._10*T+o._20)/S,B=(o._01*x+o._11*T+o._21)/S;null==B&&(B=0),null==E&&(E=0);var k=E,I=B,C=f.x1,L=f.y0;null==L&&(L=0),null==C&&(C=0);var N=o._02*C+o._12*L+o._22,F=(o._00*C+o._10*L+o._20)/N,P=(o._01*C+o._11*L+o._21)/N;null==P&&(P=0),null==F&&(F=0);var M=F,R=P,O=f.x1,V=f.y1;null==V&&(V=0),null==O&&(O=0);var D=o._02*O+o._12*V+o._22,U=(o._00*O+o._10*V+o._20)/D,H=(o._01*O+o._11*V+o._21)/D;null==H&&(H=0),null==U&&(U=0);var W=U,G=H;this.setRectVertices(b,y,k,I,M,R,W,G),h+=f.xadvance,++Vt.bufferIndex}}},end:function(){0<Vt.bufferIndex&&this.drawBuffer(),Vt.lastTexture=null},__class__:Vt,__properties__:{set_pipeline:"set_pipeline",get_pipeline:"get_pipeline"}};var Dt=function(e){this.scissorH=-1,this.scissorW=-1,this.scissorY=-1,this.scissorX=-1,this.scissorEnabled=!1,this.lastPipeline=null,this.pipelineCache=new te,this.myMipmapScaleQuality=0,this.myImageScaleQuality=0,Qe.call(this),this.set_color(-1),this.canvas=e,this.g=e.get_g4(),this.imagePainter=new Rt(this.g),this.coloredPainter=new Ot(this.g),this.textPainter=new Vt(this.g),this.textPainter.fontSize=this.get_fontSize(),this.projectionMatrix=new ui(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.setProjection(),null==Dt.videoPipeline&&(Dt.videoPipeline=Dt.createImagePipeline(Dt.createImageVertexStructure()),Dt.videoPipeline.fragmentShader=z.painter_video_frag,Dt.videoPipeline.vertexShader=z.painter_video_vert,Dt.videoPipeline.compile())};(x["kha.graphics4.Graphics2"]=Dt).__name__=!0,Dt.upperPowerOfTwo=function(e){return--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e},Dt.createImageVertexStructure=function(){var e=new jt;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},Dt.createImagePipeline=function(e){var t=new Wt;return t.fragmentShader=z.painter_image_frag,t.vertexShader=z.painter_image_vert,t.inputLayout=[e],t.blendSource=1,t.blendDestination=5,t.alphaBlendSource=1,t.alphaBlendDestination=5,t},Dt.createColoredVertexStructure=function(){var e=new jt;return e.add("vertexPosition",2),e.add("vertexColor",3),e},Dt.createColoredPipeline=function(e){var t=new Wt;return t.fragmentShader=z.painter_colored_frag,t.vertexShader=z.painter_colored_vert,t.inputLayout=[e],t.blendSource=1,t.blendDestination=5,t.alphaBlendSource=1,t.alphaBlendDestination=5,t},Dt.createTextVertexStructure=function(){var e=new jt;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},Dt.createTextPipeline=function(e){var t=new Wt;return t.fragmentShader=z.painter_text_frag,t.vertexShader=z.painter_text_vert,t.inputLayout=[e],t.blendSource=3,t.blendDestination=5,t.alphaBlendSource=3,t.alphaBlendDestination=5,t},Dt.__super__=Qe,Dt.prototype=r(Qe.prototype,{myColor:null,myFont:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,setProjection:function(){var e=this.canvas.get_width(),t=this.canvas.get_height();if(this.canvas instanceof F){var i=this.projectionMatrix,n=2/e,r=-e/e,s=2/(0-t),a=-t/(0-t);i._00=n,i._10=0,i._20=0,i._30=r,i._01=0,i._11=s,i._21=0,i._31=a,i._02=0,i._12=0,i._22=-.002000200020002,i._32=-1.0002000200020003,i._03=0,i._13=0,i._23=0,i._33=1}else if(R.get_nonPow2Supported()||(e=Dt.upperPowerOfTwo(e),t=Dt.upperPowerOfTwo(t)),R.renderTargetsInvertedY()){var o=this.projectionMatrix,l=2/e,u=-e/e,h=2/t,c=-t/t;o._00=l,o._10=0,o._20=0,o._30=u,o._01=0,o._11=h,o._21=0,o._31=c,o._02=0,o._12=0,o._22=-.002000200020002,o._32=-1.0002000200020003,o._03=0,o._13=0,o._23=0,o._33=1}else{var A=this.projectionMatrix,d=2/e,_=-e/e,f=2/(0-t),g=-t/(0-t);A._00=d,A._10=0,A._20=0,A._30=_,A._01=0,A._11=f,A._21=0,A._31=g,A._02=0,A._12=0,A._22=-.002000200020002,A._32=-1.0002000200020003,A._03=0,A._13=0,A._23=0,A._33=1}this.imagePainter.setProjection(this.projectionMatrix),this.coloredPainter.setProjection(this.projectionMatrix),this.textPainter.setProjection(this.projectionMatrix)},drawImage:function(e,t,i){var n=this.coloredPainter;0<Ot.triangleBufferIndex&&n.drawTriBuffer(!1),0<Ot.bufferIndex&&n.drawBuffer(!1),this.textPainter.end();var r=t+e.get_width(),s=i+e.get_height(),a=this.transformations[this.transformationIndex],o=t,l=s;null==l&&(l=0),null==o&&(o=0);var u=a._02*o+a._12*l+a._22,h=(a._00*o+a._10*l+a._20)/u,c=(a._01*o+a._11*l+a._21)/u;null==c&&(c=0),null==h&&(h=0);var A=h,d=c,_=this.transformations[this.transformationIndex],f=t,g=i;null==g&&(g=0),null==f&&(f=0);var p=_._02*f+_._12*g+_._22,m=(_._00*f+_._10*g+_._20)/p,v=(_._01*f+_._11*g+_._21)/p;null==v&&(v=0),null==m&&(m=0);var w=m,b=v,y=this.transformations[this.transformationIndex],x=r,T=i;null==T&&(T=0),null==x&&(x=0);var S=y._02*x+y._12*T+y._22,E=(y._00*x+y._10*T+y._20)/S,B=(y._01*x+y._11*T+y._21)/S;null==B&&(B=0),null==E&&(E=0);var k=E,I=B,C=this.transformations[this.transformationIndex],L=r,N=s;null==N&&(N=0),null==L&&(L=0);var F=C._02*L+C._12*N+C._22,P=(C._00*L+C._10*N+C._20)/F,M=(C._01*L+C._11*N+C._21)/F;null==M&&(M=0),null==P&&(P=0);var R=P,O=M,V=this.imagePainter,D=this.get_opacity(),U=this.get_color(),H=e;(1500<=Rt.bufferIndex+1||null!=Rt.lastTexture&&H!=Rt.lastTexture)&&V.drawBuffer();var W=.00392156862745098*((16711680&U)>>>16),G=.00392156862745098*((65280&U)>>>8),z=.00392156862745098*(255&U),X=.00392156862745098*(U>>>24)*D,Y=9*Rt.bufferIndex*4;Rt.rectVertices[5+Y]=W,Rt.rectVertices[6+Y]=G,Rt.rectVertices[7+Y]=z,Rt.rectVertices[8+Y]=X,Rt.rectVertices[14+Y]=W,Rt.rectVertices[15+Y]=G,Rt.rectVertices[16+Y]=z,Rt.rectVertices[17+Y]=X,Rt.rectVertices[23+Y]=W,Rt.rectVertices[24+Y]=G,Rt.rectVertices[25+Y]=z,Rt.rectVertices[26+Y]=X,Rt.rectVertices[32+Y]=W,Rt.rectVertices[33+Y]=G,Rt.rectVertices[34+Y]=z,Rt.rectVertices[35+Y]=X;var K=H.get_width()/H.get_realWidth(),Q=H.get_height()/H.get_realHeight(),q=9*Rt.bufferIndex*4;Rt.rectVertices[3+q]=0,Rt.rectVertices[4+q]=Q,Rt.rectVertices[12+q]=0,Rt.rectVertices[13+q]=0,Rt.rectVertices[21+q]=K,Rt.rectVertices[22+q]=0,Rt.rectVertices[30+q]=K,Rt.rectVertices[31+q]=Q;var j=9*Rt.bufferIndex*4;Rt.rectVertices[j]=A,Rt.rectVertices[1+j]=d,Rt.rectVertices[2+j]=-5,Rt.rectVertices[9+j]=w,Rt.rectVertices[10+j]=b,Rt.rectVertices[11+j]=-5,Rt.rectVertices[18+j]=k,Rt.rectVertices[19+j]=I,Rt.rectVertices[20+j]=-5,Rt.rectVertices[27+j]=R,Rt.rectVertices[28+j]=O,Rt.rectVertices[29+j]=-5,++Rt.bufferIndex,Rt.lastTexture=H},drawScaledSubImage:function(e,t,i,n,r,s,a,o,l){var u=this.coloredPainter;0<Ot.triangleBufferIndex&&u.drawTriBuffer(!1),0<Ot.bufferIndex&&u.drawBuffer(!1),this.textPainter.end();var h=this.transformations[this.transformationIndex],c=s,A=a+l;null==A&&(A=0),null==c&&(c=0);var d=h._02*c+h._12*A+h._22,_=(h._00*c+h._10*A+h._20)/d,f=(h._01*c+h._11*A+h._21)/d;null==f&&(f=0),null==_&&(_=0);var g=_,p=f,m=this.transformations[this.transformationIndex],v=s,w=a;null==w&&(w=0),null==v&&(v=0);var b=m._02*v+m._12*w+m._22,y=(m._00*v+m._10*w+m._20)/b,x=(m._01*v+m._11*w+m._21)/b;null==x&&(x=0),null==y&&(y=0);var T=y,S=x,E=this.transformations[this.transformationIndex],B=s+o,k=a;null==k&&(k=0),null==B&&(B=0);var I=E._02*B+E._12*k+E._22,C=(E._00*B+E._10*k+E._20)/I,L=(E._01*B+E._11*k+E._21)/I;null==L&&(L=0),null==C&&(C=0);var N=C,F=L,P=this.transformations[this.transformationIndex],M=s+o,R=a+l;null==R&&(R=0),null==M&&(M=0);var O=P._02*M+P._12*R+P._22,V=(P._00*M+P._10*R+P._20)/O,D=(P._01*M+P._11*R+P._21)/O;null==D&&(D=0),null==V&&(V=0);var U=V,H=D,W=this.imagePainter,G=this.get_opacity(),z=this.get_color(),X=e;(1500<=Rt.bufferIndex+1||null!=Rt.lastTexture&&X!=Rt.lastTexture)&&W.drawBuffer();var Y=t/X.get_realWidth(),K=i/X.get_realHeight(),Q=(t+n)/X.get_realWidth(),q=(i+r)/X.get_realHeight(),j=9*Rt.bufferIndex*4;Rt.rectVertices[3+j]=Y,Rt.rectVertices[4+j]=q,Rt.rectVertices[12+j]=Y,Rt.rectVertices[13+j]=K,Rt.rectVertices[21+j]=Q,Rt.rectVertices[22+j]=K,Rt.rectVertices[30+j]=Q,Rt.rectVertices[31+j]=q;var Z=.00392156862745098*((16711680&z)>>>16),J=.00392156862745098*((65280&z)>>>8),$=.00392156862745098*(255&z),ee=.00392156862745098*(z>>>24)*G,te=9*Rt.bufferIndex*4;Rt.rectVertices[5+te]=Z,Rt.rectVertices[6+te]=J,Rt.rectVertices[7+te]=$,Rt.rectVertices[8+te]=ee,Rt.rectVertices[14+te]=Z,Rt.rectVertices[15+te]=J,Rt.rectVertices[16+te]=$,Rt.rectVertices[17+te]=ee,Rt.rectVertices[23+te]=Z,Rt.rectVertices[24+te]=J,Rt.rectVertices[25+te]=$,Rt.rectVertices[26+te]=ee,Rt.rectVertices[32+te]=Z,Rt.rectVertices[33+te]=J,Rt.rectVertices[34+te]=$,Rt.rectVertices[35+te]=ee;var ie=9*Rt.bufferIndex*4;Rt.rectVertices[ie]=g,Rt.rectVertices[1+ie]=p,Rt.rectVertices[2+ie]=-5,Rt.rectVertices[9+ie]=T,Rt.rectVertices[10+ie]=S,Rt.rectVertices[11+ie]=-5,Rt.rectVertices[18+ie]=N,Rt.rectVertices[19+ie]=F,Rt.rectVertices[20+ie]=-5,Rt.rectVertices[27+ie]=U,Rt.rectVertices[28+ie]=H,Rt.rectVertices[29+ie]=-5,++Rt.bufferIndex,Rt.lastTexture=X},get_color:function(){return this.myColor},set_color:function(e){return this.myColor=e},drawRect:function(e,t,i,n,r){null==r&&(r=1),this.imagePainter.end(),this.textPainter.end();var s=this.transformations[this.transformationIndex],a=e-r/2,o=t+r/2;null==o&&(o=0),null==a&&(a=0);var l=s._02*a+s._12*o+s._22,u=(s._00*a+s._10*o+s._20)/l,h=(s._01*a+s._11*o+s._21)/l;null==h&&(h=0),null==u&&(u=0);var c=u,A=h,d=this.transformations[this.transformationIndex],_=e-r/2,f=t-r/2;null==f&&(f=0),null==_&&(_=0);var g=d._02*_+d._12*f+d._22,p=(d._00*_+d._10*f+d._20)/g,m=(d._01*_+d._11*f+d._21)/g;null==m&&(m=0),null==p&&(p=0);var v=p,w=m,b=this.transformations[this.transformationIndex],y=e+i+r/2,x=t-r/2;null==x&&(x=0),null==y&&(y=0);var T=b._02*y+b._12*x+b._22,S=(b._00*y+b._10*x+b._20)/T,E=(b._01*y+b._11*x+b._21)/T;null==E&&(E=0),null==S&&(S=0);var B=S,k=E,I=this.transformations[this.transformationIndex],C=e+i+r/2,L=t+r/2;null==L&&(L=0),null==C&&(C=0);var N=I._02*C+I._12*L+I._22,F=(I._00*C+I._10*L+I._20)/N,P=(I._01*C+I._11*L+I._21)/N;null==P&&(P=0),null==F&&(F=0);var M=F,R=P;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),c,A,v,w,B,k,M,R);var O=this.transformations[this.transformationIndex],V=e-r/2,D=t+n-r/2;null==D&&(D=0),null==V&&(V=0);var U=O._02*V+O._12*D+O._22,H=(O._00*V+O._10*D+O._20)/U,W=(O._01*V+O._11*D+O._21)/U;null==W&&(W=0),null==H&&(H=0),c=H,A=W;var G=this.transformations[this.transformationIndex],z=e-r/2,X=t+r/2;null==X&&(X=0),null==z&&(z=0);var Y=G._02*z+G._12*X+G._22,K=(G._00*z+G._10*X+G._20)/Y,Q=(G._01*z+G._11*X+G._21)/Y;null==Q&&(Q=0),null==K&&(K=0),v=K,w=Q;var q=this.transformations[this.transformationIndex],j=e+r/2,Z=t+r/2;null==Z&&(Z=0),null==j&&(j=0);var J=q._02*j+q._12*Z+q._22,$=(q._00*j+q._10*Z+q._20)/J,ee=(q._01*j+q._11*Z+q._21)/J;null==ee&&(ee=0),null==$&&($=0),B=$,k=ee;var te=this.transformations[this.transformationIndex],ie=e+r/2,ne=t+n-r/2;null==ne&&(ne=0),null==ie&&(ie=0);var re=te._02*ie+te._12*ne+te._22,se=(te._00*ie+te._10*ne+te._20)/re,ae=(te._01*ie+te._11*ne+te._21)/re;null==ae&&(ae=0),null==se&&(se=0),M=se,R=ae,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),c,A,v,w,B,k,M,R);var oe=this.transformations[this.transformationIndex],le=e-r/2,ue=t+n+r/2;null==ue&&(ue=0),null==le&&(le=0);var he=oe._02*le+oe._12*ue+oe._22,ce=(oe._00*le+oe._10*ue+oe._20)/he,Ae=(oe._01*le+oe._11*ue+oe._21)/he;null==Ae&&(Ae=0),null==ce&&(ce=0),c=ce,A=Ae;var de=this.transformations[this.transformationIndex],_e=e-r/2,fe=t+n-r/2;null==fe&&(fe=0),null==_e&&(_e=0);var ge=de._02*_e+de._12*fe+de._22,pe=(de._00*_e+de._10*fe+de._20)/ge,me=(de._01*_e+de._11*fe+de._21)/ge;null==me&&(me=0),null==pe&&(pe=0),v=pe,w=me;var ve=this.transformations[this.transformationIndex],we=e+i+r/2,be=t+n-r/2;null==be&&(be=0),null==we&&(we=0);var ye=ve._02*we+ve._12*be+ve._22,xe=(ve._00*we+ve._10*be+ve._20)/ye,Te=(ve._01*we+ve._11*be+ve._21)/ye;null==Te&&(Te=0),null==xe&&(xe=0),B=xe,k=Te;var Se=this.transformations[this.transformationIndex],Ee=e+i+r/2,Be=t+n+r/2;null==Be&&(Be=0),null==Ee&&(Ee=0);var ke=Se._02*Ee+Se._12*Be+Se._22,Ie=(Se._00*Ee+Se._10*Be+Se._20)/ke,Ce=(Se._01*Ee+Se._11*Be+Se._21)/ke;null==Ce&&(Ce=0),null==Ie&&(Ie=0),M=Ie,R=Ce,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),c,A,v,w,B,k,M,R);var Le=this.transformations[this.transformationIndex],Ne=e+i-r/2,Fe=t+n-r/2;null==Fe&&(Fe=0),null==Ne&&(Ne=0);var Pe=Le._02*Ne+Le._12*Fe+Le._22,Me=(Le._00*Ne+Le._10*Fe+Le._20)/Pe,Re=(Le._01*Ne+Le._11*Fe+Le._21)/Pe;null==Re&&(Re=0),null==Me&&(Me=0),c=Me,A=Re;var Oe=this.transformations[this.transformationIndex],Ve=e+i-r/2,De=t+r/2;null==De&&(De=0),null==Ve&&(Ve=0);var Ue=Oe._02*Ve+Oe._12*De+Oe._22,He=(Oe._00*Ve+Oe._10*De+Oe._20)/Ue,We=(Oe._01*Ve+Oe._11*De+Oe._21)/Ue;null==We&&(We=0),null==He&&(He=0),v=He,w=We;var Ge=this.transformations[this.transformationIndex],ze=e+i+r/2,Xe=t+r/2;null==Xe&&(Xe=0),null==ze&&(ze=0);var Ye=Ge._02*ze+Ge._12*Xe+Ge._22,Ke=(Ge._00*ze+Ge._10*Xe+Ge._20)/Ye,Qe=(Ge._01*ze+Ge._11*Xe+Ge._21)/Ye;null==Qe&&(Qe=0),null==Ke&&(Ke=0),B=Ke,k=Qe;var qe=this.transformations[this.transformationIndex],je=e+i+r/2,Ze=t+n-r/2;null==Ze&&(Ze=0),null==je&&(je=0);var Je=qe._02*je+qe._12*Ze+qe._22,$e=(qe._00*je+qe._10*Ze+qe._20)/Je,et=(qe._01*je+qe._11*Ze+qe._21)/Je;null==et&&(et=0),null==$e&&($e=0),M=$e,R=et,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),c,A,v,w,B,k,M,R)},fillRect:function(e,t,i,n){this.imagePainter.end(),this.textPainter.end();var r=this.transformations[this.transformationIndex],s=e,a=t+n;null==a&&(a=0),null==s&&(s=0);var o=r._02*s+r._12*a+r._22,l=(r._00*s+r._10*a+r._20)/o,u=(r._01*s+r._11*a+r._21)/o;null==u&&(u=0),null==l&&(l=0);var h=l,c=u,A=this.transformations[this.transformationIndex],d=e,_=t;null==_&&(_=0),null==d&&(d=0);var f=A._02*d+A._12*_+A._22,g=(A._00*d+A._10*_+A._20)/f,p=(A._01*d+A._11*_+A._21)/f;null==p&&(p=0),null==g&&(g=0);var m=g,v=p,w=this.transformations[this.transformationIndex],b=e+i,y=t;null==y&&(y=0),null==b&&(b=0);var x=w._02*b+w._12*y+w._22,T=(w._00*b+w._10*y+w._20)/x,S=(w._01*b+w._11*y+w._21)/x;null==S&&(S=0),null==T&&(T=0);var E=T,B=S,k=this.transformations[this.transformationIndex],I=e+i,C=t+n;null==C&&(C=0),null==I&&(I=0);var L=k._02*I+k._12*C+k._22,N=(k._00*I+k._10*C+k._20)/L,F=(k._01*I+k._11*C+k._21)/L;null==F&&(F=0),null==N&&(N=0);var P=N,M=F;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),h,c,m,v,E,B,P,M)},drawString:function(e,t,i){this.imagePainter.end();var n=this.coloredPainter;0<Ot.triangleBufferIndex&&n.drawTriBuffer(!1),0<Ot.bufferIndex&&n.drawBuffer(!1),this.textPainter.drawString(e,this.get_opacity(),this.get_color(),t,i,this.transformations[this.transformationIndex])},drawCharacters:function(e,t,i,n,r){this.imagePainter.end();var s=this.coloredPainter;0<Ot.triangleBufferIndex&&s.drawTriBuffer(!1),0<Ot.bufferIndex&&s.drawBuffer(!1),this.textPainter.drawCharacters(e,t,i,this.get_opacity(),this.get_color(),n,r,this.transformations[this.transformationIndex])},get_font:function(){return this.myFont},set_font:function(e){return this.textPainter.setFont(e),this.myFont=e},set_fontSize:function(e){return Qe.prototype.set_fontSize.call(this,this.textPainter.fontSize=e)},drawLine:function(e,t,i,n,r){null==r&&(r=1),this.imagePainter.end(),this.textPainter.end();var s=0,a=0;if(n==t){var o=0,l=-1;null==l&&(l=0),null==o&&(o=0),s=o,a=l}else{var u=1,h=-(i-e)/(n-t);null==h&&(h=0),null==u&&(u=0),s=u,a=h}var c=Math.sqrt(s*s+a*a);if(0!=c){var A=r/c;s*=A,a*=A}var d=e+.5*s,_=t+.5*a;null==_&&(_=0),null==d&&(d=0);var f=d,g=_,p=i+.5*s,m=n+.5*a;null==m&&(m=0),null==p&&(p=0);var v=p,w=m,b=f-s,y=g-a;null==y&&(y=0),null==b&&(b=0);var x=b,T=y,S=v-s,E=w-a;null==E&&(E=0),null==S&&(S=0);var B=S,k=E,I=this.transformations[this.transformationIndex],C=I._02*f+I._12*g+I._22,L=(I._00*f+I._10*g+I._20)/C,N=(I._01*f+I._11*g+I._21)/C;null==N&&(N=0),null==L&&(L=0),f=L,g=N;var F=this.transformations[this.transformationIndex],P=F._02*v+F._12*w+F._22,M=(F._00*v+F._10*w+F._20)/P,R=(F._01*v+F._11*w+F._21)/P;null==R&&(R=0),null==M&&(M=0),v=M,w=R;var O=this.transformations[this.transformationIndex],V=O._02*x+O._12*T+O._22,D=(O._00*x+O._10*T+O._20)/V,U=(O._01*x+O._11*T+O._21)/V;null==U&&(U=0),null==D&&(D=0),x=D,T=U;var H=this.transformations[this.transformationIndex],W=H._02*B+H._12*k+H._22,G=(H._00*B+H._10*k+H._20)/W,z=(H._01*B+H._11*k+H._21)/W;null==z&&(z=0),null==G&&(G=0),B=G,k=z,this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),f,g,v,w,x,T),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),x,T,v,w,B,k)},fillTriangle:function(e,t,i,n,r,s){this.imagePainter.end(),this.textPainter.end();var a=this.transformations[this.transformationIndex],o=e,l=t;null==l&&(l=0),null==o&&(o=0);var u=a._02*o+a._12*l+a._22,h=(a._00*o+a._10*l+a._20)/u,c=(a._01*o+a._11*l+a._21)/u;null==c&&(c=0),null==h&&(h=0);var A=h,d=c,_=this.transformations[this.transformationIndex],f=i,g=n;null==g&&(g=0),null==f&&(f=0);var p=_._02*f+_._12*g+_._22,m=(_._00*f+_._10*g+_._20)/p,v=(_._01*f+_._11*g+_._21)/p;null==v&&(v=0),null==m&&(m=0);var w=m,b=v,y=this.transformations[this.transformationIndex],x=r,T=s;null==T&&(T=0),null==x&&(x=0);var S=y._02*x+y._12*T+y._22,E=(y._00*x+y._10*T+y._20)/S,B=(y._01*x+y._11*T+y._21)/S;null==B&&(B=0),null==E&&(E=0);var k=E,I=B;this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),A,d,w,b,k,I)},myImageScaleQuality:null,get_imageScaleQuality:function(){return this.myImageScaleQuality},set_imageScaleQuality:function(e){return e==this.myImageScaleQuality?e:(this.imagePainter.setBilinearFilter(1==e),this.textPainter.setBilinearFilter(1==e),this.myImageScaleQuality=e)},myMipmapScaleQuality:null,get_mipmapScaleQuality:function(){return this.myMipmapScaleQuality},set_mipmapScaleQuality:function(e){return this.imagePainter.setBilinearMipmapFilter(1==e),this.myMipmapScaleQuality=e},pipelineCache:null,lastPipeline:null,setPipeline:function(e){if(e!=this.lastPipeline)if(this.lastPipeline=e,this.flush(),null==e)this.imagePainter.set_pipeline(null),this.coloredPainter.set_pipeline(null),this.textPainter.set_pipeline(null);else{var t=this.pipelineCache.h[e.__id__];null==t&&(t=new Mt(e),this.pipelineCache.set(e,t)),this.imagePainter.set_pipeline(t),this.coloredPainter.set_pipeline(t),this.textPainter.set_pipeline(t)}},scissorEnabled:null,scissorX:null,scissorY:null,scissorW:null,scissorH:null,scissor:function(e,t,i,n){this.scissorEnabled=!0,this.scissorX=e,this.scissorY=t,this.scissorW=i,this.scissorH=n,this.flush(),this.g.scissor(e,t,i,n)},disableScissor:function(){this.scissorEnabled=!1,this.flush(),this.g.disableScissor()},begin:function(e,t){if(null==e&&(e=!0),null!=Dt.current)throw new ft("End before you begin");(Dt.current=this).g.begin(),e&&this.clear(t),this.setProjection()},clear:function(e){this.flush(),this.g.clear(null==e?-16777216:e)},flush:function(){this.imagePainter.end(),this.textPainter.end();var e=this.coloredPainter;0<Ot.triangleBufferIndex&&e.drawTriBuffer(!1),0<Ot.bufferIndex&&e.drawBuffer(!1)},end:function(){if(this.flush(),this.g.end(),Dt.current!=this)throw new ft("Begin before you end");Dt.current=null},drawVideoInternal:function(e,t,i,n,r){},drawVideo:function(e,t,i,n,r){this.setPipeline(Dt.videoPipeline),this.drawVideoInternal(e,t,i,n,r),this.setPipeline(null)},__class__:Dt});var Ut=function(e,t,i){null==i&&(i=!1),this.indexCount=e,this.buffer=Krom.createIndexBuffer(e)};(x["kha.graphics4.IndexBuffer"]=Ut).__name__=!0,Ut.prototype={buffer:null,_data:null,indexCount:null,delete:function(){Krom.deleteIndexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockIndexBuffer(this.buffer),null==e&&(e=0),null==t&&(t=this.indexCount),this._data.subarray(e,e+t)},unlock:function(e){Krom.unlockIndexBuffer(this.buffer)},set:function(){Krom.setIndexBuffer(this.buffer)},count:function(){return this.indexCount},__class__:Ut};function Ht(){this.inputLayout=null,this.vertexShader=null,this.fragmentShader=null,this.geometryShader=null,this.tessellationControlShader=null,this.tessellationEvaluationShader=null,this.cullMode=2,this.depthWrite=!1,this.depthMode=0,this.stencilMode=0,this.stencilBothPass=0,this.stencilDepthFail=0,this.stencilFail=0,this.stencilReferenceValue=zt.Static(0),this.stencilReadMask=255,this.stencilWriteMask=255,this.blendSource=1,this.blendDestination=2,this.blendOperation=0,this.alphaBlendSource=1,this.alphaBlendDestination=2,this.alphaBlendOperation=0,this.colorWriteMasksRed=[],this.colorWriteMasksGreen=[],this.colorWriteMasksBlue=[],this.colorWriteMasksAlpha=[],this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.conservativeRasterization=!1}(x["kha.graphics4.PipelineStateBase"]=Ht).__name__=!0,Ht.prototype={inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilMode:null,stencilBothPass:null,stencilDepthFail:null,stencilFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMasksRed:null,colorWriteMasksGreen:null,colorWriteMasksBlue:null,colorWriteMasksAlpha:null,set_colorWriteMask:function(e){var t=this.colorWriteMasksAlpha[0]=e,i=this.colorWriteMasksGreen[0]=t,n=this.colorWriteMasksBlue[0]=i;return this.colorWriteMasksRed[0]=n},get_colorWriteMaskRed:function(){return this.colorWriteMasksRed[0]},set_colorWriteMaskRed:function(e){return this.colorWriteMasksRed[0]=e},get_colorWriteMaskGreen:function(){return this.colorWriteMasksGreen[0]},set_colorWriteMaskGreen:function(e){return this.colorWriteMasksGreen[0]=e},get_colorWriteMaskBlue:function(){return this.colorWriteMasksBlue[0]},set_colorWriteMaskBlue:function(e){return this.colorWriteMasksBlue[0]=e},get_colorWriteMaskAlpha:function(){return this.colorWriteMasksAlpha[0]},set_colorWriteMaskAlpha:function(e){return this.colorWriteMasksAlpha[0]=e},conservativeRasterization:null,__class__:Ht,__properties__:{set_colorWriteMaskAlpha:"set_colorWriteMaskAlpha",get_colorWriteMaskAlpha:"get_colorWriteMaskAlpha",set_colorWriteMaskBlue:"set_colorWriteMaskBlue",get_colorWriteMaskBlue:"get_colorWriteMaskBlue",set_colorWriteMaskGreen:"set_colorWriteMaskGreen",get_colorWriteMaskGreen:"get_colorWriteMaskGreen",set_colorWriteMaskRed:"set_colorWriteMaskRed",get_colorWriteMaskRed:"get_colorWriteMaskRed",set_colorWriteMask:"set_colorWriteMask"}};var Wt=function(){Ht.call(this),this.pipeline=Krom.createPipeline()};(x["kha.graphics4.PipelineState"]=Wt).__name__=!0,Wt.convertBlendingFactor=function(e){switch(e){case 0:case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5;case 7:return 6;case 8:return 7;case 9:return 8;case 10:return 9}},Wt.__super__=Ht,Wt.prototype=r(Ht.prototype,{pipeline:null,delete:function(){Krom.deletePipeline(this.pipeline),this.pipeline=null},compile:function(){var e=0<this.inputLayout.length?this.inputLayout[0]:null,t=1<this.inputLayout.length?this.inputLayout[1]:null,i=2<this.inputLayout.length?this.inputLayout[2]:null,n=3<this.inputLayout.length?this.inputLayout[3]:null,r=null!=this.geometryShader?this.geometryShader.shader:null,s=null!=this.tessellationControlShader?this.tessellationControlShader.shader:null,a=null!=this.tessellationEvaluationShader?this.tessellationEvaluationShader.shader:null,o=0,l=this.stencilReferenceValue;1==l._hx_index&&(o=l.value);Krom.compilePipeline(this.pipeline,e,t,i,n,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,r,s,a,{cullMode:this.cullMode,depthWrite:this.depthWrite,depthMode:this.depthMode,stencilMode:this.stencilMode,stencilBothPass:this.stencilBothPass,stencilDepthFail:this.stencilDepthFail,stencilFail:this.stencilFail,stencilReferenceValue:o,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:Wt.convertBlendingFactor(this.blendSource),blendDestination:Wt.convertBlendingFactor(this.blendDestination),alphaBlendSource:Wt.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:Wt.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMasksRed,colorWriteMaskGreen:this.colorWriteMasksGreen,colorWriteMaskBlue:this.colorWriteMasksBlue,colorWriteMaskAlpha:this.colorWriteMasksAlpha,conservativeRasterization:this.conservativeRasterization})},set:function(){Krom.setPipeline(this.pipeline)},getConstantLocation:function(e){return Krom.getConstantLocation(this.pipeline,e)},getTextureUnit:function(e){return Krom.getTextureUnit(this.pipeline,e)},__class__:Wt});function Gt(e,t){this.shader=Krom.createTessellationControlShader(e[0].bytes.b.bufferValue,t[0])}var zt=f["kha.graphics4.StencilValue"]={__ename__:!0,__constructs__:["Dynamic","Static"],Dynamic:{_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:i},Static:((t=function(e){return{_hx_index:1,value:e,__enum__:"kha.graphics4.StencilValue",toString:i}}).__params__=["value"],t)};(x["kha.graphics4.TessellationControlShader"]=Gt).__name__=!0,Gt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Gt};function Xt(e,t){this.shader=Krom.createTessellationEvaluationShader(e[0].bytes.b.bufferValue,t[0])}(x["kha.graphics4.TessellationEvaluationShader"]=Xt).__name__=!0,Xt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Xt};function Yt(){}(x["kha.graphics4.TextureUnit"]=Yt).__name__=!0,Yt.__isInterface__=!0;var Kt=function(e,t,i,n,r){null==r&&(r=!1),null==n&&(n=0),this.vertexCount=e,this.structure=t,this.buffer=Krom.createVertexBuffer(e,t.elements,i,n)};(x["kha.graphics4.VertexBuffer"]=Kt).__name__=!0,Kt.prototype={buffer:null,_data:null,vertexCount:null,structure:null,delete:function(){Krom.deleteVertexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockVertexBuffer(this.buffer),this._data},lockInt16:function(e,t){return new Int16Array(this.lock(e,t).buffer)},unlock:function(e){Krom.unlockVertexBuffer(this.buffer)},stride:function(){return this.structure.byteSize()},count:function(){return this.vertexCount},set:function(e){return Krom.setVertexBuffer(this.buffer),0},__class__:Kt};function Qt(e,t){this.name=e,this.data=t}(x["kha.graphics4.VertexElement"]=Qt).__name__=!0,Qt.prototype={name:null,data:null,__class__:Qt};var qt=function(e,t){null!=e&&(this.shader=Krom.createVertexShader(e[0].bytes.b.bufferValue,t[0]))};(x["kha.graphics4.VertexShader"]=qt).__name__=!0,qt.fromSource=function(e){var t=new qt(null,null);return t.shader=Krom.createVertexShaderFromSource(e),t},qt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:qt};var jt=function(){this.elements=[],this.instanced=!1};(x["kha.graphics4.VertexStructure"]=jt).__name__=!0,jt.prototype={elements:null,instanced:null,add:function(e,t){this.elements.push(new Qt(e,t))},size:function(){return this.elements.length},byteSize:function(){for(var e=0,t=0,i=this.elements.length;t<i;){var n=t++;e+=this.dataByteSize(this.elements[n].data)}return e},dataByteSize:function(e){switch(e){case 0:return 4;case 1:return 8;case 2:return 12;case 3:return 16;case 4:return 64;case 5:return 4;case 6:return 8}},get:function(e){return this.elements[e]},__class__:jt};var Zt=e.kha.input.Gamepad=function(e,t){null==t&&(t="unknown"),null==e&&(e=0),this.index=e,this.axisListeners=[],this.buttonListeners=[],Zt.instances[e]=this};(x["kha.input.Gamepad"]=Zt).__name__=!0,Zt.get=function(e){return null==e&&(e=0),e>=Zt.instances.length?null:Zt.instances[e]},Zt.notifyOnConnect=function(e,t){null!=e&&Zt.connectListeners.push(e),null!=t&&Zt.disconnectListeners.push(t)},Zt.removeConnect=function(e,t){null!=e&&it.remove(Zt.connectListeners,e),null!=t&&it.remove(Zt.disconnectListeners,t)},Zt.sendConnectEvent=function(e){Zt.instances[e].connected=!0;for(var t=0,i=Zt.connectListeners;t<i.length;){var n=i[t];++t,n(e)}},Zt.sendDisconnectEvent=function(e){Zt.instances[e].connected=!1;for(var t=0,i=Zt.disconnectListeners;t<i.length;){var n=i[t];++t,n(e)}},Zt.prototype={index:null,notify:function(e,t){null!=e&&this.axisListeners.push(e),null!=t&&this.buttonListeners.push(t)},remove:function(e,t){null!=e&&it.remove(this.axisListeners,e),null!=t&&it.remove(this.buttonListeners,t)},axisListeners:null,buttonListeners:null,id:null,connected:null,get_id:function(){return Q.getGamepadId(this.index)},sendAxisEvent:function(e,t){for(var i=0,n=this.axisListeners;i<n.length;){var r=n[i];++i,r(e,t)}},sendButtonEvent:function(e,t){for(var i=0,n=this.buttonListeners;i<n.length;){var r=n[i];++i,r(e,t)}},__class__:Zt,__properties__:{get_id:"get_id"}};function Jt(){this.__id=vi.nextId++,this._inputBuffer=new he(new ArrayBuffer(1))}var $t=f["kha.input.BlockInterventions"]={__ename__:!0,__constructs__:["Default","Full","None","Custom"],Default:{_hx_index:0,__enum__:"kha.input.BlockInterventions",toString:i},Full:{_hx_index:1,__enum__:"kha.input.BlockInterventions",toString:i},None:{_hx_index:2,__enum__:"kha.input.BlockInterventions",toString:i},Custom:((t=function(e){return{_hx_index:3,func:e,__enum__:"kha.input.BlockInterventions",toString:i}}).__params__=["func"],t)};(x["kha.netsync.Controller"]=Jt).__name__=!0,Jt.prototype={__id:null,_inputBufferIndex:null,_inputBuffer:null,_id:function(){return this.__id},_receive:function(e){},__class__:Jt};var ei=e.kha.input.Keyboard=function(){Jt.call(this),this.downListeners=[],this.upListeners=[],this.pressListeners=[],ei.instance=this};(x["kha.input.Keyboard"]=ei).__name__=!0,ei.get=function(e){return null==e&&(e=0),Q.getKeyboard(e)},ei.disableSystemInterventions=function(e){ei.keyBehavior=e},ei.__super__=Jt,ei.prototype=r(Jt.prototype,{notify:function(e,t,i){null!=e&&this.downListeners.push(e),null!=t&&this.upListeners.push(t),null!=i&&this.pressListeners.push(i)},remove:function(e,t,i){null!=e&&it.remove(this.downListeners,e),null!=t&&it.remove(this.upListeners,t),null!=i&&it.remove(this.pressListeners,i)},show:function(){},hide:function(){},downListeners:null,upListeners:null,pressListeners:null,sendDownEvent:function(e){for(var t=0,i=this.downListeners;t<i.length;){var n=i[t];++t,n(e)}},sendUpEvent:function(e){for(var t=0,i=this.upListeners;t<i.length;){var n=i[t];++t,n(e)}},sendPressEvent:function(e){for(var t=0,i=this.pressListeners;t<i.length;){var n=i[t];++t,n(e)}},_receive:function(e){},__class__:ei});var ti=e.kha.input.Mouse=function(){Jt.call(this),ti.instance=this};(x["kha.input.Mouse"]=ti).__name__=!0,ti.get=function(e){return null==e&&(e=0),Q.getMouse(e)},ti.__super__=Jt,ti.prototype=r(Jt.prototype,{notify:function(e,t,i,n,r){this.notifyWindowed(0,e,t,i,n,r)},remove:function(e,t,i,n,r){this.removeWindowed(0,e,t,i,n,r)},notifyWindowed:function(e,t,i,n,r,s){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=i){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(i)}if(null!=n){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(n)}if(null!=r){for(null==this.windowWheelListeners&&(this.windowWheelListeners=[]);this.windowWheelListeners.length<=e;)this.windowWheelListeners.push([]);this.windowWheelListeners[e].push(r)}if(null!=s){for(null==this.windowLeaveListeners&&(this.windowLeaveListeners=[]);this.windowLeaveListeners.length<=e;)this.windowLeaveListeners.push([]);this.windowLeaveListeners[e].push(s)}},removeWindowed:function(e,t,i,n,r,s){null!=t&&(null!=this.windowDownListeners?e<this.windowDownListeners.length?it.remove(this.windowDownListeners[e],t):L.trace('no downListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:110,className:"kha.input.Mouse",methodName:"removeWindowed"}):L.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:114,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=i&&(null!=this.windowUpListeners?e<this.windowUpListeners.length?it.remove(this.windowUpListeners[e],i):L.trace('no upListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:124,className:"kha.input.Mouse",methodName:"removeWindowed"}):L.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:128,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=n&&(null!=this.windowMoveListeners?e<this.windowMoveListeners.length?it.remove(this.windowMoveListeners[e],n):L.trace('no moveListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:138,className:"kha.input.Mouse",methodName:"removeWindowed"}):L.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:142,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=r&&(null!=this.windowWheelListeners?e<this.windowWheelListeners.length?it.remove(this.windowWheelListeners[e],r):L.trace('no wheelListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:152,className:"kha.input.Mouse",methodName:"removeWindowed"}):L.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:156,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=s&&(null!=this.windowLeaveListeners?e<this.windowLeaveListeners.length?it.remove(this.windowLeaveListeners[e],s):L.trace('no leaveListeners for window "'+e+'" are registered',{fileName:"kha/input/Mouse.hx",lineNumber:166,className:"kha.input.Mouse",methodName:"removeWindowed"}):L.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:170,className:"kha.input.Mouse",methodName:"removeWindowed"}))},lock:function(){},unlock:function(){},canLock:function(){return!1},isLocked:function(){return!1},notifyOnLockChange:function(e,t){},removeFromLockChange:function(e,t){},hideSystemCursor:function(){},showSystemCursor:function(){},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null,sendLeaveEvent:function(e){if(null!=this.windowLeaveListeners)for(var t=0,i=this.windowLeaveListeners[e];t<i.length;){var n=i[t];++t,n()}},sendDownEvent:function(e,t,i,n){if(null!=this.windowDownListeners)for(var r=0,s=this.windowDownListeners[e];r<s.length;){var a=s[r];++r,a(t,i,n)}},sendUpEvent:function(e,t,i,n){if(null!=this.windowUpListeners)for(var r=0,s=this.windowUpListeners[e];r<s.length;){var a=s[r];++r,a(t,i,n)}},sendMoveEvent:function(e,t,i,n,r){if(null!=this.windowMoveListeners)for(var s=0,a=this.windowMoveListeners[e];s<a.length;){var o=a[s];++s,o(t,i,n,r)}},sendWheelEvent:function(e,t){if(null!=this.windowWheelListeners)for(var i=0,n=this.windowWheelListeners[e];i<n.length;){var r=n[i];++i,r(t)}},_receive:function(e){},__class__:ti});var ii=function(){ti.call(this)};(x["kha.input.MouseImpl"]=ii).__name__=!0,ii.__super__=ti,ii.prototype=r(ti.prototype,{lock:function(){Q.lockMouse()},unlock:function(){Q.unlockMouse()},canLock:function(){return Q.canLockMouse()},isLocked:function(){return Q.isMouseLocked()},notifyOnLockChange:function(e,t){Q.notifyOfMouseLockChange(e,t)},removeFromLockChange:function(e,t){Q.removeFromMouseLockChange(e,t)},hideSystemCursor:function(){Q.hideSystemCursor()},showSystemCursor:function(){Q.showSystemCursor()},_receive:function(e){},__class__:ii});var ni=function(){ni.instance=this};(x["kha.input.Pen"]=ni).__name__=!0,ni.get=function(e){return null==e&&(e=0),Q.getPen(e)},ni.prototype={notify:function(e,t,i){this.notifyWindowed(0,e,t,i)},remove:function(e,t,i){this.removeWindowed(0,e,t,i)},notifyWindowed:function(e,t,i,n){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=i){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(i)}if(null!=n){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(n)}},removeWindowed:function(e,t,i,n){null!=t&&null!=this.windowDownListeners&&e<this.windowDownListeners.length&&it.remove(this.windowDownListeners[e],t),null!=i&&null!=this.windowUpListeners&&e<this.windowUpListeners.length&&it.remove(this.windowUpListeners[e],i),null!=n&&null!=this.windowMoveListeners&&e<this.windowMoveListeners.length&&it.remove(this.windowMoveListeners[e],n)},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,sendDownEvent:function(e,t,i,n){if(null!=this.windowDownListeners)for(var r=0,s=this.windowDownListeners[e];r<s.length;){var a=s[r];++r,a(t,i,n)}},sendUpEvent:function(e,t,i,n){if(null!=this.windowUpListeners)for(var r=0,s=this.windowUpListeners[e];r<s.length;){var a=s[r];++r,a(t,i,n)}},sendMoveEvent:function(e,t,i,n){if(null!=this.windowMoveListeners)for(var r=0,s=this.windowMoveListeners[e];r<s.length;){var a=s[r];++r,a(t,i,n)}},__class__:ni};var ri=e.kha.input.Surface=function(){this.touchStartListeners=[],this.touchEndListeners=[],this.moveListeners=[],ri.instance=this};(x["kha.input.Surface"]=ri).__name__=!0,ri.get=function(e){return null==e&&(e=0),0!=e?null:ri.instance},ri.prototype={notify:function(e,t,i){null!=e&&this.touchStartListeners.push(e),null!=t&&this.touchEndListeners.push(t),null!=i&&this.moveListeners.push(i)},remove:function(e,t,i){null!=e&&it.remove(this.touchStartListeners,e),null!=t&&it.remove(this.touchEndListeners,t),null!=i&&it.remove(this.moveListeners,i)},touchStartListeners:null,touchEndListeners:null,moveListeners:null,sendTouchStartEvent:function(e,t,i){for(var n=0,r=this.touchStartListeners;n<r.length;){var s=r[n];++n,s(e,t,i)}},sendTouchEndEvent:function(e,t,i){for(var n=0,r=this.touchEndListeners;n<r.length;){var s=r[n];++n,s(e,t,i)}},sendMoveEvent:function(e,t,i){for(var n=0,r=this.moveListeners;n<r.length;){var s=r[n];++n,s(e,t,i)}},__class__:ri};var si=function(e){this.bytes=e};(x["kha.internal.BytesBlob"]=si).__name__=!0,si.__interfaces__=[M],si.fromBytes=function(e){return new si(e)},si.alloc=function(e){return new si(new he(new ArrayBuffer(e)))},si.readF32=function(e){var t=0==(-2147483648&e)?1:-1,i=e>>23&255,n=8388607&e;switch(i){case 0:return 0;case 255:return 0!=n?NaN:0<t?1/0:-1/0;default:return(8388608+n)/8388608*t*Math.pow(2,i-127)}},si.bit=function(e,t){if(1==(e>>>t&1)){return!0}return!1},si.toText=function(e,t){for(var i="",n=0,r=t;n<r;){var s=n++;i+=String.fromCodePoint(e[s])}return i},si.prototype={bytes:null,sub:function(e,t){return new si(this.bytes.sub(e,t))},length:null,get_length:function(){return this.bytes.length},writeU8:function(e,t){this.bytes.b[e]=t},readU8:function(e){var t=this.bytes.b[e];return++e,t},readS8:function(e){var t=this.bytes.b[e];return++e,(0==(128&t)?1:-1)*(t&=127)},readU16BE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1];return e+=2,256*t+i},readU16LE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1];return e+=2,256*i+t},readU32LE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1],n=this.bytes.b[e+2],r=this.bytes.b[e+3];return e+=4,t+256*i+256*n*256+256*r*256*256},readU32BE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1],n=this.bytes.b[e+2],r=this.bytes.b[e+3];return e+=4,r+256*n+256*i*256+256*t*256*256},readS16BE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1];e+=2;var n=0==(128&t)?1:-1;return t&=127,-1==n?256*t-32767+i:256*t+i},readS16LE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1],n=0==(128&i)?1:-1;return i&=127,e+=2,-1==n?256*i-32767+t:256*i+t},readS32LE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1],n=this.bytes.b[e+2],r=this.bytes.b[e+3],s=0==(128&r)?1:-1;return r&=127,e+=4,-1==s?-2147483647+t+256*i+256*n*256+256*r*256*256:t+256*i+256*n*256+256*r*256*256},readS32BE:function(e){var t=this.bytes.b[e],i=this.bytes.b[e+1],n=this.bytes.b[e+2],r=this.bytes.b[e+3],s=0==(128&t)?1:-1;return t&=127,e+=4,-1==s?-2147483647+r+256*n+256*i*256+256*t*256*256:r+256*n+256*i*256+256*t*256*256},readF32LE:function(e){return si.readF32(this.readS32LE(e))},readF32BE:function(e){return si.readF32(this.readS32BE(e))},toString:function(){return this.bytes.toString()},readUtf8String:function(){return this.bytes.toString()},toBytes:function(){return this.bytes},unload:function(){this.bytes=null},__class__:si,__properties__:{get_length:"get_length"}};var ai=function(e){this.renderTarget=e};(x["kha.krom.Graphics"]=ai).__name__=!0,ai.__interfaces__=[Pt],ai.prototype={renderTarget:null,begin:function(e){Krom.begin(this.renderTarget,e)},beginFace:function(e){Krom.beginFace(this.renderTarget,e)},beginEye:function(e){},end:function(){Krom.end()},flush:function(){},vsynced:function(){return!0},refreshRate:function(){return 60},clear:function(e,t,i){var n=0;null!=e&&(n|=1),null!=t&&(n|=2),null!=i&&(n|=4),Krom.clear(n,null==e?0:e,t,i)},viewport:function(e,t,i,n){Krom.viewport(e,t,i,n)},setVertexBuffer:function(e){e.set(0)},setVertexBuffers:function(e){Krom.setVertexBuffers(e)},setIndexBuffer:function(e){e.set()},setCubeMap:function(e,t){null!=t&&(null!=t.texture_?Krom.setTexture(e,t.texture_):Krom.setRenderTarget(e,t.renderTarget_))},setCubeMapDepth:function(e,t){null!=t&&Krom.setTextureDepth(e,t.renderTarget_)},setTexture:function(e,t){null!=t&&(null!=t.texture_?Krom.setTexture(e,t.texture_):Krom.setRenderTarget(e,t.renderTarget_))},setTextureDepth:function(e,t){null!=t&&Krom.setTextureDepth(e,t.renderTarget_)},setTextureArray:function(e,t){},setVideoTexture:function(e,t){},setImageTexture:function(e,t){null!=t&&Krom.setImageTexture(e,t.texture_)},setTextureParameters:function(e,t,i,n,r,s){Krom.setTextureParameters(e,t,i,n,r,s)},setTexture3DParameters:function(e,t,i,n,r,s,a){Krom.setTexture3DParameters(e,t,i,n,r,s,a)},setTextureCompareMode:function(e,t){Krom.setTextureCompareMode(e,t)},setCubeMapCompareMode:function(e,t){Krom.setCubeMapCompareMode(e,t)},setPipeline:function(e){e.set()},setStencilReferenceValue:function(e){},setBool:function(e,t){Krom.setBool(e,t)},setInt:function(e,t){Krom.setInt(e,t)},setInt2:function(e,t,i){},setInt3:function(e,t,i,n){},setInt4:function(e,t,i,n,r){},setInts:function(e,t){},setFloat:function(e,t){Krom.setFloat(e,t)},setFloat2:function(e,t,i){Krom.setFloat2(e,t,i)},setFloat3:function(e,t,i,n){Krom.setFloat3(e,t,i,n)},setFloat4:function(e,t,i,n,r){Krom.setFloat4(e,t,i,n,r)},setFloats:function(e,t){Krom.setFloats(e,t.buffer)},setVector2:function(e,t){Krom.setFloat2(e,t.x,t.y)},setVector3:function(e,t){Krom.setFloat3(e,t.x,t.y,t.z)},setVector4:function(e,t){Krom.setFloat4(e,t.x,t.y,t.z,t.w)},setMatrix:function(e,t){ai.mat[0]=t._00,ai.mat[1]=t._01,ai.mat[2]=t._02,ai.mat[3]=t._03,ai.mat[4]=t._10,ai.mat[5]=t._11,ai.mat[6]=t._12,ai.mat[7]=t._13,ai.mat[8]=t._20,ai.mat[9]=t._21,ai.mat[10]=t._22,ai.mat[11]=t._23,ai.mat[12]=t._30,ai.mat[13]=t._31,ai.mat[14]=t._32,ai.mat[15]=t._33,Krom.setMatrix(e,ai.mat.buffer)},setMatrix3:function(e,t){ai.mat[0]=t._00,ai.mat[1]=t._01,ai.mat[2]=t._02,ai.mat[3]=t._10,ai.mat[4]=t._11,ai.mat[5]=t._12,ai.mat[6]=t._20,ai.mat[7]=t._21,ai.mat[8]=t._22,Krom.setMatrix3(e,ai.mat.buffer)},drawIndexedVertices:function(e,t){null==t&&(t=-1),null==e&&(e=0),Krom.drawIndexedVertices(e,t)},drawIndexedVerticesInstanced:function(e,t,i){null==i&&(i=-1),null==t&&(t=0),Krom.drawIndexedVerticesInstanced(e,t,i)},instancedRenderingAvailable:function(){return!0},scissor:function(e,t,i,n){Krom.scissor(e,t,i,n)},disableScissor:function(){Krom.disableScissor()},__class__:ai};var oi=function(e){Y.call(this),this.sampleRate=44100;var t=e.length/4|0,i=new Float32Array(t);this.uncompressedData=i;for(var n=0,r=t;n<r;){var s=n++;this.uncompressedData[s]=e.getFloat(4*s)}this.compressedData=null};(x["kha.krom.Sound"]=oi).__name__=!0,oi.__super__=Y,oi.prototype=r(Y.prototype,{uncompress:function(e){e()},unload:function(){Y.prototype.unload.call(this)},__class__:oi});var li=function(e,t,i,n,r,s,a,o,l){this._00=e,this._10=t,this._20=i,this._01=n,this._11=r,this._21=s,this._02=a,this._12=o,this._22=l};(x["kha.math.FastMatrix3"]=li).__name__=!0,li.fromMatrix3=function(e){return new li(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},li.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:li};var ui=function(e,t,i,n,r,s,a,o,l,u,h,c,A,d,_,f){this._00=e,this._10=t,this._20=i,this._30=n,this._01=r,this._11=s,this._21=a,this._31=o,this._02=l,this._12=u,this._22=h,this._32=c,this._03=A,this._13=d,this._23=_,this._33=f};(x["kha.math.FastMatrix4"]=ui).__name__=!0,ui.fromMatrix4=function(e){return new ui(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},ui.orthogonalProjection=function(e,t,i,n,r,s){return new ui(2/(t-e),0,0,-(t+e)/(t-e),0,2/(n-i),0,-(n+i)/(n-i),0,0,-2/(s-r),-(s+r)/(s-r),0,0,0,1)},ui.perspectiveProjection=function(e,t,i,n){var r=1/Math.tan(e/2);return new ui(r/t,0,0,0,0,r,0,0,0,0,(n+i)/(i-n),2*n*i/(i-n),0,0,-1,0)},ui.lookAt=function(e,t,i){var n=t.x-e.x,r=t.y-e.y,s=t.z-e.z;null==s&&(s=0),null==r&&(r=0),null==n&&(n=0);var a=n,o=r,l=s;null==l&&(l=0),null==o&&(o=0),null==a&&(a=0);var u=a,h=o,c=l,A=Math.sqrt(u*u+h*h+c*c);if(0!=A){var d=1/A;u*=d,h*=d,c*=d}var _=h*i.z-c*i.y,f=c*i.x-u*i.z,g=u*i.y-h*i.x;null==g&&(g=0),null==f&&(f=0),null==_&&(_=0);var p=_,m=f,v=g;null==v&&(v=0),null==m&&(m=0),null==p&&(p=0);var w=p,b=m,y=v,x=Math.sqrt(w*w+b*b+y*y);if(0!=x){var T=1/x;w*=T,b*=T,y*=T}var S=b*c-y*h,E=y*u-w*c,B=w*h-b*u;null==B&&(B=0),null==E&&(E=0),null==S&&(S=0);return new ui(w,b,y,-(w*e.x+b*e.y+y*e.z),S,E,B,-(S*e.x+E*e.y+B*e.z),-u,-h,-c,u*e.x+h*e.y+c*e.z,0,0,0,1)},ui.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:ui};function hi(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t}(x["kha.math.FastVector2"]=hi).__name__=!0,hi.fromVector2=function(e){return new hi(e.x,e.y)},hi.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(0==t)return 0;var i=e/t;return this.x*=i,this.y*=i,e},toString:function(){return"FastVector2("+this.x+", "+this.y+")"},__class__:hi,__properties__:{set_length:"set_length",get_length:"get_length"}};function ci(e,t,i){null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=i}(x["kha.math.FastVector3"]=ci).__name__=!0,ci.fromVector3=function(e){return new ci(e.x,e.y,e.z)},ci.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)return 0;var i=e/t;return this.x*=i,this.y*=i,this.z*=i,e},toString:function(){return"FastVector3("+this.x+", "+this.y+", "+this.z+")"},__class__:ci,__properties__:{set_length:"set_length",get_length:"get_length"}};function Ai(e,t,i,n){null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=i,this.w=n}(x["kha.math.FastVector4"]=Ai).__name__=!0,Ai.fromVector4=function(e){return new Ai(e.x,e.y,e.z,e.w)},Ai.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);if(0==t)return 0;var i=e/t;return this.x*=i,this.y*=i,this.z*=i,this.w*=i,e},toString:function(){return"FastVector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},__class__:Ai,__properties__:{set_length:"set_length",get_length:"get_length"}};function di(e,t,i,n,r,s,a,o,l){this._00=e,this._10=t,this._20=i,this._01=n,this._11=r,this._21=s,this._02=a,this._12=o,this._22=l}(x["kha.math.Matrix3"]=di).__name__=!0,di.fromFastMatrix3=function(e){return new di(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},di.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:di};function _i(e,t,i,n,r,s,a,o,l,u,h,c,A,d,_,f){this._00=e,this._10=t,this._20=i,this._30=n,this._01=r,this._11=s,this._21=a,this._31=o,this._02=l,this._12=u,this._22=h,this._32=c,this._03=A,this._13=d,this._23=_,this._33=f}(x["kha.math.Matrix4"]=_i).__name__=!0,_i.fromFastMatrix4=function(e){return new _i(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},_i.orthogonalProjection=function(e,t,i,n,r,s){return new _i(2/(t-e),0,0,-(t+e)/(t-e),0,2/(n-i),0,-(n+i)/(n-i),0,0,-2/(s-r),-(s+r)/(s-r),0,0,0,1)},_i.perspectiveProjection=function(e,t,i,n){var r=1/Math.tan(e/2);return new _i(r/t,0,0,0,0,r,0,0,0,0,(n+i)/(i-n),2*n*i/(i-n),0,0,-1,0)},_i.lookAt=function(e,t,i){var n=t.x-e.x,r=t.y-e.y,s=t.z-e.z;null==s&&(s=0),null==r&&(r=0),null==n&&(n=0);var a=n,o=r,l=s;null==l&&(l=0),null==o&&(o=0),null==a&&(a=0);var u=a,h=o,c=l,A=Math.sqrt(u*u+h*h+c*c);if(0!=A){var d=1/A;u*=d,h*=d,c*=d}var _=h*i.z-c*i.y,f=c*i.x-u*i.z,g=u*i.y-h*i.x;null==g&&(g=0),null==f&&(f=0),null==_&&(_=0);var p=_,m=f,v=g;null==v&&(v=0),null==m&&(m=0),null==p&&(p=0);var w=p,b=m,y=v,x=Math.sqrt(w*w+b*b+y*y);if(0!=x){var T=1/x;w*=T,b*=T,y*=T}var S=b*c-y*h,E=y*u-w*c,B=w*h-b*u;null==B&&(B=0),null==E&&(E=0),null==S&&(S=0);return new _i(w,b,y,-(w*e.x+b*e.y+y*e.z),S,E,B,-(S*e.x+E*e.y+B*e.z),-u,-h,-c,u*e.x+h*e.y+c*e.z,0,0,0,1)},_i.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:_i};var fi=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};(x["kha.math.Vector2"]=fi).__name__=!0,fi.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(0==t)return 0;var i=e/t;return this.x*=i,this.y*=i,e},__class__:fi,__properties__:{set_length:"set_length",get_length:"get_length"}};function gi(e,t,i){null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=i}(x["kha.math.Vector3"]=gi).__name__=!0,gi.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)return 0;var i=e/t;return this.x*=i,this.y*=i,this.z*=i,e},__class__:gi,__properties__:{set_length:"set_length",get_length:"get_length"}};function pi(e,t,i,n){null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=i,this.w=n}(x["kha.math.Vector4"]=pi).__name__=!0,pi.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);if(0==t)return 0;var i=e/t;return this.x*=i,this.y*=i,this.z*=i,this.w*=i,e},__class__:pi,__properties__:{set_length:"set_length",get_length:"get_length"}};function mi(){}(x["kha.netsync.Client"]=mi).__name__=!0,mi.__isInterface__=!0,mi.prototype={get_id:null,id:null,send:null,receive:null,onClose:null,__class__:mi,__properties__:{get_id:"get_id"}};var vi=function(){};(x["kha.netsync.ControllerBuilder"]=vi).__name__=!0;function wi(){}(x["kha.netsync.Entity"]=wi).__name__=!0,wi.__isInterface__=!0,wi.prototype={_id:null,_size:null,_send:null,_receive:null,__class__:wi};function bi(e){this.myId=e}(x["kha.netsync.LocalClient"]=bi).__name__=!0,bi.__interfaces__=[mi],bi.prototype={myId:null,send:function(e,t){},receive:function(e){},onClose:function(e){},controllers:null,get_controllers:function(){return null},id:null,get_id:function(){return this.myId},__class__:bi,__properties__:{get_id:"get_id",get_controllers:"get_controllers"}};function yi(e,t){this.time=e,this.data=t}(x["kha.netsync.State"]=yi).__name__=!0,yi.prototype={time:null,data:null,__class__:yi};var xi=function(e,t,i){this.ping=1,this.currentPlayers=0,this.controllers=new $,this.entities=new $,(xi.instance=this).maxPlayers=e,this.address=t,this.port=i};(x["kha.netsync.Session"]=xi).__name__=!0,xi.the=function(){return xi.instance},xi.prototype={entities:null,controllers:null,maxPlayers:null,currentPlayers:null,ping:null,address:null,port:null,startCallback:null,refusedCallback:null,resetCallback:null,localClient:null,network:null,updateTaskId:null,pingTaskId:null,me:null,get_me:function(){return this.localClient},addEntity:function(e){var t=this.entities,i=e._id();t.h[i]=e},addController:function(e){L.trace("Adding controller id "+e._id(),{fileName:"kha/netsync/Session.hx",lineNumber:88,className:"kha.netsync.Session",methodName:"addController"}),e._inputBufferIndex=0;var t=this.controllers,i=e._id();t.h[i]=e},sendControllerUpdate:function(e,t){if(this.controllers.h.hasOwnProperty(e)){if(this.controllers.h[e]._inputBuffer.length<this.controllers.h[e]._inputBufferIndex+4+t.length){var i=new he(new ArrayBuffer(this.controllers.h[e]._inputBufferIndex+4+t.length));i.blit(0,this.controllers.h[e]._inputBuffer,0,this.controllers.h[e]._inputBufferIndex),this.controllers.h[e]._inputBuffer=i}this.controllers.h[e]._inputBuffer.setInt32(this.controllers.h[e]._inputBufferIndex,t.length),this.controllers.h[e]._inputBuffer.blit(this.controllers.h[e]._inputBufferIndex+4,t,0,t.length),this.controllers.h[e]._inputBufferIndex+=4+t.length}},sendPing:function(){var e=new he(new ArrayBuffer(5));e.b[0]=4,e.setFloat(1,G.realTime()),this.sendToServer(e)},sendPlayerUpdate:function(){},receive:function(e,t){switch(e.b[0]){case 0:var i=e.b[1];this.localClient=new bi(i),G.resetTime(),this.startCallback();break;case 1:for(var n=e.getDouble(1),r=9,s=this.entities.iterator();s.hasNext();){var a=s.next();a._receive(r,e),r+=a._size()}G.warp(n);break;case 3:switch(e.b[1]){case 0:break;case 1:this.executeRPC(e)}break;case 4:var o=e.getFloat(1);this.ping=G.realTime()-o;break;case 5:this.refusedCallback();break;case 6:this.currentPlayers=e.getInt32(1)}},executeRPC:function(e){var t=[],i=e.getInt32(2),n=6,r=e.getUInt16(n);n+=2;for(var s="",a=0,o=r;a<o;){a++;var l=e.b[n];s+=String.fromCodePoint(l),++n}var u=e.getUInt16(n);n+=2;for(var h="",c=0,A=u;c<A;){c++;var d=e.b[n];h+=String.fromCodePoint(d),++n}for(;n<e.length;){var _=e.b[n];switch(++n,_){case 66:var f=1==e.b[n];++n,L.trace("Bool: "+(null==f?"null":""+f),{fileName:"kha/netsync/Session.hx",lineNumber:295,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(f);break;case 70:var g=e.getDouble(n);n+=8,L.trace("Float: "+g,{fileName:"kha/netsync/Session.hx",lineNumber:300,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(g);break;case 73:var p=e.getInt32(n);n+=4,L.trace("Int: "+p,{fileName:"kha/netsync/Session.hx",lineNumber:305,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(p);break;case 83:var m=e.getUInt16(n);n+=2;for(var v="",w=0,b=m;w<b;){w++;var y=e.b[n];v+=String.fromCodePoint(y),++n}L.trace("String: "+v,{fileName:"kha/netsync/Session.hx",lineNumber:315,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(v);break;default:L.trace("Unknown argument type.",{fileName:"kha/netsync/Session.hx",lineNumber:318,className:"kha.netsync.Session",methodName:"executeRPC"})}}-1==i?rt.field(x[s],h+"_remotely").apply(null,t):rt.field(Ti.objects[i],h+"_remotely").apply(Ti.objects[i],t)},waitForStart:function(e,t,i,n,r){var s=this;this.startCallback=e,this.refusedCallback=t,this.resetCallback=r,this.network=new kha.netsync.Network(this.address,this.port,i,function(){n(),s.reset()}),this.network.listen(function(e){s.receive(e)}),this.updateTaskId=G.addFrameTask(Ni(this,this.update),0),this.ping=1,this.pingTaskId=G.addTimeTask(Ni(this,this.sendPing),0,1)},reset:function(){G.removeFrameTask(this.updateTaskId),G.removeTimeTask(this.pingTaskId),this.currentPlayers=0,this.ping=1,this.controllers=new $,this.entities=new $,this.resetCallback()},update:function(){for(var e=this.controllers.iterator();e.hasNext();){var t=e.next();if(0<t._inputBufferIndex){var i=new he(new ArrayBuffer(22+t._inputBufferIndex));i.b[0]=2,i.setInt32(1,t._id()),i.setDouble(5,G.time()),i.setInt32(13,pt.windowWidth(0)),i.setInt32(17,pt.windowHeight(0)),i.b[21]=0,i.blit(22,t._inputBuffer,0,t._inputBufferIndex),this.sendToServer(i),t._inputBufferIndex=0}}},sendToServer:function(e){this.network.send(e,!1)},__class__:xi,__properties__:{get_me:"get_me"}};var Ti=function(){};(x["kha.netsync.SyncBuilder"]=Ti).__name__=!0;function Si(e,t,i,n){this._0=e,this._1=t,this._2=i,this._3=n}(x["kha.simd.Float32x4"]=Si).__name__=!0,Si.create=function(){return new Si(0,0,0,0)},Si.loadAllFast=function(e){return new Si(e,e,e,e)},Si.load=function(e,t,i,n){return new Si(e,t,i,n)},Si.loadFast=function(e,t,i,n){return new Si(e,t,i,n)},Si.get=function(e,t){var i=0;switch(t){case 0:i=e._0;break;case 1:i=e._1;break;case 2:i=e._2;break;case 3:i=e._3}return i},Si.getFast=function(e,t){switch(t){case 0:return e._0;case 1:return e._1;case 2:return e._2;case 3:return e._3}return 0},Si.abs=function(e){return new Si(Math.abs(e._0),Math.abs(e._1),Math.abs(e._2),Math.abs(e._3))},Si.add=function(e,t){return new Si(e._0+t._0,e._1+t._1,e._2+t._2,e._3+t._3)},Si.div=function(e,t){return new Si(e._0/t._0,e._1/t._1,e._2/t._2,e._3/t._3)},Si.mul=function(e,t){return new Si(e._0*t._0,e._1*t._1,e._2*t._2,e._3*t._3)},Si.neg=function(e){return new Si(-e._0,-e._1,-e._2,-e._3)},Si.reciprocalApproximation=function(e){return new Si(0,0,0,0)},Si.reciprocalSqrtApproximation=function(e){return new Si(0,0,0,0)},Si.sub=function(e,t){return new Si(e._0-t._0,e._1-t._1,e._2-t._2,e._3-t._3)},Si.sqrt=function(e){return new Si(Math.sqrt(e._0),Math.sqrt(e._1),Math.sqrt(e._2),Math.sqrt(e._3))},Si.prototype={_0:null,_1:null,_2:null,_3:null,__class__:Si};var Ei=function(){};(x["zui.Canvas"]=Ei).__name__=!0,Ei.draw=function(e,t,i){Ei.screenW=pt.windowWidth(),Ei.screenH=pt.windowHeight(),Ei.events=[],Ei._ui=e,i.end(),e.begin(i),i.begin(!1),e.g=i;for(var n=0,r=t.elements;n<r.length;){var s=r[n];++n,null==s.parent&&Ei.drawElement(e,t,s)}return i.end(),e.end(),i.begin(!1),Ei.events},Ei.drawElement=function(e,t,i,n,r){if(null==r&&(r=0),null==n&&(n=0),null!=i&&0!=i.visible){var s=Ei.getAnchorOffset(t,i);n+=s[0],r+=s[1],e._x=t.x+(i.x*Ei._ui.ops.scaleFactor|0)+n,e._y=t.y+(i.y*Ei._ui.ops.scaleFactor|0)+r,e._w=i.width*Ei._ui.ops.scaleFactor|0;var a=null!=i.rotation&&0!=i.rotation;switch(a&&e.g.pushRotation(i.rotation,e._x+(i.width*Ei._ui.ops.scaleFactor|0)/2,e._y+(i.height*Ei._ui.ops.scaleFactor|0)/2),i.type){case 0:var o=e.ops.font,l=e.fontSize;null!=i.asset&&ut.endsWith(i.asset,".ttf")&&(e.ops.font=Ei.getAsset(t,i.asset)),e.fontSize=i.height*Ei._ui.ops.scaleFactor|0;var u=i.color_text,h=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=u?u:h,e.text(i.text,i.alignment),e.ops.font=o,e.fontSize=l;break;case 1:var c=Ei.getAsset(t,i.asset),A=null!=i.asset&&ut.endsWith(i.asset,".ttf");if(null!=c&&!A){e.imageScrollAlign=!1;var d=null!=i.color?i.color:-1;if(3==e.image(c,d,i.height*Ei._ui.ops.scaleFactor|0)){var _=i.event;null!=_&&""!=_&&Ei.events.push(_)}e.imageScrollAlign=!0}break;case 2:var f=e.t.ELEMENT_H,g=e.t.BUTTON_H;e.t.ELEMENT_H=i.height,e.t.BUTTON_H=i.height;var p=i.color,m=Ei.getTheme(t.theme).BUTTON_COL;e.t.BUTTON_COL=null!=p?p:m;var v=i.color_text,w=Ei.getTheme(t.theme).BUTTON_TEXT_COL;e.t.BUTTON_TEXT_COL=null!=v?v:w;var b=i.color_hover,y=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.BUTTON_HOVER_COL=null!=b?b:y;var x=i.color_press,T=Ei.getTheme(t.theme).BUTTON_PRESSED_COL;if(e.t.BUTTON_PRESSED_COL=null!=x?x:T,e.button(i.text,i.alignment)){var S=i.event;null!=S&&""!=S&&Ei.events.push(S)}e.t.ELEMENT_H=f,e.t.BUTTON_H=g;break;case 3:break;case 6:var E=i.color_text,B=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=E?E:B;var k=i.color,I=Ei.getTheme(t.theme).BUTTON_COL;e.t.ACCENT_COL=null!=k?k:I;var C=i.color_hover,L=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.ACCENT_HOVER_COL=null!=C?C:L,e.check(Ei.h.nest(i.id),i.text);break;case 7:var N=i.color_text,F=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=N?N:F;var P=i.color,M=Ei.getTheme(t.theme).BUTTON_COL;e.t.ACCENT_COL=null!=P?P:M;var R=i.color_hover,O=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.ACCENT_HOVER_COL=null!=R?R:O,Bi.inlineRadio(e,Ei.h.nest(i.id),i.text.split(";"));break;case 8:var V=i.color_text,D=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=V?V:D;var U=i.color_text,H=Ei.getTheme(t.theme).TEXT_COL;e.t.LABEL_COL=null!=U?U:H;var W=i.color,G=Ei.getTheme(t.theme).BUTTON_COL;e.t.ACCENT_COL=null!=W?W:G;var z=i.color,X=Ei.getTheme(t.theme).BUTTON_COL;e.t.SEPARATOR_COL=null!=z?z:X;var Y=i.color_hover,K=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.ACCENT_HOVER_COL=null!=Y?Y:K,e.combo(Ei.h.nest(i.id),i.text.split(";"));break;case 9:var Q=i.color_text,q=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=Q?Q:q;var j=i.color_text,Z=Ei.getTheme(t.theme).TEXT_COL;e.t.LABEL_COL=null!=j?j:Z;var J=i.color,$=Ei.getTheme(t.theme).BUTTON_COL;e.t.ACCENT_COL=null!=J?J:$;var ee=i.color_hover,te=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.ACCENT_HOVER_COL=null!=ee?ee:te,e.slider(Ei.h.nest(i.id),i.text,0,1,!0,100,!0,i.alignment);break;case 10:var ie=i.color_text,ne=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=ie?ie:ne;var re=i.color_text,se=Ei.getTheme(t.theme).TEXT_COL;e.t.LABEL_COL=null!=re?re:se;var ae=i.color,oe=Ei.getTheme(t.theme).BUTTON_COL;e.t.ACCENT_COL=null!=ae?ae:oe;var le=i.color_hover,ue=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.ACCENT_HOVER_COL=null!=le?le:ue,e.textInput(Ei.h.nest(i.id),i.text,i.alignment);break;case 11:var he=i.color_text,ce=Ei.getTheme(t.theme).TEXT_COL;e.t.TEXT_COL=null!=he?he:ce;var Ae=i.color_text,de=Ei.getTheme(t.theme).TEXT_COL;e.t.LABEL_COL=null!=Ae?Ae:de;var _e=i.color,fe=Ei.getTheme(t.theme).BUTTON_COL;e.t.ACCENT_COL=null!=_e?_e:fe;var ge=i.color_hover,pe=Ei.getTheme(t.theme).BUTTON_HOVER_COL;e.t.ACCENT_HOVER_COL=null!=ge?ge:pe,Bi.keyInput(e,Ei.h.nest(i.id),i.text);break;case 12:var me=e.g.get_color(),ve=e.g,we=i.color,be=Ei.getTheme(t.theme).BUTTON_COL;ve.set_color(null!=we?we:be),e.g.fillRect(e._x,e._y,e._w,i.height*Ei._ui.ops.scaleFactor|0),e.g.set_color(me);break;case 13:var ye=e.g.get_color(),xe=e.g,Te=i.color,Se=Ei.getTheme(t.theme).BUTTON_COL;xe.set_color(null!=Te?Te:Se),e.g.drawRect(e._x,e._y,e._w,i.height*Ei._ui.ops.scaleFactor|0,i.strength),e.g.set_color(ye);break;case 14:var Ee=e.g.get_color(),Be=e.g,ke=i.color,Ie=Ei.getTheme(t.theme).BUTTON_COL;Be.set_color(null!=ke?ke:Ie),mt.fillCircle(e.g,e._x+(i.width*Ei._ui.ops.scaleFactor|0)/2,e._y+(i.height*Ei._ui.ops.scaleFactor|0)/2,e._w/2),e.g.set_color(Ee);break;case 15:var Ce=e.g.get_color(),Le=e.g,Ne=i.color,Fe=Ei.getTheme(t.theme).BUTTON_COL;Le.set_color(null!=Ne?Ne:Fe),mt.drawCircle(e.g,e._x+(i.width*Ei._ui.ops.scaleFactor|0)/2,e._y+(i.height*Ei._ui.ops.scaleFactor|0)/2,e._w/2,i.strength),e.g.set_color(Ce);break;case 16:var Pe=e.g.get_color(),Me=e.g,Re=i.color,Oe=Ei.getTheme(t.theme).BUTTON_COL;Me.set_color(null!=Re?Re:Oe),e.g.fillTriangle(e._x+e._w/2,e._y,e._x,e._y+(i.height*Ei._ui.ops.scaleFactor|0),e._x+e._w,e._y+(i.height*Ei._ui.ops.scaleFactor|0)),e.g.set_color(Pe);break;case 17:var Ve=e.g.get_color(),De=e.g,Ue=i.color,He=Ei.getTheme(t.theme).BUTTON_COL;De.set_color(null!=Ue?Ue:He),e.g.drawLine(e._x+e._w/2,e._y,e._x,e._y+(i.height*Ei._ui.ops.scaleFactor|0),i.strength),e.g.drawLine(e._x,e._y+(i.height*Ei._ui.ops.scaleFactor|0),e._x+e._w,e._y+(i.height*Ei._ui.ops.scaleFactor|0),i.strength),e.g.drawLine(e._x+e._w,e._y+(i.height*Ei._ui.ops.scaleFactor|0),e._x+e._w/2,e._y,i.strength),e.g.set_color(Ve);break;case 18:var We=e.g.get_color(),Ge=i.progress_at,ze=i.progress_total,Xe=e.g,Ye=i.color_progress,Ke=Ei.getTheme(t.theme).TEXT_COL;Xe.set_color(null!=Ye?Ye:Ke),e.g.fillRect(e._x,e._y,e._w/ze*Math.min(Ge,ze),i.height*Ei._ui.ops.scaleFactor|0);var Qe=e.g,qe=i.color,je=Ei.getTheme(t.theme).BUTTON_COL;Qe.set_color(null!=qe?qe:je),e.g.drawRect(e._x,e._y,e._w,i.height*Ei._ui.ops.scaleFactor|0,i.strength),e.g.set_color(We);break;case 19:var Ze=e.g.get_color(),Je=i.progress_at,$e=i.progress_total,et=e.g,tt=i.color_progress,it=Ei.getTheme(t.theme).TEXT_COL;et.set_color(null!=tt?tt:it),mt.drawArc(e.g,e._x+(i.width*Ei._ui.ops.scaleFactor|0)/2,e._y+(i.height*Ei._ui.ops.scaleFactor|0)/2,e._w/2,-Math.PI/2,2*Math.PI/$e*Je-Math.PI/2,i.strength);var nt=e.g,rt=i.color,st=Ei.getTheme(t.theme).BUTTON_COL;nt.set_color(null!=rt?rt:st),mt.fillCircle(e.g,e._x+(i.width*Ei._ui.ops.scaleFactor|0)/2,e._y+(i.height*Ei._ui.ops.scaleFactor|0)/2,e._w/2-10),e.g.set_color(Ze)}if(null!=i.children)for(var at=0,ot=i.children;at<ot.length;){var lt=ot[at];++at,Ei.drawElement(e,t,Ei.elemById(t,lt),(i.x*Ei._ui.ops.scaleFactor|0)+n,(i.y*Ei._ui.ops.scaleFactor|0)+r)}a&&e.g.popTransformation()}},Ei.getText=function(e,t){return t.text},Ei.getAsset=function(e,t){for(var i=0,n=e.assets;i<n.length;){var r=n[i];if(++i,r.name==t)return Ei.assetMap.h[r.id]}return null},Ei.getElementId=function(e){if(-1==Ei.elemId)for(var t=0,i=e.elements;t<i.length;){var n=i[t];++t,Ei.elemId<n.id&&(Ei.elemId=n.id)}return++Ei.elemId},Ei.getAssetId=function(e){if(-1==Ei.assetId)for(var t=0,i=e.assets;t<i.length;){var n=i[t];++t,Ei.assetId<n.id&&(Ei.assetId=n.id)}return++Ei.assetId},Ei.elemById=function(e,t){for(var i=0,n=e.elements;i<n.length;){var r=n[i];if(++i,r.id==t)return r}return null},Ei.scaled=function(e){return e*Ei._ui.ops.scaleFactor|0},Ei.getColor=function(e,t){return null!=e?e:t},Ei.getTheme=function(e){for(var t=0,i=Ei.themes;t<i.length;){var n=i[t];if(++t,n.NAME==e)return n}return null},Ei.getAnchorOffset=function(e,t){var i,n,r=0,s=0;if(null==t.parent)i=e.width*Ei._ui.ops.scaleFactor|0,n=e.height*Ei._ui.ops.scaleFactor|0;else{var a=Ei.elemById(e,t.parent);i=a.width*Ei._ui.ops.scaleFactor|0,n=a.height*Ei._ui.ops.scaleFactor|0}switch(t.anchor){case 1:r+=i/2-(t.width*Ei._ui.ops.scaleFactor|0)/2;break;case 2:r+=i-(t.width*Ei._ui.ops.scaleFactor|0);break;case 3:s+=n/2-(t.height*Ei._ui.ops.scaleFactor|0)/2;break;case 4:r+=i/2-(t.width*Ei._ui.ops.scaleFactor|0)/2,s+=n/2-(t.height*Ei._ui.ops.scaleFactor|0)/2;break;case 5:r+=i-(t.width*Ei._ui.ops.scaleFactor|0),s+=n/2-(t.height*Ei._ui.ops.scaleFactor|0)/2;break;case 6:s+=n-(t.height*Ei._ui.ops.scaleFactor|0);break;case 7:r+=i/2-(t.width*Ei._ui.ops.scaleFactor|0)/2,s+=n-(t.height*Ei._ui.ops.scaleFactor|0);break;case 8:r+=i-(t.width*Ei._ui.ops.scaleFactor|0),s+=n-(t.height*Ei._ui.ops.scaleFactor|0)}return[r,s]};var Bi=function(){};(x["zui.Ext"]=Bi).__name__=!0,Bi.floatInput=function(e,t,i,n){null==n&&(n=0),null==i&&(i=""),t.text=null==t.value?"null":""+t.value;var r=e.textInput(t,i,n);return t.value=parseFloat(r),t.value},Bi.keyInput=function(e,t,i,n){if(null==n&&(n=0),null==i&&(i=""),!e.isVisible(e.t.ELEMENT_H*e.ops.scaleFactor))return e.endElement(),0|t.value;var r=e.getHover();r&&null!=Li.onTextHover&&Li.onTextHover(),e.g.set_color(r?e.t.ACCENT_HOVER_COL:e.t.ACCENT_COL);var s=e.g,a=e.t.FILL_ACCENT_BG,o=e._x+e.buttonOffsetY,l=e._y+e.buttonOffsetY,u=e._w-2*e.buttonOffsetY,h=e.t.BUTTON_H*e.ops.scaleFactor,c=0;0==c&&(c=1),e.enabled||e.fadeColor(),a?s.fillRect(o,l-1,u,1+h):s.drawRect(o,l,u,h,c);var A=e.getReleased()||e.tabPressed;if(e.textSelectedHandle!=t&&A&&e.startTextEdit(t),e.textSelectedHandle==t?Bi.listenToKey(e,t):t.changed=!1,""!=i){e.g.set_color(e.t.LABEL_COL);var d=2==n?0:2,_=0==d?7:0;e.drawString(e.g,i,_,0,d)}return t.text=Bi.keycodeToString(0|t.value),e.g.set_color(e.t.TEXT_COL),e.textSelectedHandle!=t?e.drawString(e.g,t.text,null,0,n):e.drawString(e.g,e.textSelectedCurrentText,null,0,n),e.endElement(),0|t.value},Bi.listenToKey=function(e,t){e.isKeyDown?(t.value=e.key,t.changed=e.changed=!0,e.textSelectedHandle=null,e.isTyping=!1,null!=ei.get()&&ei.get().hide()):e.textSelectedCurrentText="Press a key..."},Bi.list=function(e,t,i,n){var r=0;null==n&&(n={});for(var s=null!=n.addCb?n.addCb:function(e){i.push(e)},a=null!=n.removeCb?n.removeCb:function(e){i.splice(e,1)},o=null!=n.getNameCb?n.getNameCb:function(e){return i[e]},l=null!=n.setNameCb?n.setNameCb:function(e,t){i[e]=t},u=null!=n.getLabelCb?n.getLabelCb:function(e){return""},h=n.itemDrawCb,c=null!=n.showRadio&&n.showRadio,A=null==n.editable||n.editable,d=null==n.showAdd||n.showAdd,_=null!=n.addLabel?n.addLabel:"Add",f=0;f<i.length;){c?(e.row([.12,.68,.2]),e.radio(t.nest(0),f,"")&&(r=f)):e.row([.8,.2]);var g=t.nest(f);g.text=o(f),A?l(f,e.textInput(g,u(f))):e.text(o(f)),e.button("X")?a(f):++f,null!=h&&h(g.nest(f),f-1)}return d&&e.button(_)&&s("untitled"),r},Bi.panelList=function(e,t,i,n,r,s,a,o,l,u,h){null==h&&(h="Add"),null==u&&(u=!0),null==l&&(l=!0),null==n&&(n=function(e){i.push(e)}),null==r&&(r=function(e){i.splice(e,1)}),null==s&&(s=function(e){return i[e]}),null==a&&(a=function(e,t){i[e]=t});for(var c=0;c<i.length;){e.row([.12,.68,.2]);var A=e.panel(t.nest(c),""),d=t.nest(c);l?a(c,e.textInput(d,s(c))):e.text(s(c)),e.button("X")?r(c):++c,null!=o&&A&&o(d.nest(c),c-1)}u&&e.button(h)&&n("untitled")},Bi.colorField=function(e,t,i){null==i&&(i=!1),e.g.set_color(t.color);var n=e.g,r=e._x+2,s=e._y,a=e._w-4,o=e.t.BUTTON_H*e.ops.scaleFactor,l=0;0==l&&(l=1),e.enabled||e.fadeColor(),n.fillRect(r,s-1,a,1+o),e.g.set_color(e.getHover()?e.t.ACCENT_HOVER_COL:e.t.ACCENT_COL);var u=e.g,h=e._x+2,c=e._y,A=e._w-4,d=e.t.BUTTON_H*e.ops.scaleFactor,_=1;return null==_&&(_=0),0==_&&(_=1),e.enabled||e.fadeColor(),u.drawRect(h,c,A,d,_),e.getStarted()&&Ii.showCustom(new Li(e.ops),function(e){Bi.colorWheel(e,t,i)},0|e.inputX,0|e.inputY,200,500),e.endElement(),t.color},Bi.colorPicker=function(e,t,i){null==i&&(i=!1);var n=e.slider(t.nest(0,{value:.00392156862745098*((16711680&t.color)>>>16)}),"R",0,1,!0),r=e.slider(t.nest(1,{value:.00392156862745098*((65280&t.color)>>>8)}),"G",0,1,!0),s=e.slider(t.nest(2,{value:.00392156862745098*(255&t.color)}),"B",0,1,!0),a=.00392156862745098*(t.color>>>24);i&&(a=e.slider(t.nest(3,{value:a}),"A",0,1,!0));var o=C.fromFloats(n,r,s,a);return e.text("",2,o),o},Bi.initPath=function(e,t){e.text="Windows"==t?"C:\\Users":"/"},Bi.fileBrowser=function(e,t,i){null==i&&(i=!1);var n="/",r="ls ",s=pt.get_systemId();"Windows"==s&&(r="dir /b ",i&&(r+="/ad "),n="\\",t.text=ut.replace(t.text,"\\\\","\\"),t.text=ut.replace(t.text,"\r","")),""==t.text&&Bi.initPath(t,s);var a=Krom.getFilesLocation()+n+Bi.dataPath+"dir.txt";t.text!=Bi.lastPath&&Krom.sysCommand(r+'"'+t.text+'" > "'+a+'"'),Bi.lastPath=t.text;var o=he.ofData(Krom.loadBlob(a)).toString().split("\n"),l=t.text.indexOf("/"),u=t.text.indexOf("\\"),h=-1<l&&t.text.length-1>l||-1<u&&t.text.length-1>u;t.changed=!1,h&&e.button("..",0)&&(t.changed=e.changed=!0,t.text=t.text.substring(0,t.text.lastIndexOf(n)),2==t.text.length&&":"==t.text.charAt(1)&&(t.text+=n));for(var c=0;c<o.length;){var A=o[c];++c,""!=A&&"."!=A.charAt(0)&&e.button(A,0)&&(t.changed=e.changed=!0,t.text.charAt(t.text.length-1)!=n&&(t.text+=n),t.text+=A)}return t.text},Bi.inlineRadio=function(e,t,i,n){if(null==n&&(n=1),!e.isVisible(e.t.ELEMENT_H*e.ops.scaleFactor))return e.endElement(),t.position;e.getReleased()?(++t.position>=i.length&&(t.position=0),t.changed=e.changed=!0):t.changed=!1;var r=e.getHover();return Bi.drawInlineRadio(e,i[t.position],r,n),e.endElement(),t.position},Bi.drawInlineRadio=function(e,t,i,n){null==n&&(n=1),i?(e.g.set_color(e.t.ACCENT_HOVER_COL),e.g.fillRect(e._x+e.buttonOffsetY,e._y+e.buttonOffsetY,e._w-2*e.buttonOffsetY,e.t.BUTTON_H*e.ops.scaleFactor)):(e.g.set_color(e.t.ACCENT_COL),e.enabled||e.fadeColor(),e.g.drawRect(e._x+e.buttonOffsetY,e._y+e.buttonOffsetY,e._w-2*e.buttonOffsetY,e.t.BUTTON_H*e.ops.scaleFactor)),e.g.set_color(e.t.TEXT_COL),e.drawString(e.g,t,e.t.TEXT_OFFSET*e.ops.scaleFactor,0,n)},Bi.colorWheel=function(e,t,i,n,r,s){null==s&&(s=!0),null==r&&(r=!1),null==i&&(i=!1),null==n&&(n=e._w),Bi.rgbToHsv(.00392156862745098*((16711680&t.color)>>>16),.00392156862745098*((65280&t.color)>>>8),.00392156862745098*(255&t.color),Bi.ar);var a=Bi.ar[0],o=Bi.ar[1],l=Bi.ar[2],u=.00392156862745098*(t.color>>>24),h=e._x,c=e._y;null!=e.currentWindow&&e.currentWindow.scrollEnabled||(n-=e.t.SCROLL_W*e.ops.scaleFactor|0,h+=(e.t.SCROLL_W*e.ops.scaleFactor|0)/2),e.image(e.ops.color_wheel,C.fromFloats(l,l,l));var A=h+n/2,d=c+(e._y-c)/2,_=.7*n,f=_/2,g=A,p=d+o*f,m=a*(2*Math.PI),v=Math.cos(m)*(g-A)-Math.sin(m)*(p-d)+A,w=Math.sin(m)*(g-A)+Math.cos(m)*(p-d)+d;g=v,p=w,e.g.set_color(-16777216),e.g.fillRect(g-3*e.ops.scaleFactor,p-3*e.ops.scaleFactor,6*e.ops.scaleFactor,6*e.ops.scaleFactor),e.g.set_color(-1),e.g.fillRect(g-2*e.ops.scaleFactor,p-2*e.ops.scaleFactor,4*e.ops.scaleFactor,4*e.ops.scaleFactor),r&&(i?e.row([.3333333333333333,.3333333333333333,.3333333333333333]):e.row([.5,.5]));var b=t.nest(0);if(b.value=Math.round(100*l)/100,l=e.slider(b,"Value",0,1,!0),b.changed?t.changed=e.changed=!0:t.changed=!1,i){var y=t.nest(1,{value:Math.round(100*u)/100});u=e.slider(y,"Alpha",0,1,!0),y.changed&&(t.changed=e.changed=!0)}var x=A+e._windowX,T=d+e._windowY;if(e.inputStarted&&e.getInputInRect(x-f,T-f,_,_)&&(Bi.wheelSelectedHande=t),e.inputReleased&&(Bi.wheelSelectedHande=null),e.inputDown&&Bi.wheelSelectedHande==t){var S=x-e.inputX,E=T-e.inputY;o=Math.min(Math.sqrt(S*S+E*E),f)/f;var B=Math.atan2(e.inputX-x,e.inputY-T);B<0&&(B=Math.PI+(Math.PI-Math.abs(B))),a=(B=2*Math.PI-B)/(2*Math.PI),t.changed=e.changed=!0}return Bi.hsvToRgb(a,o,l,Bi.ar),t.color=C.fromFloats(Bi.ar[0],Bi.ar[1],Bi.ar[2],u),s&&e.text("",2,t.color),t.color},Bi.keycodeToString=function(e){switch(e){case-1:return"None";case 0:return"Unknown";case 1:return"Back";case 3:return"Cancel";case 6:return"Help";case 8:return"Backspace";case 9:return"Tab";case 12:return"Clear";case 13:return"Return";case 16:return"Shift";case 17:return"Ctrl";case 18:return"Alt";case 19:return"Pause";case 20:return"CapsLock";case 21:return"Kana";case 22:return"Eisu";case 23:return"Junja";case 24:return"Final";case 25:return"Hanja";case 27:return"Esc";case 28:return"Convert";case 29:return"NonConvert";case 30:return"Accept";case 31:return"ModeChange";case 32:return"Space";case 33:return"PageUp";case 34:return"PageDown";case 35:return"End";case 36:return"Home";case 37:return"Left";case 38:return"Up";case 39:return"Right";case 40:return"Down";case 41:return"Select";case 42:return"Print";case 43:return"Execute";case 44:return"PrintScreen";case 45:return"Insert";case 46:return"Delete";case 58:return"Colon";case 59:return"Semicolon";case 60:return"LessThan";case 61:return"Equals";case 62:return"GreaterThan";case 63:return"QuestionMark";case 64:return"At";case 91:return"Win";case 93:return"ContextMenu";case 95:return"Sleep";case 96:return"Numpad0";case 97:return"Numpad1";case 98:return"Numpad2";case 99:return"Numpad3";case 100:return"Numpad4";case 101:return"Numpad5";case 102:return"Numpad6";case 103:return"Numpad7";case 104:return"Numpad8";case 105:return"Numpad9";case 106:return"Multiply";case 107:return"Add";case 108:return"Separator";case 109:return"Subtract";case 110:return"Decimal";case 111:return"Divide";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 124:return"F13";case 125:return"F14";case 126:return"F15";case 127:return"F16";case 128:return"F17";case 129:return"F18";case 130:return"F19";case 131:return"F20";case 132:return"F21";case 133:return"F22";case 134:return"F23";case 135:return"F24";case 144:return"NumLock";case 145:return"ScrollLock";case 146:return"WinOemFjJisho";case 147:return"WinOemFjMasshou";case 148:return"WinOemFjTouroku";case 149:return"WinOemFjLoya";case 150:return"WinOemFjRoya";case 160:return"Circumflex";case 161:return"Exclamation";case 162:return"DoubleQuote";case 163:return"Hash";case 164:return"Dollar";case 165:return"Percent";case 166:return"Ampersand";case 167:return"Underscore";case 168:return"OpenParen";case 169:return"CloseParen";case 170:return"Asterisk";case 171:return"Plus";case 172:return"Pipe";case 173:return"HyphenMinus";case 174:return"OpenCurlyBracket";case 175:return"CloseCurlyBracket";case 176:return"Tilde";case 181:return"VolumeMute";case 182:return"VolumeDown";case 183:return"VolumeUp";case 188:return"Comma";case 190:return"Period";case 191:return"Slash";case 192:return"BackQuote";case 219:return"OpenBracket";case 220:return"BackSlash";case 221:return"CloseBracket";case 222:return"Quote";case 224:return"Meta";case 225:return"AltGr";case 227:return"WinIcoHelp";case 228:return"WinIco00";case 230:return"WinIcoClear";case 233:return"WinOemReset";case 234:return"WinOemJump";case 235:return"WinOemPA1";case 236:return"WinOemPA2";case 237:return"WinOemPA3";case 238:return"WinOemWSCTRL";case 239:return"WinOemCUSEL";case 240:return"WinOemATTN";case 241:return"WinOemFinish";case 242:return"WinOemCopy";case 243:return"WinOemAuto";case 244:return"WinOemENLW";case 245:return"WinOemBackTab";case 246:return"ATTN";case 247:return"CRSEL";case 248:return"EXSEL";case 249:return"EREOF";case 250:return"Play";case 251:return"Zoom";case 253:return"PA1";case 254:return"WinOemClear"}return String.fromCodePoint(e)},Bi.dist=function(e,t,i,n){var r=e-i,s=t-n;return Math.sqrt(r*r+s*s)},Bi.fract=function(e){return e-(0|e)},Bi.mix=function(e,t,i){return e*(1-i)+t*i},Bi.clamp=function(e,t,i){return Math.min(Math.max(e,t),i)},Bi.step=function(e,t){return t<e?0:1},Bi.hsvToRgb=function(e,t,i,n){var r=e+1,s=Math.abs(6*(r-(0|r))-3),a=e+.6666666666666666,o=Math.abs(6*(a-(0|a))-3),l=e+.3333333333333333,u=Math.abs(6*(l-(0|l))-3);n[0]=i*(1-t+Math.min(Math.max(s-1,0),1)*t),n[1]=i*(1-t+Math.min(Math.max(o-1,0),1)*t),n[2]=i*(1-t+Math.min(Math.max(u-1,0),1)*t)},Bi.rgbToHsv=function(e,t,i,n){var r=t<i?0:1,s=i*(1-r)+t*r,a=t<i?0:1,o=t*(1-a)+i*a,l=t<i?0:1,u=t<i?0:1,h=e<s?0:1,c=s*(1-h)+e*h,A=e<s?0:1,d=o*(1-A)+o*A,_=e<s?0:1,f=(.6666666666666666*(1-u)+-.3333333333333333*u)*(1-_)+(-1*(1-l)+0*l)*_,g=e<s?0:1,p=e*(1-g)+s*g,m=c-Math.min(p,d);n[0]=Math.abs(f+(p-d)/(6*m+1e-10)),n[1]=m/(1e-10+c),n[2]=c};function ki(){}(x["zui.Id"]=ki).__name__=!0;var Ii=function(){};(x["zui.Popup"]=Ii).__name__=!0,Ii.render=function(e){if(null==Ii.boxCommands){if(Ii.ui.begin(e),Ii.ui.window(Ii.hwnd,Ii.modalX,Ii.modalY,Ii.modalW,Ii.modalH)){Ii.drawTitle(e);for(var t=0,i=Ii.boxText.split("\n");t<i.length;){var n=i[t];++t,Ii.ui.text(n)}Ii.ui._y=Ii.ui._h-Ii.ui.t.BUTTON_H-10,Ii.ui.row([.3333333333333333,.3333333333333333,.3333333333333333]),Ii.ui.endElement(),Ii.ui.button("OK")&&(Ii.show=!1)}Ii.ui.end()}else Ii.ui.begin(e),Ii.ui.window(Ii.hwnd,Ii.modalX,Ii.modalY,Ii.modalW,Ii.modalH)&&(Ii.drawTitle(e),Ii.ui._y+=10,Ii.boxCommands(Ii.ui)),Ii.ui.end()},Ii.drawTitle=function(e){if(""!=Ii.boxTitle){e.set_color(Ii.ui.t.SEPARATOR_COL);var t=Ii.ui,i=Ii.ui._x,n=Ii.ui._y,r=Ii.ui._w,s=Ii.ui.t.BUTTON_H,a=0;0==a&&(a=1),t.enabled||t.fadeColor(),e.fillRect(i,n-1,r,s+1),e.set_color(Ii.ui.t.TEXT_COL),Ii.ui.text(Ii.boxTitle)}},Ii.update=function(){var e=null!=Ii.ui.comboSelectedHandle;Ii.ui.inputStarted&&!e&&(Ii.ui.inputX<Ii.modalX||Ii.ui.inputX>Ii.modalX+Ii.modalW||Ii.ui.inputY<Ii.modalY||Ii.ui.inputY>Ii.modalY+Ii.modalH)&&(Ii.show=!1)},Ii.showMessage=function(e,t,i){Ii.ui=e,Ii.init(),Ii.boxTitle=t,Ii.boxText=i,Ii.boxCommands=null},Ii.showCustom=function(e,t,i,n,r,s){null==s&&(s=160),null==r&&(r=400),null==n&&(n=-1),null==i&&(i=-1),Ii.ui=e,Ii.init(i,n,r,s),Ii.boxTitle="",Ii.boxText="",Ii.boxCommands=t},Ii.init=function(e,t,i,n){null==n&&(n=160),null==i&&(i=400),null==t&&(t=-1),null==e&&(e=-1);var r=pt.windowWidth(),s=pt.windowHeight();Ii.modalX=e,Ii.modalY=t,Ii.modalW=i*Ii.ui.ops.scaleFactor|0,Ii.modalH=n*Ii.ui.ops.scaleFactor|0,-1==e&&(Ii.modalX=r/2-Ii.modalW/2|0),-1==t&&(Ii.modalY=s/2-Ii.modalH/2|0),Ii.modalX=0|Math.max(0,Math.min(Ii.modalX,r-Ii.modalW)),Ii.modalY=0|Math.max(0,Math.min(Ii.modalY,s-Ii.modalH)),Ii.hwnd.dragX=0,Ii.hwnd.dragY=0,Ii.show=!0};var Ci=function(){};(x["zui.Themes"]=Ci).__name__=!0;var Li=function(e){this.restoreY=-1,this.restoreX=-1,this.checkSelectImage=null,this.elementsBaked=!1,this.tabScroll=0,this.tabHandle=null,this.tabNames=null,this.tooltipTime=0,this.tooltipWait=!1,this.tooltipShown=!1,this.tooltipY=0,this.tooltipX=0,this.tooltipInvertY=!1,this.tooltipImgMaxWidth=null,this.tooltipImg=null,this.tooltipText="",this.comboToSubmit=0,this.submitComboHandle=null,this.comboSelectedWindow=null,this.comboSelectedHandle=null,this.tabPressedHandle=null,this.tabPressed=!1,this.textToSubmit="",this.submitTextHandle=null,this.textSelectedHandle=null,this.windowHeader=0,this.dragHandle=null,this.scrollHandle=null,this.windowEnded=!0,this._windowY=0,this._windowX=0,this.imageScrollAlign=!0,this.scrollAlign=0,this.curRatio=-1,this.highlightAnchor=0,this.cursorY=0,this.cursorX=0,this.key=null,this.isReturnDown=!1,this.isEscapeDown=!1,this.isDeleteDown=!1,this.isBackspaceDown=!1,this.isAltDown=!1,this.isCtrlDown=!1,this.isShiftDown=!1,this.isKeyDown=!1,this.isKeyPressed=!1,this.inputWheelDelta=0,this.inputEnabled=!0,this.inputRegistered=!1,this.alwaysRedraw=!1,this.scrollEnabled=!0,this.imageInvertY=!1,this.changed=!1,this.isReleased=!1,this.isHovered=!1,this.isPushed=!1,this.isStarted=!1,this.enabled=!0,this.isTyping=!1,this.isScrolling=!1,null==e.theme&&(e.theme=Ci.dark),this.t=e.theme,null==e.khaWindowId&&(e.khaWindowId=0),null==e.scaleFactor&&(e.scaleFactor=1),null==e.autoNotifyInput&&(e.autoNotifyInput=!0),this.ops=e,this.setScale(e.scaleFactor),e.autoNotifyInput&&this.registerInput(),null==Li.copyReceiver&&(Li.copyReceiver=this,pt.notifyOnCutCopyPaste(Ni(this,this.onCut),Ni(this,this.onCopy),Ni(this,this.onPaste)),pt.notifyOnFrames(function(e){(Li.isCopy||Li.isPaste)&&1<++Li.copyFrame&&(Li.isCopy=Li.isCut=Li.isPaste=!1,Li.copyFrame=0)}));var t=Dt.createTextVertexStructure();this.rtTextPipeline=Dt.createTextPipeline(t),this.rtTextPipeline.alphaBlendSource=1,this.rtTextPipeline.compile()};function Ni(e,t){return null==t?null:(null==t.__id__&&(t.__id__=n.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&(i=t.bind(e),e.hx__closures__[t.__id__]=i),i);var i}(x["zui.Zui"]=Li).__name__=!0,Li.prototype={isScrolling:null,isTyping:null,enabled:null,isStarted:null,isPushed:null,isHovered:null,isReleased:null,changed:null,imageInvertY:null,scrollEnabled:null,alwaysRedraw:null,inputRegistered:null,inputEnabled:null,inputX:null,inputY:null,inputStartedX:null,inputStartedY:null,inputDX:null,inputDY:null,inputWheelDelta:null,inputStarted:null,inputStartedR:null,inputReleased:null,inputReleasedR:null,inputDown:null,inputDownR:null,isKeyPressed:null,isKeyDown:null,isShiftDown:null,isCtrlDown:null,isAltDown:null,isBackspaceDown:null,isDeleteDown:null,isEscapeDown:null,isReturnDown:null,key:null,char:null,cursorX:null,cursorY:null,highlightAnchor:null,ratios:null,curRatio:null,xBeforeSplit:null,wBeforeSplit:null,g:null,t:null,ops:null,globalG:null,rtTextPipeline:null,fontSize:null,fontOffsetY:null,arrowOffsetX:null,arrowOffsetY:null,titleOffsetX:null,buttonOffsetY:null,checkOffsetX:null,checkOffsetY:null,checkSelectOffsetX:null,checkSelectOffsetY:null,radioOffsetX:null,radioOffsetY:null,radioSelectOffsetX:null,radioSelectOffsetY:null,scrollAlign:null,imageScrollAlign:null,_x:null,_y:null,_w:null,_h:null,_windowX:null,_windowY:null,_windowW:null,_windowH:null,currentWindow:null,windowEnded:null,scrollHandle:null,dragHandle:null,windowHeader:null,textSelectedHandle:null,textSelectedCurrentText:null,submitTextHandle:null,textToSubmit:null,tabPressed:null,tabPressedHandle:null,comboSelectedHandle:null,comboSelectedWindow:null,comboSelectedAlign:null,comboSelectedTexts:null,comboSelectedLabel:null,comboSelectedX:null,comboSelectedY:null,comboSelectedW:null,submitComboHandle:null,comboToSubmit:null,tooltipText:null,tooltipImg:null,tooltipImgMaxWidth:null,tooltipInvertY:null,tooltipX:null,tooltipY:null,tooltipShown:null,tooltipWait:null,tooltipTime:null,tabNames:null,tabHandle:null,tabScroll:null,elementsBaked:null,checkSelectImage:null,setScale:function(e){this.ops.scaleFactor=e,this.fontSize=this.t.FONT_SIZE*this.ops.scaleFactor|0;var t=this.ops.font.height(this.fontSize);this.fontOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-t)/2,this.arrowOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.ARROW_SIZE*this.ops.scaleFactor)/2,this.arrowOffsetX=this.arrowOffsetY,this.titleOffsetX=(2*this.arrowOffsetX+this.t.ARROW_SIZE*this.ops.scaleFactor)/this.ops.scaleFactor,this.buttonOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.BUTTON_H*this.ops.scaleFactor)/2,this.checkOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.CHECK_SIZE*this.ops.scaleFactor)/2,this.checkOffsetX=this.checkOffsetY,this.checkSelectOffsetY=(this.t.CHECK_SIZE*this.ops.scaleFactor-this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor)/2,this.checkSelectOffsetX=this.checkSelectOffsetY,this.radioOffsetY=(this.t.ELEMENT_H*this.ops.scaleFactor-this.t.CHECK_SIZE*this.ops.scaleFactor)/2,this.radioOffsetX=this.radioOffsetY,this.radioSelectOffsetY=(this.t.CHECK_SIZE*this.ops.scaleFactor-this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor)/2,this.radioSelectOffsetX=this.radioSelectOffsetY,this.elementsBaked=!1},bakeElements:function(){null!=this.checkSelectImage&&this.checkSelectImage.unload(),this.checkSelectImage=R.createRenderTarget(this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor|0,this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor|0,null,0,1,this.ops.khaWindowId);var e=this.checkSelectImage.get_g2();e.begin(!0,0),e.set_color(this.t.ACCENT_SELECT_COL),e.drawLine(0,0,this.checkSelectImage.get_width(),this.checkSelectImage.get_height(),2*this.ops.scaleFactor),e.drawLine(this.checkSelectImage.get_width(),0,0,this.checkSelectImage.get_height(),2*this.ops.scaleFactor),e.end(),this.elementsBaked=!0},remove:function(){this.ops.autoNotifyInput&&this.unregisterInput()},registerInput:function(){ti.get().notifyWindowed(this.ops.khaWindowId,Ni(this,this.onMouseDown),Ni(this,this.onMouseUp),Ni(this,this.onMouseMove),Ni(this,this.onMouseWheel)),ei.get().notify(Ni(this,this.onKeyDown),Ni(this,this.onKeyUp),Ni(this,this.onKeyPress)),this.inputRegistered=!0},unregisterInput:function(){ti.get().removeWindowed(this.ops.khaWindowId,Ni(this,this.onMouseDown),Ni(this,this.onMouseUp),Ni(this,this.onMouseMove),Ni(this,this.onMouseWheel)),ei.get().remove(Ni(this,this.onKeyDown),Ni(this,this.onKeyUp),Ni(this,this.onKeyPress)),this.endInput(),this.inputX=this.inputY=0,this.inputRegistered=!1},begin:function(e){this.elementsBaked||this.bakeElements(),this.changed=!1,this.globalG=e,this._x=0,this._y=0,this._w=0,this._h=0},end:function(e){null==e&&(e=!0),this.windowEnded||this.endWindow(),this.drawCombo(),this.drawTooltip(),this.tabPressedHandle=null,e&&this.endInput()},beginRegion:function(e,t,i,n){this.elementsBaked||(e.end(),this.bakeElements(),e.begin(!1)),this.changed=!1,this.globalG=e,this.g=e,this.currentWindow=null,this.tooltipText="",this.tooltipImg=null,this._windowX=0,this._windowY=0,this._windowW=n,this._x=t,this._y=i,this._w=n},endRegion:function(e){null==e&&(e=!0),this.drawTooltip(),this.tabPressedHandle=null,e&&this.endInput()},endInput:function(){this.isKeyPressed=!1,this.inputStarted=!1,this.inputStartedR=!1,this.inputReleased=!1,this.inputReleasedR=!1,this.inputDX=0,this.inputDY=0,this.inputWheelDelta=0,Li.textToPaste="",Li.keyRepeat&&this.isKeyDown&&.05<G.time()-Li.keyRepeatTime&&(8!=this.key&&46!=this.key&&37!=this.key&&39!=this.key&&38!=this.key&&40!=this.key||(Li.keyRepeatTime=G.time(),this.isKeyPressed=!0))},inputChanged:function(){return!!(0!=this.inputDX||0!=this.inputDY||0!=this.inputWheelDelta||this.inputStarted||this.inputStartedR||this.inputReleased||this.inputReleasedR||this.inputDown||this.inputDownR)||this.isKeyPressed},windowDirty:function(e,t,i,n,r){var s=t+e.dragX,a=i+e.dragY,o=this.getInputInRect(s,a,n,r)&&this.inputChanged();return!!(this.alwaysRedraw||this.isScrolling||this.isTyping)||o},window:function(e,t,i,n,r,s){return null==s&&(s=!1),null!=e.texture&&n==e.texture.get_width()&&r==e.texture.get_height()||this.resize(e,n,r,this.ops.khaWindowId),this.windowEnded||this.endWindow(),this.windowEnded=!1,this.g=e.texture.get_g2(),this.currentWindow=e,this._windowX=t+e.dragX,this._windowY=i+e.dragY,this._windowW=n,this._windowH=r,this.windowHeader=0,this.windowDirty(e,t,i,n,r)&&(e.redraws=2),null!=Li.onBorderHover&&(this.getInputInRect(this._windowX-4,this._windowY,8,this._windowH)?Li.onBorderHover(e,0):this.getInputInRect(this._windowX+this._windowW-4,this._windowY,8,this._windowH)?Li.onBorderHover(e,1):this.getInputInRect(this._windowX,this._windowY-4,this._windowW,8)?Li.onBorderHover(e,2):this.getInputInRect(this._windowX,this._windowY+this._windowH-4,this._windowW,8)&&Li.onBorderHover(e,3)),!(e.redraws<=0)&&(this._x=0,this._y=e.scrollOffset,1==e.layout&&(n=this.t.ELEMENT_W*this.ops.scaleFactor|0),this._w=e.scrollEnabled?n-(this.t.SCROLL_W*this.ops.scaleFactor|0):n,this._h=r,this.tooltipText="",this.tooltipImg=null,this.tabNames=null,this.t.FILL_WINDOW_BG?this.g.begin(!0,this.t.WINDOW_BG_COL):(this.g.begin(!0,0),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x,this._y-e.scrollOffset,e.lastMaxX,e.lastMaxY)),(e.dragEnabled=s)&&(this.inputStarted&&this.getInputInRect(this._windowX,this._windowY,this._windowW,15)?this.dragHandle=e:this.inputReleased&&(this.dragHandle=null),e==this.dragHandle&&(e.redraws=2,e.dragX+=0|this.inputDX,e.dragY+=0|this.inputDY),this._y+=15,this.windowHeader+=15),!0)},endWindow:function(e){null==e&&(e=!0);var t=this.currentWindow;if(null!=t){if(0<t.redraws||this.isScrolling||this.isTyping){null!=this.tabNames&&this.drawTabs(),t.dragEnabled&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,0,this._windowW,15));var i=this._y-t.scrollOffset;if(i<this._windowH||1==t.layout||!this.scrollEnabled)t.scrollEnabled=!1,t.scrollOffset=0;else{t.scrollEnabled=!0,this.tabScroll<0&&(t.scrollOffset=this.tabScroll,this.tabScroll=0);var n=i-this._windowH,r=-t.scrollOffset/n,s=this._windowH*Math.abs(this._windowH/i);s=Math.max(s,this.t.ELEMENT_H*this.ops.scaleFactor);var a=this._windowH-s,o=n/a,l=a*r,u=this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0),l+this._windowY,this.t.SCROLL_W*this.ops.scaleFactor|0,s);this.inputStarted&&u&&(this.scrollHandle=t,this.isScrolling=!0),t==this.scrollHandle?this.scroll(this.inputDY*o,i):0!=this.inputWheelDelta&&null==this.comboSelectedHandle&&this.getInputInRect(this._windowX,this._windowY,this._windowW,this._windowH)&&this.scroll(this.inputWheelDelta*(this.t.ELEMENT_H*this.ops.scaleFactor),i),0<t.scrollOffset?t.scrollOffset=0:i+t.scrollOffset<this._windowH&&(t.scrollOffset=this._windowH-i),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0),this._windowY,this.t.SCROLL_W*this.ops.scaleFactor|0,this._windowH),this.g.set_color(this.t.ACCENT_COL);var h=this.getInputInRect(this._windowX+this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0),this._windowY,this.t.SCROLL_W*this.ops.scaleFactor|0,this._windowH)||t==this.scrollHandle?this.t.SCROLL_W*this.ops.scaleFactor|0:(this.t.SCROLL_W*this.ops.scaleFactor|0)/3;this.g.fillRect(this._windowW-h-this.scrollAlign,l,h,s)}t.lastMaxX=this._x,t.lastMaxY=this._y,0==t.layout?t.lastMaxX+=this._windowW:t.lastMaxY+=this._windowH,t.redraws--,this.g.end()}this.windowEnded=!0,(Li.alwaysRedrawWindow||-4<t.redraws)&&(e&&this.globalG.begin(!1),this.globalG.set_color(this.t.WINDOW_TINT_COL),this.globalG.drawImage(t.texture,this._windowX,this._windowY),e&&this.globalG.end(),t.redraws<=0&&t.redraws--)}},scroll:function(e,t){this.currentWindow.scrollOffset-=e},restoreX:null,restoreY:null,tab:function(e,t){null==this.tabNames&&(this.tabNames=[],this.tabHandle=e,this.windowHeader+=this.buttonOffsetY+this.t.BUTTON_H*this.ops.scaleFactor,this.restoreX=this.inputX,this.restoreY=this.inputY,this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeader)&&(this.inputX=this.inputY=-1)),this.tabNames.push(t);var i=e.position==this.tabNames.length-1;return i&&(this.endElement(),this._y+=2),i},drawTabs:function(){if(this.inputX=this.restoreX,this.inputY=this.restoreY,null!=this.currentWindow){var e=0,t=this.t.BUTTON_H*this.ops.scaleFactor*1.1|0,i=this._y;this._y=this.currentWindow.dragEnabled?15:0,this.tabHandle.changed=!1,this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY+t+2),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this.buttonOffsetY,this._y+this.buttonOffsetY+t+2,this._windowW-2*this.buttonOffsetY,1),this._y+=2;for(var n=0,r=this.tabNames.length;n<r;){var s=n++;this._x=e,this._w=this.ops.font.width(this.fontSize,this.tabNames[s])+2*this.buttonOffsetY+18*this.ops.scaleFactor|0;var a=this.getReleased(),o=this.getPushed(),l=this.getHover();if(a){var u=this.tabHandle.nest(this.tabHandle.position);u.scrollOffset=this.currentWindow.scrollOffset,u=this.tabHandle.nest(s),this.tabScroll=u.scrollOffset,this.tabHandle.position=s,this.currentWindow.redraws=3,this.tabHandle.changed=!0}var h=this.tabHandle.position==s;this.g.set_color(h?this.t.WINDOW_BG_COL:o||l?this.t.BUTTON_HOVER_COL:this.t.SEPARATOR_COL),e+=this._w+1;var c=this.g,A=this._x+this.buttonOffsetY,d=this._y+this.buttonOffsetY,_=this._w,f=0;0==f&&(f=1),this.enabled||this.fadeColor(),c.fillRect(A,d-1,_,1+t),this.g.set_color(h?this.t.BUTTON_TEXT_COL:this.t.LABEL_COL),this.drawString(this.g,this.tabNames[s],this.t.TEXT_OFFSET,0,0),h&&(this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x+this.buttonOffsetY+1,this._y+this.buttonOffsetY+t,this._w-1,1))}this._x=0,this._y=i,this._w=0|(this.currentWindow.scrollEnabled?this._windowW-(this.t.SCROLL_W*this.ops.scaleFactor|0):this._windowW)}},panel:function(e,t,i){return null==i&&(i=!1),this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)&&(this.getReleased()&&(e.selected=!e.selected,e.changed=this.changed=!0),i?this.drawTree(e.selected):this.drawArrow(e.selected),this.g.set_color(this.t.LABEL_COL),this.g.set_opacity(1),this.drawString(this.g,t,this.titleOffsetX,0)),this.endElement(),e.selected},image:function(e,t,i,n,r,s,a){null==a&&(a=0),null==s&&(s=0),null==r&&(r=0),null==n&&(n=0),null==t&&(t=-1);var o=(0<s?s:e.get_width())*this.ops.scaleFactor,l=(0<a?a:e.get_height())*this.ops.scaleFactor,u=Math.min(o,this._w),h=this._x;if(this.imageScrollAlign&&(u=Math.min(o,this._w-2*this.buttonOffsetY),h+=this.buttonOffsetY,!(null!=this.currentWindow&&this.currentWindow.scrollEnabled))){var c=-1==this.curRatio?1:this.ratios[this.curRatio];u-=(this.t.SCROLL_W*this.ops.scaleFactor|0)*c,h+=(this.t.SCROLL_W*this.ops.scaleFactor|0)*c/2}var A=null==i?u/o:i/l;if(null==i?i=l*A:u=o*A,!this.isVisible(i))return this.endElement(i),0;var d=this.getStarted(i),_=this.getPushed(i),f=this.getReleased(i);this.getHover(i);this.g.set_color(t),this.enabled||this.fadeColor();var g=i;return 0<s?this.imageInvertY?this.g.drawScaledSubImage(e,n,r,s,a,h,this._y+g,u,-g):this.g.drawScaledSubImage(e,n,r,s,a,h,this._y,u,g):this.imageInvertY?this.g.drawScaledImage(e,h,this._y+g,u,-g):this.g.drawScaledImage(e,h,this._y,u,g),this.endElement(i),d?1:f?3:_?2:0},text:function(e,t,i){if(null==i&&(i=0),null==t&&(t=0),!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),0;var n=this.getStarted(),r=this.getPushed(),s=this.getReleased();this.getHover();return 0!=i&&(this.g.set_color(i),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.ops.scaleFactor)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET*this.ops.scaleFactor,0,t),this.endElement(),n?1:s?3:r?2:0},startTextEdit:function(e){this.isTyping=!0,this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=e,this.textSelectedCurrentText=e.text,this.tabPressed&&(this.tabPressed=!1,this.isKeyPressed=!1),this.tabPressedHandle=e,this.cursorX=e.text.length,this.cursorY=0,this.highlightAnchor=0,null!=ei.get()&&ei.get().show()},submitTextEdit:function(){this.submitTextHandle.text=this.textToSubmit,this.submitTextHandle.changed=this.changed=!0,this.submitTextHandle=null,this.textToSubmit="",this.textSelectedCurrentText=""},updateTextEdit:function(e){null==e&&(e=0);var t=this.textSelectedCurrentText;this.isKeyPressed&&(37==this.key?0<this.cursorX&&this.cursorX--:39==this.key?this.cursorX<t.length&&this.cursorX++:8==this.key?0<this.cursorX&&this.highlightAnchor==this.cursorX?(t=it.substr(t,0,this.cursorX-1)+it.substr(t,this.cursorX,t.length),this.cursorX--):this.highlightAnchor<this.cursorX?(t=it.substr(t,0,this.highlightAnchor)+it.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=it.substr(t,0,this.cursorX)+it.substr(t,this.highlightAnchor,t.length):46==this.key?this.highlightAnchor==this.cursorX?t=it.substr(t,0,this.cursorX)+it.substr(t,this.cursorX+1,null):this.highlightAnchor<this.cursorX?(t=it.substr(t,0,this.highlightAnchor)+it.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=it.substr(t,0,this.cursorX)+it.substr(t,this.highlightAnchor,t.length):13==this.key?this.deselectText():27==this.key?(this.textSelectedCurrentText=this.textSelectedHandle.text,this.deselectText()):9==this.key?(this.tabPressed=!0,this.deselectText(),this.key=null):36==this.key?this.cursorX=0:35==this.key?this.cursorX=t.length:16!=this.key&&20!=this.key&&17!=this.key&&18!=this.key&&38!=this.key&&40!=this.key&&null!=this.char&&""!=this.char&&32<=it.cca(this.char,0)&&(t=it.substr(t,0,this.highlightAnchor)+this.char+it.substr(t,this.cursorX,null),this.cursorX=this.cursorX+1>t.length?t.length:this.cursorX+1),this.isShiftDown&&(37==this.key||39==this.key||16==this.key)||this.isCtrlDown||(this.highlightAnchor=this.cursorX));""!=Li.textToPaste&&(t=it.substr(t,0,this.highlightAnchor)+Li.textToPaste+it.substr(t,this.cursorX,null),this.cursorX+=Li.textToPaste.length,this.highlightAnchor=this.cursorX,Li.textToPaste=""),this.highlightAnchor==this.cursorX?Li.textToCopy=t:this.highlightAnchor<this.cursorX?Li.textToCopy=t.substring(this.highlightAnchor,this.cursorX):Li.textToCopy=t.substring(this.cursorX,this.highlightAnchor),Li.isCut&&(this.highlightAnchor==this.cursorX?t="":this.highlightAnchor<this.cursorX?(t=it.substr(t,0,this.highlightAnchor)+it.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=it.substr(t,0,this.cursorX)+it.substr(t,this.highlightAnchor,t.length));var i=this.t.TEXT_OFFSET*this.ops.scaleFactor,n=this.t.ELEMENT_H*this.ops.scaleFactor,r=n-3*this.buttonOffsetY;if(this.highlightAnchor!=this.cursorX){var s=this.cursorX,a=this.highlightAnchor;this.highlightAnchor<this.cursorX&&(s=this.highlightAnchor,a=this.cursorX);var o=it.substr(t,s,a-s),l=this.ops.font.width(this.fontSize,o),u=this.ops.font.width(this.fontSize,it.substr(t,0,s)),h=0==e?this._x+u+i:this._x+this._w-l-i;2==e&&(h-=this.ops.font.width(this.fontSize,it.substr(t,a,t.length))),this.g.set_color(this.t.ACCENT_SELECT_COL),this.g.fillRect(h,this._y+this.cursorY*n+1.5*this.buttonOffsetY,l*this.ops.scaleFactor,r)}var c=G.time();if(this.isKeyDown||c%1<.5){var A=0==e?it.substr(t,0,this.cursorX):t.substring(this.cursorX,t.length),d=this.ops.font.width(this.fontSize,A),_=0==e?this._x+d+i:this._x+this._w-d-i;this.g.set_color(this.t.TEXT_COL),this.g.fillRect(_,this._y+this.cursorY*n+1.5*this.buttonOffsetY,this.ops.scaleFactor,r)}this.textSelectedCurrentText=t},textInput:function(e,t,i){if(null==i&&(i=0),null==t&&(t=""),!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),e.text;var n=this.getHover();n&&null!=Li.onTextHover&&Li.onTextHover(),this.g.set_color(n?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var r=this.g,s=this.t.FILL_ACCENT_BG,a=this._x+this.buttonOffsetY,o=this._y+this.buttonOffsetY,l=this._w-2*this.buttonOffsetY,u=this.t.BUTTON_H*this.ops.scaleFactor,h=0;0==h&&(h=1),this.enabled||this.fadeColor(),s?r.fillRect(a,o-1,l,1+u):r.drawRect(a,o,l,u,h);var c=this.getReleased()||this.tabPressed;if(this.textSelectedHandle!=e&&c&&this.startTextEdit(e),this.textSelectedHandle==e&&this.updateTextEdit(i),this.submitTextHandle==e?this.submitTextEdit():e.changed=!1,""!=t){this.g.set_color(this.t.LABEL_COL);var A=2==i?0:2,d=0==A?7:0;this.drawString(this.g,t,d,0,A)}return this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.text,null,0,i):this.drawString(this.g,this.textSelectedCurrentText,null,0,i),this.endElement(),e.text},deselectText:function(){this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=null,this.isTyping=!1,null!=this.currentWindow&&(this.currentWindow.redraws=2),null!=ei.get()&&ei.get().hide(),this.highlightAnchor=this.cursorX},button:function(e,t,i){if(null==i&&(i=""),null==t&&(t=1),!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),!1;var n=this.getReleased(),r=this.getPushed(),s=this.getHover();n&&(this.changed=!0),this.g.set_color(r?this.t.BUTTON_PRESSED_COL:s?this.t.BUTTON_HOVER_COL:this.t.BUTTON_COL);var a=this.g,o=this.t.FILL_BUTTON_BG,l=this._x+this.buttonOffsetY,u=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,c=this.t.BUTTON_H*this.ops.scaleFactor,A=0;return 0==A&&(A=1),this.enabled||this.fadeColor(),o?a.fillRect(l,u-1,h,1+c):a.drawRect(l,u,h,c,A),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET*this.ops.scaleFactor,0,t),""!=i&&(this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,i,this.t.TEXT_OFFSET*this.ops.scaleFactor,0,2==t?0:2)),this.endElement(),n},check:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),e.selected;this.getReleased()?(e.selected=!e.selected,e.changed=this.changed=!0):e.changed=!1;var i=this.getHover();return this.drawCheck(e.selected,i),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t,this.titleOffsetX,0,0),this.endElement(),e.selected},radio:function(e,t,i){if(!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),e.position==t;this.getReleased()?(e.position=t,e.changed=this.changed=!0):e.changed=!1;var n=this.getHover();return this.drawRadio(e.position==t,n),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,i,this.titleOffsetX,0),this.endElement(),e.position==t},combo:function(e,t,i,n,r){if(null==r&&(r=0),null==n&&(n=!1),null==i&&(i=""),!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),e.position;if(this.getReleased()&&null==this.comboSelectedHandle&&(this.inputEnabled=!1,this.comboSelectedHandle=e,this.comboSelectedWindow=this.currentWindow,this.comboSelectedAlign=r,this.comboSelectedTexts=t,this.comboSelectedLabel=i,this.comboSelectedX=this._x+this._windowX|0,this.comboSelectedY=this._y+this._windowY+this.t.ELEMENT_H*this.ops.scaleFactor|0,this.comboSelectedW=0|this._w),e==this.submitComboHandle?(e.position=this.comboToSubmit,this.submitComboHandle=null,e.changed=this.changed=!0):e.changed=!1,this.getHover()){this.g.set_color(this.t.ACCENT_HOVER_COL);var s=this.g,a=this.t.FILL_ACCENT_BG,o=this._x+this.buttonOffsetY,l=this._y+this.buttonOffsetY,u=this._w-2*this.buttonOffsetY,h=this.t.BUTTON_H*this.ops.scaleFactor,c=0;0==c&&(c=1),this.enabled||this.fadeColor(),a?s.fillRect(o,l-1,u,1+h):s.drawRect(o,l,u,h,c)}else{this.g.set_color(this.t.ACCENT_COL);var A=this.g,d=this.t.FILL_ACCENT_BG,_=this._x+this.buttonOffsetY,f=this._y+this.buttonOffsetY,g=this._w-2*this.buttonOffsetY,p=this.t.BUTTON_H*this.ops.scaleFactor,m=0;0==m&&(m=1),this.enabled||this.fadeColor(),d?A.fillRect(_,f-1,g,1+p):A.drawRect(_,f,g,p,m)}var v=this._x+this._w-this.arrowOffsetX-8,w=this._y+this.arrowOffsetY+3;return this.g.fillTriangle(v,w,v+this.t.ARROW_SIZE*this.ops.scaleFactor,w,v+this.t.ARROW_SIZE*this.ops.scaleFactor/2,w+this.t.ARROW_SIZE*this.ops.scaleFactor/2),n&&""!=i&&(0==r&&(this._x-=15),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,i,null,0,0==r?2:0),0==r&&(this._x+=15)),2==r&&(this._x-=15),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t[e.position],null,0,r),2==r&&(this._x+=15),this.endElement(),e.position},slider:function(e,t,i,n,r,s,a,o,l){if(null==l&&(l=!0),null==o&&(o=2),null==a&&(a=!0),null==s&&(s=100),null==r&&(r=!1),null==n&&(n=1),null==i&&(i=0),!this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor))return this.endElement(),e.value;if(this.getStarted()&&(this.scrollHandle=e,this.isScrolling=!0),e.changed=!1,e==this.scrollHandle){var u=n-i,h=this._x+this._windowX+this.buttonOffsetY,c=u/(this._w-2*this.buttonOffsetY),A=i+(this.inputX-h)*c;e.value=Math.round(A*s)/s,e.value<i?e.value=i:e.value>n&&(e.value=n),e.changed=this.changed=!0}var d=this.getHover();this.drawSlider(e.value,i,n,r,d),(this.getReleased()||this.tabPressed)&&l&&(e.text=e.value+"",this.startTextEdit(e),e.changed=this.changed=!0);var _=0==o?2:0;return this.textSelectedHandle==e&&this.updateTextEdit(_),this.submitTextHandle==e&&(this.submitTextEdit(),e.value=parseFloat(e.text),e.changed=this.changed=!0),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,t,null,0,o),a&&(this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle!=e?this.drawString(this.g,e.value+"",null,0,_):this.drawString(this.g,this.textSelectedCurrentText,null,0,_)),this.endElement(),e.value},separator:function(e,t){null==t&&(t=!0),null==e&&(e=4),this.isVisible(this.t.ELEMENT_H*this.ops.scaleFactor)&&t&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(this._x,this._y,this._w,e*this.ops.scaleFactor)),this._y+=e*this.ops.scaleFactor},tooltip:function(e){this.tooltipText=e,this.tooltipY=this._y+this._windowY},tooltipImage:function(e,t){this.tooltipImg=e,this.tooltipImgMaxWidth=t,this.tooltipInvertY=this.imageInvertY,this.tooltipY=this._y+this._windowY},drawArrow:function(e){var t=this._x+this.arrowOffsetX,i=this._y+this.arrowOffsetY;this.g.set_color(this.t.TEXT_COL),e?this.g.fillTriangle(t,i,t+this.t.ARROW_SIZE*this.ops.scaleFactor,i,t+this.t.ARROW_SIZE*this.ops.scaleFactor/2,i+this.t.ARROW_SIZE*this.ops.scaleFactor):this.g.fillTriangle(t,i,t,i+this.t.ARROW_SIZE*this.ops.scaleFactor,t+this.t.ARROW_SIZE*this.ops.scaleFactor,i+this.t.ARROW_SIZE*this.ops.scaleFactor/2)},drawTree:function(e){var t=7*this.ops.scaleFactor,i=this._x+this.arrowOffsetX+1,n=this._y+this.arrowOffsetY+1;this.g.set_color(this.t.TEXT_COL),e?this.g.fillRect(i,n+t/2-1,t,t/8):(this.g.fillRect(i,n+t/2-1,t,t/8),this.g.fillRect(i+t/2-1,n,t/8,t))},drawCheck:function(e,t){var i=this._x+this.checkOffsetX,n=this._y+this.checkOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var r=this.g,s=this.t.FILL_ACCENT_BG,a=this.t.CHECK_SIZE*this.ops.scaleFactor,o=this.t.CHECK_SIZE*this.ops.scaleFactor,l=0;if(0==l&&(l=1),this.enabled||this.fadeColor(),s?r.fillRect(i,n-1,a,1+o):r.drawRect(i,n,a,o,l),e){this.g.set_color(-1),this.enabled||this.fadeColor();var u=this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor|0;this.g.drawScaledImage(this.checkSelectImage,i+this.checkSelectOffsetX,n+this.checkSelectOffsetY,u,u)}},drawRadio:function(e,t){var i=this._x+this.radioOffsetX,n=this._y+this.radioOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var r=this.g,s=this.t.FILL_ACCENT_BG,a=this.t.CHECK_SIZE*this.ops.scaleFactor,o=this.t.CHECK_SIZE*this.ops.scaleFactor,l=0;0==l&&(l=1),this.enabled||this.fadeColor(),s?r.fillRect(i,n-1,a,1+o):r.drawRect(i,n,a,o,l),e&&(this.g.set_color(this.t.ACCENT_SELECT_COL),this.enabled||this.fadeColor(),this.g.fillRect(i+this.radioSelectOffsetX,n+this.radioSelectOffsetY,this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor,this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor))},drawSlider:function(e,t,i,n,r){var s=this._x+this.buttonOffsetY,a=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY;this.g.set_color(r?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var l=this.g,u=this.t.FILL_ACCENT_BG,h=this.t.BUTTON_H*this.ops.scaleFactor,c=0;0==c&&(c=1),this.enabled||this.fadeColor(),u?l.fillRect(s,a-1,o,1+h):l.drawRect(s,a,o,h,c),this.g.set_color(r?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var A=(e-t)/(i-t),d=8*this.ops.scaleFactor,_=n?s:s+(o-d)*A,f=n?o*A:d;f=Math.max(Math.min(f,o),0);var g=this.g,p=this.t.BUTTON_H*this.ops.scaleFactor,m=0;0==m&&(m=1),this.enabled||this.fadeColor(),g.fillRect(_,a-1,f,1+p)},drawCombo:function(){if(null!=this.comboSelectedHandle){var e=this.g;this.globalG.set_color(this.t.SEPARATOR_COL);var t=this.t.ELEMENT_H*this.ops.scaleFactor+this.t.ELEMENT_OFFSET*this.ops.scaleFactor|0,i=(this.comboSelectedTexts.length+1)*t;this.globalG.begin(!1);var n=this.comboSelectedY-i-(this.t.ELEMENT_H*this.ops.scaleFactor|0),r=pt.windowHeight()-(this.comboSelectedY+i),s=r<0&&r<n,a=s?this.comboSelectedY-i-(this.t.ELEMENT_H*this.ops.scaleFactor|0):this.comboSelectedY;this.globalG.fillRect(this.comboSelectedX,a,this.comboSelectedW,i),this.beginRegion(this.globalG,this.comboSelectedX,a,this.comboSelectedW),s&&(this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,this.comboSelectedLabel,null,0,2),this._y+=t,this.fill(0,0,this._w/this.ops.scaleFactor,this.ops.scaleFactor,this.t.ACCENT_SELECT_COL)),this.inputEnabled=!0;for(var o=this.t.BUTTON_COL,l=0,u=this.comboSelectedTexts.length;l<u;){var h=l++,c=s?this.comboSelectedTexts.length-1-h:h;if(this.t.BUTTON_COL=c==this.comboSelectedHandle.position?this.t.WINDOW_BG_COL:this.t.SEPARATOR_COL,this.button(this.comboSelectedTexts[c],this.comboSelectedAlign)){this.comboToSubmit=c,this.submitComboHandle=this.comboSelectedHandle,null!=this.comboSelectedWindow&&(this.comboSelectedWindow.redraws=2);break}}this.t.BUTTON_COL=o,s||(this.fill(0,0,this._w/this.ops.scaleFactor,this.ops.scaleFactor,this.t.ACCENT_SELECT_COL),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,this.comboSelectedLabel,null,0,2)),!this.inputReleased&&!this.isEscapeDown||Li.comboFirst?Li.comboFirst=!1:(this.comboSelectedHandle=null,Li.comboFirst=!0),this.inputEnabled=null==this.comboSelectedHandle,this.endRegion(!1),this.globalG.end(),this.g=e}},drawTooltip:function(){""!=this.tooltipText||null!=this.tooltipImg?(this.inputChanged()&&(this.tooltipShown=!1,this.tooltipWait=0==this.inputDX&&0==this.inputDY),this.tooltipShown||(this.tooltipShown=!0,this.tooltipX=this.inputX,this.tooltipTime=G.time()),!this.tooltipWait&&1<G.time()-this.tooltipTime&&(""!=this.tooltipText?this.drawTooltipText():this.drawTooltipImage())):this.tooltipShown=!1},drawTooltipText:function(){this.globalG.set_color(this.t.TEXT_COL);for(var e=this.tooltipText.split("\n"),t=0,i=0;i<e.length;){var n=e[i];++i;var r=this.ops.font.width(this.fontSize,n);t<r&&(t=r)}this.tooltipX=Math.min(this.tooltipX,pt.windowWidth()-t-20),this.globalG.begin(!1),this.globalG.fillRect(this.tooltipX,this.tooltipY,t+20,this.t.ELEMENT_H*this.ops.scaleFactor*e.length*.6),this.globalG.set_font(this.ops.font),this.globalG.set_fontSize(this.fontSize),this.globalG.set_color(this.t.ACCENT_COL);for(var s=0,a=e.length;s<a;){var o=s++;this.globalG.drawString(e[o],this.tooltipX+5,this.tooltipY+o*this.fontSize)}this.globalG.end()},drawTooltipImage:function(){var e=this.tooltipImg.get_width();null!=this.tooltipImgMaxWidth&&e>this.tooltipImgMaxWidth&&(e=this.tooltipImgMaxWidth);var t=this.tooltipImg.get_height()*(e/this.tooltipImg.get_width());this.tooltipX=Math.min(this.tooltipX,pt.windowWidth()-e-20),this.tooltipY=Math.min(this.tooltipY,pt.windowHeight()-t-20),this.globalG.set_color(-16777216),this.globalG.begin(!1),this.globalG.fillRect(this.tooltipX,this.tooltipY,e,t),this.globalG.set_color(-1),this.tooltipInvertY?this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY+t,e,-t):this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY,e,t),this.globalG.end()},drawString:function(e,t,i,n,r){null==r&&(r=0),null==n&&(n=0);var s=this._w/(this.fontSize/2|0)|0;t.length>s&&(t=t.substring(0,s)+".."),null==i&&(i=this.t.TEXT_OFFSET),i*=this.ops.scaleFactor,e.set_font(this.ops.font),e.set_fontSize(this.fontSize),1==r?i=this._w/2-this.ops.font.width(this.fontSize,t)/2:2==r&&(i=this._w-this.ops.font.width(this.fontSize,t)-this.t.TEXT_OFFSET*this.ops.scaleFactor),this.enabled||this.fadeColor(),e.set_pipeline(this.rtTextPipeline),e.drawString(t,this._x+i,this._y+this.fontOffsetY+n),e.set_pipeline(null)},endElement:function(e){null==e&&(e=this.t.ELEMENT_H*this.ops.scaleFactor+this.t.ELEMENT_OFFSET*this.ops.scaleFactor),null==this.currentWindow||0==this.currentWindow.layout?-1==this.curRatio||null!=this.ratios&&this.curRatio==this.ratios.length-1?(this._y+=e,null!=this.ratios&&this.curRatio==this.ratios.length-1&&(this.curRatio=-1,this.ratios=null,this._x=this.xBeforeSplit,this._w=this.wBeforeSplit)):(this.curRatio++,this._x+=this._w,this._w=this.wBeforeSplit*this.ratios[this.curRatio]|0):this._x+=this._w+this.t.ELEMENT_OFFSET*this.ops.scaleFactor},row:function(e){this.ratios=e,this.curRatio=0,this.xBeforeSplit=this._x,this.wBeforeSplit=this._w,this._w=this._w*e[this.curRatio]|0},indent:function(){this._x+=this.t.TAB_W*this.ops.scaleFactor|0,this._w-=this.t.TAB_W*this.ops.scaleFactor|0},unindent:function(){this._x-=this.t.TAB_W*this.ops.scaleFactor|0,this._w+=this.t.TAB_W*this.ops.scaleFactor|0},fadeColor:function(){this.g.set_color(C.fromFloats(.00392156862745098*((16711680&this.g.get_color())>>>16),.00392156862745098*((65280&this.g.get_color())>>>8),.00392156862745098*(255&this.g.get_color()),.25))},fill:function(e,t,i,n,r){this.g.set_color(r),this.enabled||this.fadeColor(),this.g.fillRect(this._x+e*this.ops.scaleFactor,this._y+t*this.ops.scaleFactor-1,i*this.ops.scaleFactor,n*this.ops.scaleFactor),this.g.set_color(-1)},rect:function(e,t,i,n,r,s){null==s&&(s=1),this.g.set_color(r),this.enabled||this.fadeColor(),this.g.drawRect(this._x+e*this.ops.scaleFactor,this._y+t*this.ops.scaleFactor,i*this.ops.scaleFactor,n*this.ops.scaleFactor,s),this.g.set_color(-1)},drawRect:function(e,t,i,n,r,s,a){null==a&&(a=0),0==a&&(a=1),this.enabled||this.fadeColor(),t?e.fillRect(i,n-1,r,s+1):e.drawRect(i,n,r,s,a)},isVisible:function(e){if(null==this.currentWindow)return!0;var t=null!=this.tabNames?this.t.ELEMENT_H*this.ops.scaleFactor+this.t.ELEMENT_OFFSET*this.ops.scaleFactor:0;return this._y+e>t&&this._y<this.currentWindow.texture.get_height()},getReleased:function(e){return null==e&&(e=-1),this.isReleased=this.enabled&&this.inputEnabled&&this.inputReleased&&this.getHover(e)&&this.getInitialHover(e),this.isReleased},getPushed:function(e){return null==e&&(e=-1),this.isPushed=this.enabled&&this.inputEnabled&&this.inputDown&&this.getHover(e)&&this.getInitialHover(e),this.isPushed},getStarted:function(e){return null==e&&(e=-1),this.isStarted=this.enabled&&this.inputEnabled&&this.inputStarted&&this.getHover(e),this.isStarted},getInitialHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.ops.scaleFactor),!!(this.enabled&&this.inputEnabled&&this.inputStartedX>=this._windowX+this._x&&this.inputStartedX<this._windowX+this._x+this._w&&this.inputStartedY>=this._windowY+this._y)&&this.inputStartedY<this._windowY+this._y+e},getHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.ops.scaleFactor),this.isHovered=this.enabled&&this.inputEnabled&&this.inputX>=this._windowX+this._x&&this.inputX<this._windowX+this._x+this._w&&this.inputY>=this._windowY+this._y&&this.inputY<this._windowY+this._y+e,this.isHovered},getInputInRect:function(e,t,i,n,r){return null==r&&(r=1),!!(this.enabled&&this.inputEnabled&&this.inputX>=e*r&&this.inputX<(e+i)*r&&this.inputY>=t*r)&&this.inputY<(t+n)*r},onMouseDown:function(e,t,i){0==e?this.inputStarted=!0:this.inputStartedR=!0,0==e?this.inputDown=!0:this.inputDownR=!0,this.setInputPosition(t,i),this.inputStartedX=t,this.inputStartedY=i},onMouseUp:function(e,t,i){0==e?this.isScrolling?(this.isScrolling=!1,this.scrollHandle=null,t==this.inputStartedX&&i==this.inputStartedY&&(this.inputReleased=!0)):this.inputReleased=!0:1==e&&(this.inputReleasedR=!0),0==e?this.inputDown=!1:this.inputDownR=!1,this.setInputPosition(t,i),this.deselectText()},onMouseMove:function(e,t,i,n){this.setInputPosition(e,t)},onMouseWheel:function(e){this.inputWheelDelta=e},setInputPosition:function(e,t){this.inputDX+=e-this.inputX,this.inputDY+=t-this.inputY,this.inputX=e,this.inputY=t},onKeyDown:function(e){switch(this.key=e,this.isKeyPressed=!0,this.isKeyDown=!0,Li.keyRepeatTime=G.time()+.4,e){case 8:this.isBackspaceDown=!0;break;case 13:this.isReturnDown=!0;break;case 16:this.isShiftDown=!0;break;case 17:this.isCtrlDown=!0;break;case 18:this.isAltDown=!0;break;case 27:this.isEscapeDown=!0;break;case 32:this.char=" ";break;case 46:this.isDeleteDown=!0}},onKeyUp:function(e){switch(this.isKeyDown=!1,e){case 8:this.isBackspaceDown=!1;break;case 13:this.isReturnDown=!1;break;case 16:this.isShiftDown=!1;break;case 17:this.isCtrlDown=!1;break;case 18:this.isAltDown=!1;break;case 27:this.isEscapeDown=!1;break;case 46:this.isDeleteDown=!1}},onKeyPress:function(e){this.char=e,this.isKeyPressed=!0},onCut:function(){return Li.isCut=!0,this.onCopy()},onCopy:function(){return Li.isCopy=!0,Li.textToCopy},onPaste:function(e){Li.isPaste=!0,Li.textToPaste=e},ELEMENT_W:function(){return this.t.ELEMENT_W*this.ops.scaleFactor},ELEMENT_H:function(){return this.t.ELEMENT_H*this.ops.scaleFactor},ELEMENT_OFFSET:function(){return this.t.ELEMENT_OFFSET*this.ops.scaleFactor},ARROW_SIZE:function(){return this.t.ARROW_SIZE*this.ops.scaleFactor},BUTTON_H:function(){return this.t.BUTTON_H*this.ops.scaleFactor},CHECK_SIZE:function(){return this.t.CHECK_SIZE*this.ops.scaleFactor},CHECK_SELECT_SIZE:function(){return this.t.CHECK_SELECT_SIZE*this.ops.scaleFactor},FONT_SIZE:function(){return this.t.FONT_SIZE*this.ops.scaleFactor|0},SCROLL_W:function(){return this.t.SCROLL_W*this.ops.scaleFactor|0},TEXT_OFFSET:function(){return this.t.TEXT_OFFSET*this.ops.scaleFactor},TAB_W:function(){return this.t.TAB_W*this.ops.scaleFactor|0},SCALE:function(){return this.ops.scaleFactor},FLASH_SPEED:function(){return.5},TOOLTIP_DELAY:function(){return 1},resize:function(e,t,i,n){null==n&&(n=0),e.redraws=2,null!=e.texture&&e.texture.unload(),t<1&&(t=1),i<1&&(i=1),e.texture=R.createRenderTarget(t,i,0,0,1,n),e.texture.get_g2().set_imageScaleQuality(1)},__class__:Li},n.$haxeUID|=0,x.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.prototype.__class__=x.String=String,String.__name__=!0,x.Array=Array,Array.__name__=!0,Date.prototype.__class__=x.Date=Date,Date.__name__="Date";var Fi={},Pi={},Mi=Number,Ri=Boolean,Oi={},Vi={};te.count=0;var Di={};Object.defineProperty(ft.prototype,"message",{get:function(){return String(this.val)}}),g.__toStr={}.toString,null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=v.sliceImpl),nt.cwd="",ot.defaultWindowW=240,ot.windowW=ot.defaultWindowW,ot.coffX=160,ot.coffY=40,ot.currentOperation="",ot.assetNames=[""],ot.showFiles=!1,ot.foldersOnly=!1,ot.gridSnapBounds=!1,ot.gridSnapPos=!0,ot.gridUseRelative=!0,ot.useRotationSteps=!1,ot.gridSize=20,ot.rotationSteps=.261799386,ot.modalW=625,ot.modalH=545,ot.modalHeaderH=66,ot.modalRectW=625,ot.modalRectH=545,ot.path="/",X.isManipulating=!1,X.transformStartedMouse=!1,X.drag=!1,X.dragLeft=!1,X.dragTop=!1,X.dragRight=!1,X.dragBottom=!1,X.grab=!1,X.grabX=!1,X.grabY=!1,X.rotate=!1,At.global=new At,dt.hwin=At.global.nest(0,null),J.DEFAULT_RESOLVER=new a,J.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",_.helper=new DataView(new ArrayBuffer(8)),gt.images=new S,gt.sounds=new E,gt.blobs=new B,gt.fonts=new k,gt.videos=new I,C.Black=-16777216,C.White=-1,C.Red=-65536,C.Blue=-16776961,C.Green=-16711936,C.Magenta=-65281,C.Yellow=-256,C.Cyan=-16711681,C.Purple=-8388480,C.Pink=-16181,C.Orange=-23296,C.Transparent=0,C.invMaxChannelValue=.00392156862745098,b.displays=[],N.Default=new N(!1,!1,!1),G.timeWarpSaveTime=10,G.DIF_COUNT=3,G.maxframetime=.5,G.startTime=0,z.painter_colored_fragData0="s580:AAAARFhCQwKRAhCE2jyY1lWcLP2kpYQBAAAAsAEAAAUAAAA0AAAAjAAAAMAAAAD0AAAANAEAAFJERUZQAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4AAAAQAAAAA4AAABiEAAD8hAQAAAAAABlAAAD8iAQAAAAAAA2AAAF8iAQAAAAAABGHhAAAAAAAD4AAAFTVEFUdAAAAAIAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_colored_vertData0="s1314:AnZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABASRHbG9iYWxzAAABcHJvamVjdGlvbk1hdHJpeAAAAAAAQAAAAAQERFhCQ5A:MgyGPthJiwcRz4ddIcQBAAAAlAMAAAUAAAA0AAAADAEAAFgBAACwAQAAGAMAAFJERUbQAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAnAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIwAAAAAAAAAcHJvamVjdGlvbk1hdHJpeACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciA2LjMuOTYwMC4xNjM4NACrq0lTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAA8PAAA4AAAAAQAAAAAAAAADAAAAAQAAAAcHAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUmABAABAAAEAWAAAAFkAAARGjiAAAAAAAAQAAABfAAAD8hAQAAAAAABfAAADchAQAAEAAABlAAAD8iAQAAAAAABnAAAE8iAQAAEAAAABAAAAaAAAAgIAAAA2AAAF8iAQAAAAAABGHhAAAAAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAQAAABoAEAABAAAAOAAAB0IgEAABAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAQAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAABAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAALAAAAAgAAAAAAAAAEAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_image_fragData0="s931:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkMLuHx52DaqoPgbxVgoLcgLAQAAAKQCAAAFAAAANAAAANwAAAAoAQAAXAEAACgCAABSREVGoAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAAMAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDYuMy45NjAwLjE2Mzg0AKtJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLEAAAAQAAAADEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA:IQEAAAAAAAYhAAAzIQEAABAAAAZQAAA:IgEAAAAAAAaAAAAgEAAABFAAAJ8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAA4AAAH8gAQAAAAAABGDhAAAAAAAEYeEAAAAAAAOAAAB3IgEAAAAAAARgIQAAAAAAD2HxAAAAAAADYAAAWCIBAAAAAAADoAEAAAAAAAPgAAAVNUQVR0AAAABQAAAAEAAAAAAAAAAwAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_image_vertData0="s1454:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMYRgMBQiEp1Ksh8UKJ6SuGAQAAAPADAAAFAAAANAAAAAwBAABwAQAA4AEAAHQDAABSREVG0AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_text_fragData0="s894:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkN4eKkSkOMyc:NS8ppPD1BYAQAAAIgCAAAFAAAANAAAANwAAAAoAQAAXAEAAAwCAABSREVGoAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAAMAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDYuMy45NjAwLjE2Mzg0AKtJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFKoAAAAQAAAACoAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA:IQEAAAAAAAYhAAAzIQEAABAAAAZQAAA:IgEAAAAAAAaAAAAgEAAABFAAAJ8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAA4AAAHgiAQAAAAAAAKABAAAAAAADoQEAAAAAAANgAABXIgEAAAAAAARhIQAAAAAAA%AAABU1RBVHQAAAAEAAAAAQAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_text_vertData0="s1454:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMYRgMBQiEp1Ksh8UKJ6SuGAQAAAPADAAAFAAAANAAAAAwBAABwAQAA4AEAAHQDAABSREVG0AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_video_fragData0="s931:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkMLuHx52DaqoPgbxVgoLcgLAQAAAKQCAAAFAAAANAAAANwAAAAoAQAAXAEAACgCAABSREVGoAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAAMAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDYuMy45NjAwLjE2Mzg0AKtJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLEAAAAQAAAADEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA:IQEAAAAAAAYhAAAzIQEAABAAAAZQAAA:IgEAAAAAAAaAAAAgEAAABFAAAJ8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAA4AAAH8gAQAAAAAABGDhAAAAAAAEYeEAAAAAAAOAAAB3IgEAAAAAAARgIQAAAAAAD2HxAAAAAAADYAAAWCIBAAAAAAADoAEAAAAAAAPgAAAVNUQVR0AAAABQAAAAEAAAAAAAAAAwAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z.painter_video_vertData0="s1454:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMYRgMBQiEp1Ksh8UKJ6SuGAQAAAPADAAAFAAAANAAAAAwBAABwAQAA4AEAAHQDAABSREVG0AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",pt.renderListeners=[],pt.foregroundListeners=[],pt.resumeListeners=[],pt.pauseListeners=[],pt.backgroundListeners=[],pt.shutdownListeners=[],pt.dropFilesListeners=[],Q.maxGamepads=4,Q.mouseLockListeners=[],j.windows=[],Z.None=0,Z.FeatureResizable=1,Z.FeatureMinimizable=2,Z.FeatureMaximizable=4,Z.FeatureBorderless=8,Z.FeatureOnTop=16,de.disableGcInteractions=!1,de.intBox=new ue(0),_e.channelCount=32,_e.lastAllocationCount=0,ve.POLY=79764919,xe.INVALID_BITS=-1,Ee.EOP=-1,Ee.M__PI=3.141592653589793,Ee.DIVTAB_NUMER=32,Ee.DIVTAB_DENOM=64,Ee.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1],Be.NO_CODE=255,Be.delay=0,Ne.PACKET_ID=1,Ne.PACKET_COMMENT=3,Ne.PACKET_SETUP=5,De.CONTINUED_PACKET=1,De.FIRST_PAGE=2,De.LAST_PAGE=4,We.MAX_CHANNELS=16,We.PUSHDATA_CRC_COUNT=4,We.FAST_HUFFMAN_LENGTH=10,We.FAST_HUFFMAN_TABLE_SIZE=1024,We.FAST_HUFFMAN_TABLE_MASK=1023,Qe.fontGlyphs=function(){for(var e=[],t=32;t<256;){var i=t++;e.push(i)}return e}(),It.STBTT_vmove=1,It.STBTT_vline=2,It.STBTT_vcurve=3,It.STBTT_MACSTYLE_DONTCARE=0,It.STBTT_MACSTYLE_BOLD=1,It.STBTT_MACSTYLE_ITALIC=2,It.STBTT_MACSTYLE_UNDERSCORE=4,It.STBTT_MACSTYLE_NONE=8,It.STBTT_PLATFORM_ID_UNICODE=0,It.STBTT_PLATFORM_ID_MAC=1,It.STBTT_PLATFORM_ID_ISO=2,It.STBTT_PLATFORM_ID_MICROSOFT=3,It.STBTT_UNICODE_EID_UNICODE_1_0=0,It.STBTT_UNICODE_EID_UNICODE_1_1=1,It.STBTT_UNICODE_EID_ISO_10646=2,It.STBTT_UNICODE_EID_UNICODE_2_0_BMP=3,It.STBTT_UNICODE_EID_UNICODE_2_0_FULL=4,It.STBTT_MS_EID_SYMBOL=0,It.STBTT_MS_EID_UNICODE_BMP=1,It.STBTT_MS_EID_SHIFTJIS=2,It.STBTT_MS_EID_UNICODE_FULL=10,It.STBTT_MAC_EID_ROMAN=0,It.STBTT_MAC_EID_ARABIC=4,It.STBTT_MAC_EID_JAPANESE=1,It.STBTT_MAC_EID_HEBREW=5,It.STBTT_MAC_EID_CHINESE_TRAD=2,It.STBTT_MAC_EID_GREEK=6,It.STBTT_MAC_EID_KOREAN=3,It.STBTT_MAC_EID_RUSSIAN=7,It.STBTT_MS_LANG_ENGLISH=1033,It.STBTT_MS_LANG_ITALIAN=1040,It.STBTT_MS_LANG_CHINESE=2052,It.STBTT_MS_LANG_JAPANESE=1041,It.STBTT_MS_LANG_DUTCH=1043,It.STBTT_MS_LANG_KOREAN=1042,It.STBTT_MS_LANG_FRENCH=1036,It.STBTT_MS_LANG_RUSSIAN=1049,It.STBTT_MS_LANG_GERMAN=1031,It.STBTT_MS_LANG_SPANISH=1033,It.STBTT_MS_LANG_HEBREW=1037,It.STBTT_MS_LANG_SWEDISH=1053,It.STBTT_MAC_LANG_ENGLISH=0,It.STBTT_MAC_LANG_JAPANESE=11,It.STBTT_MAC_LANG_ARABIC=12,It.STBTT_MAC_LANG_KOREAN=23,It.STBTT_MAC_LANG_DUTCH=4,It.STBTT_MAC_LANG_RUSSIAN=32,It.STBTT_MAC_LANG_FRENCH=1,It.STBTT_MAC_LANG_SPANISH=6,It.STBTT_MAC_LANG_GERMAN=2,It.STBTT_MAC_LANG_SWEDISH=5,It.STBTT_MAC_LANG_HEBREW=10,It.STBTT_MAC_LANG_CHINESE_SIMPLIFIED=33,It.STBTT_MAC_LANG_ITALIAN=3,It.STBTT_MAC_LANG_CHINESE_TRAD=19,It.STBTT_MAX_OVERSAMPLE=8,It.STBTT_RASTERIZER_VERSION=2,Rt.bufferSize=1500,Rt.vertexSize=9,Ot.bufferSize=1e3,Ot.triangleBufferSize=1e3,Vt.bufferSize=1e3,Zt.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}},Zt.instances=[],Zt.connectListeners=[],Zt.disconnectListeners=[],ei.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}},ei.keyBehavior=$t.Default,ti.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}},si.bufferSize=2e3,ai.mat=new Float32Array(16),li.width=3,li.height=3,ui.width=4,ui.height=4,di.width=3,di.height=3,_i.width=4,_i.height=4,vi.nextId=0,xi.START=0,xi.ENTITY_UPDATES=1,xi.CONTROLLER_UPDATES=2,xi.REMOTE_CALL=3,xi.PING=4,xi.SESSION_ERROR=5,xi.PLAYER_UPDATES=6,xi.RPC_SERVER=0,xi.RPC_ALL=1,Ti.nextId=0,Ti.objects=[],Ei.assetMap=new $,Ei.themes=[],Ei.events=[],Ei.screenW=-1,Ei.screenH=-1,Ei.locale="en",Ei.h=new At,Ei.elemId=-1,Ei.assetId=-1,Bi.dataPath="",Bi.lastPath="",Bi.kx=1,Bi.ky=.6666666666666666,Bi.kz=.3333333333333333,Bi.kw=3,Bi.ar=[0,0,0],Bi.Kx=0,Bi.Ky=-.3333333333333333,Bi.Kz=.6666666666666666,Bi.Kw=-1,Bi.e=1e-10,ki.i=0,Ii.show=!1,Ii.hwnd=new At,Ii.boxTitle="",Ii.boxText="",Ii.modalX=0,Ii.modalY=0,Ii.modalW=400,Ii.modalH=160,Ci.dark={NAME:"Default Dark",FONT_SIZE:13,ELEMENT_W:100,ELEMENT_H:24,ELEMENT_OFFSET:4,ARROW_SIZE:5,BUTTON_H:22,CHECK_SIZE:15,CHECK_SELECT_SIZE:8,SCROLL_W:6,TEXT_OFFSET:8,TAB_W:12,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-13421773,WINDOW_TINT_COL:-1,ACCENT_COL:-12303292,ACCENT_HOVER_COL:-11974327,ACCENT_SELECT_COL:-10461088,BUTTON_COL:-12171706,BUTTON_TEXT_COL:-1513499,BUTTON_HOVER_COL:-11974327,BUTTON_PRESSED_COL:-15000805,TEXT_COL:-1513499,LABEL_COL:-3618616,SEPARATOR_COL:-14211289,HIGHLIGHT_COL:-14656100,CONTEXT_COL:-14540254},Ci.light={NAME:"Default Light",FONT_SIZE:26,ELEMENT_W:200,ELEMENT_H:48,ELEMENT_OFFSET:8,ARROW_SIZE:10,BUTTON_H:44,CHECK_SIZE:30,CHECK_SELECT_SIZE:16,SCROLL_W:12,TEXT_OFFSET:16,TAB_W:24,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-1052689,WINDOW_TINT_COL:-14540254,ACCENT_COL:-1118482,ACCENT_HOVER_COL:-4473925,ACCENT_SELECT_COL:-5592406,BUTTON_COL:-3355444,BUTTON_TEXT_COL:-14540254,BUTTON_HOVER_COL:-5000269,BUTTON_PRESSED_COL:-5131855,TEXT_COL:-6710887,LABEL_COL:-5592406,SEPARATOR_COL:-6710887,HIGHLIGHT_COL:-14656100,CONTEXT_COL:-5592406},Li.alwaysRedrawWindow=!0,Li.keyRepeat=!0,Li.keyRepeatTime=0,Li.textToPaste="",Li.textToCopy="",Li.isCut=!1,Li.isCopy=!1,Li.isPaste=!1,Li.copyFrame=0,Li.comboFirst=!0,nt.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);